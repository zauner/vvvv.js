var VVVV_ENV="production",vvvvjs_jquery=$.noConflict();$=vvvvjs_jquery;
(function(k){k.ajaxPrefilter(function(e,g,f){if("script"==e.dataType||"script"==g.dataType)e.cache=!0});window.console||(window.console={log:function(e){}});VVVV={Nodes:{},PinTypes:{},Types:{},NodeLibrary:{},NodeNames:[],Patches:{},Editors:{},onLowFrameRate:function(){},onNotImplemented:function(e){console.log("Warning: "+e+" is not implemented.")},loadCounter:0,loadScript:function(e,g){var f=document.getElementsByTagName("head")[0],c=document.createElement("script");c.async=!1;c.src=VVVV.Root+"/"+
e;g&&c.addEventListener("load",g);VVVV.loadCounter++;f.appendChild(c)},init:function(e,g,f){function c(){var b=new VVVV.Core.Patch("");_(VVVV.Nodes).each(function(a){var h=new a(0,b);"development"==VVVV_ENV&&console.log("Registering "+h.nodename);VVVV.NodeLibrary[h.nodename.toLowerCase()]=a;VVVV.NodeNames.push(h.nodename)});"development"==VVVV_ENV&&console.log("done ...");VVVV.MainLoops=[];k("link[rel='VVVV'], script[language='VVVV']").each(function(a){var b="href";"SCRIPT"==k(this).get(0).tagName&&
("development"==VVVV_ENV&&console.warn('DEPRECATED: loading patches via <script language="VVVV" src="..."> tag is deprecated. Use <link rel="VVVV" href="..."> instead.'),b="src");b=new VVVV.Core.Patch(k(this).attr(b),function(){var a=new VVVV.Core.MainLoop(this);VVVV.MainLoops.push(a)});VVVV.Patches[a]=b});"function"===typeof f&&f.call()}VVVV.Root=e||"./";"development"==VVVV_ENV&&console.log("loading vvvv.js ...");if("development"==VVVV_ENV){document.getElementsByTagName("head");var d=function(b){b.target.removeEventListener("load",
d);0>=--VVVV.loadCounter&&c()};0==k("script[src*=thirdparty]").length&&VVVV.loadScript("thirdparty.js",d);0==k("script[src*=underscore]").length&&VVVV.loadScript("lib/underscore/underscore-min.js",d);0!=k('script[src*="d3.js"]').length||"full"!=g&&"vvvviewer"!=g||VVVV.loadScript("lib/d3-v3/d3.v3.min.js",d);0!=k("script[src*=glMatrix]").length||"full"!=g&&"run"!=g||VVVV.loadScript("lib/glMatrix-0.9.5.min.js",d);if(0==k('script[src*="vvvv.core.js"]').length){VVVV.loadScript("core/vvvv.core.js",d);if("run"==
g||"full"==g)VVVV.loadScript("mainloop/vvvv.mainloop.js",d),VVVV.loadScript("mainloop/vvvv.dominterface.js",d),VVVV.loadScript("types/vvvv.shared_types.js",d),VVVV.loadScript("nodes/vvvv.nodes.value.js",d),VVVV.loadScript("nodes/vvvv.nodes.string.js",d),VVVV.loadScript("nodes/vvvv.nodes.boolean.js",d),VVVV.loadScript("nodes/vvvv.nodes.color.js",d),VVVV.loadScript("nodes/vvvv.nodes.spreads.js",d),VVVV.loadScript("nodes/vvvv.nodes.spectral.js",d),VVVV.loadScript("nodes/vvvv.nodes.animation.js",d),VVVV.loadScript("nodes/vvvv.nodes.network.js",
d),VVVV.loadScript("nodes/vvvv.nodes.system.js",d),VVVV.loadScript("nodes/vvvv.nodes.canvas.js",d),VVVV.loadScript("nodes/vvvv.nodes.html5.js",d),VVVV.loadScript("nodes/vvvv.nodes.audio.js",d),VVVV.loadScript("nodes/vvvv.nodes.transform.js",d),VVVV.loadScript("nodes/vvvv.nodes.vectors.js",d),VVVV.loadScript("nodes/vvvv.nodes.webgl.js",d),VVVV.loadScript("nodes/vvvv.nodes.complex.js",d),VVVV.loadScript("nodes/vvvv.nodes.enumerations.js",d),VVVV.loadScript("nodes/vvvv.nodes.2d.js",d),VVVV.loadScript("nodes/vvvv.nodes.3d.js",
d),VVVV.loadScript("nodes/vvvv.nodes.node.js",d),VVVV.loadScript("nodes/vvvv.nodes.astronomy.js",d),VVVV.loadScript("nodes/vvvv.nodes.xml.js",d),VVVV.loadScript("nodes/vvvv.nodes.differential.js",d),VVVV.loadScript("nodes/vvvv.nodes.xelement.js",d),VVVV.loadScript("nodes/vvvv.nodes.html.js",d),VVVV.loadScript("vvvv.makros.js",d);VVVV.loadScript("editors/vvvv.editors.browser_editor.js",d)}}"production"==VVVV_ENV&&c()}}})(vvvvjs_jquery);(function(k){VVVV.MousePositions={_all:{x:0,y:0,wheel:0,lb:0,mb:0,rb:0}};VVVV.PinDirection={Input:0,Output:1,Configuration:2};VVVV.PinTypes.Generic={typeName:"Generic",reset_on_disconnect:!0,defaultValue:function(){return"0"},cloneValues:function(e){return e.data.values.slice()},increaseSize:function(e,g){}};VVVV.PinTypes.Value={typeName:"Value",reset_on_disconnect:!1,defaultValue:function(){return 0},primitive:!0,cloneValues:function(e){return new Float64Array(e.data.values)},increaseSize:function(e,
g){for(var f=new Float64Array(g+100),c=e.data.values.length;c--;)f[c]=e.data.values[c];e.data.values=f}};VVVV.PinTypes.String={typeName:"String",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0,cloneValues:function(e){return e.data.values.slice()},increaseSize:function(e,g){}};VVVV.PinTypes.Enum={typeName:"Enum",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0,cloneValues:function(e){return e.data.values.slice()},increaseSize:function(e,g){}};VVVV.Helpers=
{translateOperators:function(e){e=e.replace("Add","+");e=e.replace("Subtract","-");e=e.replace("Multiply","*");e=e.replace("Divide","/");e=e.replace("EQ","=");e=e.replace("GT",">");e=e.replace("GTE",">=");e=e.replace("LT","<");return e=e.replace("LTE","<=")},prepareFilePath:function(e,g){e=e.replace(/\\/g,"/");return e.match(/^%VVVV%/)?e.replace("%VVVV%",VVVV.Root):e.match(/^%PAGE%/)?e.replace("%PAGE%",location.pathname):e.match(/^(\/|.+:\/\/)/)?e:g?g.getAbsolutePath()+e:e},dynamicPins:function(e,
g,f,c){for(var d=g.length;d<f;d++)g[d]=c.call(e,d);for(d=f;d<g.length;d++)e.removeInputPin(g[d].pinname);g.length=f;e.parentPatch.afterUpdate()}};VVVV.Core={Pin:function(e,g,f,c,d){this.direction=g;this.pinname=e;this.links=[];this.data={values:[],changed:!0,sliceCount:0};this.node=c;this.reset_on_disconnect=this.active=!1;this.masterPin=this.slavePin=void 0;this.connectionChangedHandlers={};this.enumOptions=[];this.getValue=function(b,a){if(!a||1==a)return this.data.values[b%this.data.sliceCount];
for(var h=[],d=0;d<a;d++)h.push(this.data.values[(b*a+d)%this.data.sliceCount]);return h};this.setValue=function(b,a){this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(b>this.data.values.length-1&&VVVV.PinTypes[this.typeName].increaseSize(this,b),this.data.values[b]=a,b>this.data.sliceCount-1&&(this.data.sliceCount=b+1),this.primitive&&this.data.values[b]==a||this.markPinAsChanged());this.node.isIOBox&&("Descriptive Name"==this.pinname&&this.node.invisiblePins["Descriptive Name"])&&(this.node.parentPatch.domInterface?
this.node.parentPatch.domInterface.connect(this.node):this.node.parentPatch.parentPatch&&this.node.registerInterfacePin())};this.markPinAsChanged=function(){this.data.changed=!0};this.pinIsChanged=function(){return this.data.changed};this.connect=function(b){this.data=b.data;if(this.direction==VVVV.PinDirection.Output){b=this.links.length;for(var a=0;a<b;a++)this.links[a].toPin.data=this.data}this.slavePin&&(this.slavePin.data=this.data);this.markPinAsChanged()};this.disconnect=function(){this.data=
"V"==this.typeName[0]?{values:new Float64Array(this.data.values),changed:!0,sliceCount:this.data.sliceCount}:{values:this.data.values.slice(0),changed:!0,sliceCount:this.data.sliceCount}};this.isConnected=function(){return 0<this.links.length||this.masterPin&&this.masterPin.isConnected()};this.getSliceCount=function(){return this.data.sliceCount};this.setSliceCount=function(b){this.data.sliceCount!=b&&(this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.data.sliceCount=b),this.markPinAsChanged())};
this.setType=function(b){if(b.typeName!=this.typeName){var a=this;delete this.connectionChangedHandlers.nodepin;delete this.connectionChangedHandlers.webglresource;_(b.connectionChangedHandlers).each(function(h,d){a.connectionChangedHandlers[d]=b.connectionChangedHandlers[d]});this.typeName=b.typeName;this.defaultValue=b.defaultValue;this.direction==VVVV.PinDirection.Input&&(this.defaultValue&&!this.isConnected())&&(this.setValue(0,this.defaultValue()),this.setSliceCount(1));if("Value"==b.typeName){var h=
this.getSliceCount();this.data.values=new Float64Array(_(this.data.values).map(function(a){return parseFloat(a)}));this.setSliceCount(h)}void 0!=b.reset_on_disconnect&&(this.reset_on_disconnect=b.reset_on_disconnect)}};void 0==d&&(d=VVVV.PinTypes.Generic,this.unvalidated=!0);this.setType(d);if(f&&0<f.length)for(e=f.length;e--;)this.setValue(e,f[e]);this.reset=function(){this.data.values=[];this.slavePin&&(this.slavePin.data=this.data);this.defaultValue?(this.setValue(0,this.defaultValue()),this.setSliceCount(1)):
this.data={values:f.slice(0),changed:!0,sliceCount:f.length};this.markPinAsChanged()};this.connectionChanged=function(){var b=this;_(this.connectionChangedHandlers).each(function(a){b.f=a;b.f()})}},Node:function(e,g,f){this.nodename=g;this.id=e;this.height=this.width=this.y=this.x=0;this.isShader=this.isIOBox=!1;this.resourcesPending=0;this.auto_nil=!0;this.setupObject=function(){this.inputPins={};this.outputPins={};this.invisiblePins={};this.defaultPinValues={}};this.setupObject();this.delays_output=
this.auto_evaluate=!1;this.dirty=!0;(this.parentPatch=f)&&(this.parentPatch.nodeMap[e]=this);this.addDefault=function(c,d){this.defaultPinValues[c]=d};this.addInputPin=function(c,d,b){b=b||VVVV.PinTypes.Generic;d=new VVVV.Core.Pin(c,VVVV.PinDirection.Input,d,this,b);this.inputPins[c]=d;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_in_"+c]=d);this.applyPinValuesFromXML(c);return d};this.addOutputPin=function(c,d,b){b=b||VVVV.PinTypes.Generic;d=new VVVV.Core.Pin(c,VVVV.PinDirection.Output,d,
this,b);this.outputPins[c]=d;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_out_"+c]=d);return d};this.removeInputPin=function(c){if(this.inputPins[c]){var d=this.inputPins[c].links[0];d&&(d.fromPin.connectionChanged(),d.destroy());delete this.inputPins[c];this.dirty=!0}};this.removeOutputPin=function(c){if(this.outputPins[c]){for(var d=this.outputPins[c].links.length,b=0;b<d;b++){var a=this.outputPins[c].links[b];a.toPin.connectionChanged();a.destroy()}delete this.outputPins[c];this.dirty=
!0}};this.addInvisiblePin=function(c,d,b){b=b||VVVV.PinTypes.Generic;d=new VVVV.Core.Pin(c,VVVV.PinDirection.Configuration,d,this,b);this.invisiblePins[c]=d;this.parentPatch.pinMap[this.id+"_inv_"+c]=d;void 0!=this.defaultPinValues[c]&&(d.data.values=this.defaultPinValues[c],d.data.changed=!0);return d};this.IOBoxType=function(){var c=/^IOBox \((.*)\)/.exec(this.nodename);return c&&1<c.length?c[1]:""};this.IOBoxInputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.inputPins["Y Input Value"];
case "String":return this.inputPins["Input String"];case "Color":return this.inputPins["Color Input"];case "Node":return this.inputPins["Input Node"]}};this.IOBoxOutputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.outputPins["Y Output Value"];case "String":return this.outputPins["Output String"];case "Color":return this.outputPins["Color Output"];case "Node":return this.outputPins["Output Node"]}};this.IOBoxRows=function(){return this.invisiblePins.Rows?this.invisiblePins.Rows.getValue(0):
1};this.isComment=function(){return this.isIOBox&&0==_(this.outputPins).size()};this.label=function(){if(this.isIOBox)return this.IOBoxInputPin().getValue(0)?this.IOBoxInputPin().getValue(0).toString():"";if(this.isSubpatch)return"||"+this.nodename.match(/([^\/]+)\.v4p$/)[1];var c=this.nodename.replace(/\s\(.+\)/,"");return c=VVVV.Helpers.translateOperators(c)};this.getWidth=function(){var c;c=100==this.width||0==this.width?this.isIOBox?60:Math.max(18,6*(this.label().length+2)):this.width/15;return c=
Math.max(c,12*(_(this.inputPins).size()-1)+4)};this.getHeight=function(){return this.isIOBox&&100==this.height?18*this.IOBoxRows():100==this.height||this.isSubpatch?18:Math.max(18,this.height/15)};this.getUpstreamNodes=function(){var c=[];_(this.inputPins).each(function(d){0<d.links.length&&c.push(d.links[0].fromPin.node)});return c};this.getDownstreamNodes=function(){var c=[];_(this.outputPins).each(function(d){for(var b=0;b<d.links.length;b++)c.push(d.links[b].toPin.node)});return c};this.findDownstreamNodes=
function(c){var d=[];_(this.outputPins).each(function(b){for(var a=0;a<b.links.length;a++)b.links[a].toPin.node.nodename==c?d.push(b.links[a].toPin.node):d=b.links[a].toPin.slavePin?d.concat(b.links[a].toPin.slavePin.node.findDownstreamNodes(c)):b.links[a].toPin.node.isIOBox&&b.links[a].toPin.node.IOBoxOutputPin().slavePin?d.concat(b.links[a].toPin.node.IOBoxOutputPin().slavePin.node.findDownstreamNodes(c)):d.concat(b.links[a].toPin.node.findDownstreamNodes(c))});return d};this.hasNilInputs=function(){var c=
!1;_(this.inputPins).each(function(d){0==d.getSliceCount()&&(c=!0)});return c};this.isDirty=function(){if(this.dirty)return!0;for(var c in this.inputPins)if(this.inputPins[c].data.changed)return!0;for(c in this.invisiblePins)if(this.invisiblePins[c].data.changed)return!0;return!1};this.getMaxInputSliceCount=function(){var c=0,d;for(d in this.inputPins)this.inputPins[d].getSliceCount()>c&&(c=this.inputPins[d].data.sliceCount);return c};this.applyPinValuesFromXML=function(c){if(this.inputPins[c]){var d=
this.inputPins[c];c=this.defaultPinValues[c];if(void 0!=c&&(!d.reset_on_disconnect||1<c.length||""!=c[0])){for(var b=0;b<c.length;b++)d.data.values[b]!=c[b]&&("Color"==d.typeName?d.setValue(b,new VVVV.Types.Color(c[b])):"Value"==d.typeName?d.setValue(b,parseFloat(c[b])):d.setValue(b,c[b]));d.setSliceCount(c.length)}}};this.registerInterfacePin=function(){var c=this;if(this.isIOBox&&this.parentPatch.parentPatch&&""!=this.invisiblePins["Descriptive Name"].getValue(0)){var d=this.invisiblePins["Descriptive Name"].getValue(0);
this.IOBoxInputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.masterPin){"development"==VVVV_ENV&&console.log("deleting "+d+" input pin because node has input connection...");for(var b=0;b<this.masterPin.links.length;b++)this.masterPin.links[b].destroy();this.disconnect();c.parentPatch.removeInputPin(d);this.masterPin=void 0}0==c.IOBoxOutputPin().links.length&&(c.IOBoxOutputPin().slavePin?c.IOBoxOutputPin().slavePin.pinname!=d&&("development"==VVVV_ENV&&console.log("renaming "+
c.IOBoxOutputPin().slavePin.pinname+" to "+d),c.parentPatch.outputPins[d]=c.parentPatch.outputPins[c.IOBoxOutputPin().slavePin.pinname],c.parentPatch.removeOutputPin(c.IOBoxOutputPin().slavePin.pinname),c.IOBoxOutputPin().slavePin.pinname=d):("development"==VVVV_ENV&&console.log("interfacing output pin detected: "+d),b=c.parentPatch.outputPins[d],void 0==b&&(b=c.parentPatch.addOutputPin(d,c.IOBoxOutputPin().data.values)),b.setType(VVVV.PinTypes[c.IOBoxOutputPin().typeName]),c.IOBoxOutputPin().slavePin=
b,b.masterPin=c.IOBoxOutputPin(),b.connect(c.IOBoxOutputPin())));this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxInputPin().connectionChanged();this.IOBoxOutputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.slavePin){"development"==VVVV_ENV&&console.log("deleting "+d+" output pin because node "+c.id+" has output connection...");for(var b=0;b<this.slavePin.links.length;b++)this.slavePin.links[b].destroy();this.slavePin.disconnect();c.parentPatch.removeOutputPin(d);
this.slavePin=void 0}if(0==c.IOBoxInputPin().links.length)if(c.IOBoxInputPin().masterPin)c.IOBoxInputPin().masterPin.pinname!=d&&(console.log("renaming "+c.IOBoxInputPin().masterPin.pinname+" to "+d),c.parentPatch.inputPins[d]=c.parentPatch.inputPins[c.IOBoxInputPin().masterPin.pinname],c.parentPatch.removeInputPin(c.IOBoxInputPin().masterPin.pinname),c.IOBoxInputPin().masterPin.pinname=d);else{"development"==VVVV_ENV&&console.log("interfacing input pin detected: "+d);b=c.parentPatch.inputPins[d];
void 0==b&&("development"==VVVV_ENV&&console.log("creating new input pin at parent patch, using IOBox values"),b=c.parentPatch.addInputPin(d,c.IOBoxInputPin().data.values));var a=VVVV.PinTypes[c.IOBoxInputPin().typeName].cloneValues(b);b.setType(VVVV.PinTypes[c.IOBoxInputPin().typeName]);b.unvalidated&&VVVV.PinTypes[b.typeName].primitive&&!b.isConnected()&&(b.data.values=a,b.data.changed=!0);b.unvalidated=!1;b.slavePin=c.IOBoxInputPin();c.IOBoxInputPin().masterPin=b;c.IOBoxInputPin().connect(b)}this.node.parentPatch.parentPatch.afterUpdate()};
this.IOBoxOutputPin().connectionChanged()}};this.setup=function(){this.addInvisiblePin("Descriptive Name",[""],VVVV.PinTypes.String)};this.initialize=function(){};this.evaluate=function(){_(this.outputPins).each(function(c){c.setValue(0,"not calculated")})};this.destroy=function(){this.isIOBox&&(this.IOBoxInputPin().masterPin&&(this.parentPatch.removeInputPin(this.IOBoxInputPin().masterPin.pinname),this.parentPatch.parentPatch.afterUpdate()),this.IOBoxOutputPin().slavePin&&(this.parentPatch.removeOutputPin(this.IOBoxOutputPin().slavePin.pinname),
this.parentPatch.parentPatch.afterUpdate()))};this.serialize=function(){var c=k("<NODE>");c.attr("id",this.id);c.attr("nodename",this.nodename);c.attr("systemname",this.nodename);this.shaderFile&&c.attr("filename",this.shaderFile.replace(".vvvvjs.fx",".fx").replace("%VVVV%/effects","%VVVV%/lib/nodes/effects"));this.isSubpatch&&(c.attr("filename",this.nodename),c.attr("systemname",this.nodename.match("(.*).v4p$")[1]));this.isIOBox?c.attr("componentmode","InABox"):c.attr("componentmode","Hidden");var d=
k("<BOUNDS>");this.isIOBox?d.attr("type","Box"):d.attr("type","Node");d.attr("left",parseInt(15*this.x));d.attr("top",parseInt(15*this.y));d.attr("width",parseInt(this.width));d.attr("height",parseInt(this.height));c.append(d);var b=this;_(this.inputPins).each(function(a){var h=k("<PIN>");h.attr("pinname",a.pinname);h.attr("visible","1");(!a.isConnected()||a.masterPin)&&(VVVV.PinTypes[a.typeName].primitive&&b.defaultPinValues[a.pinname])&&h.attr("values",_(b.defaultPinValues[a.pinname]).map(function(a){return"|"+
a.toString().replace(/\|/g,"||")+"|"}).join(","));c.append(h)});_(this.invisiblePins).each(function(a){var b=k("<PIN>");b.attr("pinname",a.pinname);b.attr("visible","0");VVVV.PinTypes[a.typeName].primitive&&b.attr("values",_(a.data.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));c.append(b)});return c}},Link:function(e,g){this.fromPin=e;this.toPin=g;this.fromPin.links.push(this);this.toPin.links.push(this);this.destroy=function(){this.fromPin.links.splice(this.fromPin.links.indexOf(this),
1);this.toPin.links.splice(this.toPin.links.indexOf(this),1);this.fromPin.node.parentPatch.linkList.splice(this.fromPin.node.parentPatch.linkList.indexOf(this),1);this.toPin.disconnect();if(this.toPin.reset_on_disconnect)this.toPin.reset();else{this.toPin.node.defaultPinValues[this.toPin.pinname]=[];for(var f=this.toPin.getSliceCount();f--;)this.toPin.node.defaultPinValues[this.toPin.pinname][f]=this.toPin.data.values[f]}};this.serialize=function(){var f=k("<LONK>");f.attr("srcnodeid",this.fromPin.node.id);
f.attr("srcpinname",this.fromPin.pinname);f.attr("dstnodeid",this.toPin.node.id);f.attr("dstpinname",this.toPin.pinname);return f}},Patch:function(e,g,f,c,d){function b(a){if(void 0==a)return[];if("45_26">=this.vvvv_version)return separator=/\|/.test(a)?"|":",",a.split(separator).filter(function(a,b){return""!=a});for(var b=[],h="",d=!1,m=a.length,c=0;c<m;c++)","!=a[c]||d?"|"==a[c]?"|"!=a[c+1]||c+1==a.length-1?d=!d:h+=a[++c]:h+=a[c]:(b.push(h),h="");b.push(h);return b}function a(){var a=window.location.hash.match("#([^/]+)/"+
n.ressource+"$");a&&(console.log("launching editor ..."),(new VVVV.Editors[a[1]]).enable(n))}this.ressource=e;this.vvvv_version="45_26.1";this.boundingBox={width:0,height:0};this.windowHeight=this.windowWidth=500;this.pinMap={};this.nodeMap={};this.nodeList=[];this.linkList=[];this.pinList=[];this.evaluationRecipe=[];this.mainloop=void 0;this.success=g;this.error=f;this.editor=void 0;this.setupObject();c&&(this.parentPatch=c);d&&(this.id=d);var h=!1;this.getAbsolutePath=function(){var a=this.getRelativePath();
this.parentPatch&&(a=this.parentPatch.getAbsolutePath()+a);return a};this.getRelativePath=function(){return this.nodename.match(/(.*\/)?[^/]+\.v4p/)[1]||""};this.destroy=function(){for(var a=0;a<this.nodeList.length;a++)this.nodeList[a].destroy(),delete this.nodeMap[this.nodeList[a].id],delete this.nodeList[a]};if("45_26">=this.vvvv_version)var m={},r={},q={},p={};var n=this;this.doLoad=function(a,h){function d(a){"complete"==f&&(r={});k(a).find('link[deleteme="pronto"]').each(function(){for(var a=
!1,b=0;b<n.linkList.length;b++)n.linkList[b].fromPin.node.id==k(this).attr("srcnodeid")&&(n.linkList[b].fromPin.pinname==k(this).attr("srcpinname")&&n.linkList[b].toPin.node.id==k(this).attr("dstnodeid")&&n.linkList[b].toPin.pinname==k(this).attr("dstpinname"))&&(a=n.linkList[b]);if(a){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var b=a.fromPin,h=a.toPin;a.destroy();b.connectionChanged();h.connectionChanged();h.markPinAsChanged()}});k(a).find('link[deleteme!="pronto"]').each(function(){var a=
n.pinMap[k(this).attr("srcnodeid")+"_out_"+k(this).attr("srcpinname")],b=n.pinMap[k(this).attr("dstnodeid")+"_in_"+k(this).attr("dstpinname")];void 0==a&&n.nodeMap[k(this).attr("srcnodeid")]&&(a=n.nodeMap[k(this).attr("srcnodeid")].addOutputPin(k(this).attr("srcpinname"),void 0));void 0==b&&n.nodeMap[k(this).attr("dstnodeid")]&&(b=n.nodeMap[k(this).attr("dstnodeid")].addInputPin(k(this).attr("dstpinname"),void 0));if(a&&b){for(var h=!1,d=0;d<n.linkList.length;d++)n.linkList[d].fromPin.node.id==a.node.id&&
(n.linkList[d].fromPin.pinname==a.pinname&&n.linkList[d].toPin.node.id==b.node.id&&n.linkList[d].toPin.pinname==b.pinname)&&(h=n.linkList[d]);h||(h=new VVVV.Core.Link(a,b),a.connectionChanged(),b.connectionChanged(),n.linkList.push(h),b.connect(a));"complete"==f&&(r[a.node.id+"_"+a.pinname+"-"+b.node.id+"_"+b.pinname]=h)}});"complete"==f&&(_(m).each(function(a,b){if(void 0==r[b]){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var h=a.fromPin,d=a.toPin;a.destroy();
h.connectionChanged();d.connectionChanged();d.markPinAsChanged();d.reset_on_disconnect&&d.reset()}}),m={},_(r).each(function(a,b){m[b]=a}))}var c=this;do c.dirty=!0;while(c=c.parentPatch);if(c=/^<!DOCTYPE\s+PATCH\s+SYSTEM\s+"(.+)\\(.+)\.dtd/.exec(a))n.vvvv_version=c[2].replace(/[a-zA-Z]+/,"_");var f="diff";if(/\s<PATCH/.test(a)||"45_26">=n.vvvv_version)f="complete","development"==VVVV_ENV&&console.log("complete: "+this.nodename);c=k(a).find('bounds[type="Window"]').first();0<c.length&&(n.windowWidth=
c.attr("width")/15,n.windowHeight=c.attr("height")/15);"complete"==f&&(p={});k(a).find("node").each(function(){if("pronto"==k(this).attr("createme")&&void 0!=n.nodeMap[k(this).attr("id")]){var c=n.nodeMap[k(this).attr("id")];"development"==VVVV_ENV&&console.log("node renamed, so deleting node "+c.id+" / "+c.nodename);_(c.inputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.fromPin.connectionChanged()})});_(c.outputPins).each(function(a){_(a.links).each(function(a){a.destroy();a.toPin.connectionChanged();
a.toPin.markPinAsChanged()})});n.nodeList.splice(n.nodeList.indexOf(c),1);delete n.nodeMap[c.id]}var m;m="InABox"==k(this).attr("componentmode")?k(this).find('bounds[type="Box"]').first():k(this).find('bounds[type="Node"]').first();var r=void 0!=n.nodeMap[k(this).attr("id")];if(r)c=n.nodeMap[k(this).attr("id")];else{var q=""!=k(this).attr("systemname")?k(this).attr("systemname"):k(this).attr("nodename");if(void 0==q)return;if(void 0!=VVVV.NodeLibrary[q.toLowerCase()])c=new (VVVV.NodeLibrary[q.toLowerCase()])(k(this).attr("id"),
n),VVVV.NodeLibrary[q.toLowerCase()].requirements&&(n.resourcesPending++,_(VVVV.NodeLibrary[q.toLowerCase()].requirements).each(function(a){void 0===VVVV.LoadedLibs[a]&&VVVV.loadScript(VVVV.ThirdPartyLibs[a],function(){n.resourcesPending--;VVVV.LoadedLibs[a]=VVVV.ThirdPartyLibs[a]})}));else if(/.fx$/.test(k(this).attr("filename")))c=new VVVV.Nodes.GenericShader(k(this).attr("id"),n),c.isShader=!0,c.shaderFile=k(this).attr("filename").replace(/\\/g,"/").replace(/\.fx$/,".vvvvjs.fx").replace("lib/nodes/",
""),c.nodename=q;else if(/.v4p$/.test(k(this).attr("filename"))){n.resourcesPending++;var l=this,c=new VVVV.Core.Patch(k(this).attr("filename"),function(){n.resourcesPending--;"development"==VVVV_ENV&&console.log(this.nodename+"invoking update links");d(a);n.editor&&n.editor.addPatch(this);if(this.auto_evaluate){var b=n;do b.auto_evaluate=!0;while(b=b.parentPatch)}this.setMainloop(n.mainloop);n.afterUpdate();n.updateEvaluationRecipe();0>=n.resourcesPending&&h&&(h(),h=void 0)},function(){n.resourcesPending--;
this.not_implemented=!0;VVVV.onNotImplemented(q);d(a);n.afterUpdate();n.updateEvaluationRecipe();0>=n.resourcesPending&&h&&(h(),h=void 0)},n,k(l).attr("id"));c.isSubpatch=!0;n.editor&&!c.editor&&n.editor.addPatch(c);n.nodeMap[c.id]=c}else c=new VVVV.Core.Node(k(this).attr("id"),q,n),c.not_implemented=!0,"diff"==f&&!0==VVVV.Config.auto_undo&&n.editor.sendUndo(),VVVV.onNotImplemented(q);"development"==VVVV_ENV&&"complete"!=f&&console.log(n.nodename+": inserted new node "+c.nodename)}if(c.auto_evaluate){l=
n;do l.auto_evaluate=!0;while(l=l.parentPatch)}if("pronto"==k(this).attr("deleteme")){"development"==VVVV_ENV&&console.log("removing node "+c.id);if(c.isSubpatch){c.editor&&c.editor.removePatch(c);l=c.getSubPatches();l.push(c);for(var g,e=0;e<l.length;e++)g=VVVV.Helpers.prepareFilePath(l[e].nodename,l[e].parentPatch),VVVV.Patches[g].splice(VVVV.Patches[g].indexOf(c),1),0==VVVV.Patches[g].length&&delete VVVV.Patches[g]}n.nodeList.splice(n.nodeList.indexOf(c),1);c.destroy();delete n.nodeMap[c.id]}0<
m.length&&(m.attr("left")&&(c.x=m.attr("left")/15,c.y=m.attr("top")/15,n.boundingBox.width=Math.max(n.boundingBox.width,c.x+100),n.boundingBox.height=Math.max(n.boundingBox.height,c.y+100)),m.attr("width")&&(c.width=m.attr("width"),c.height=m.attr("height")));/^iobox/.test(c.nodename.toLowerCase())&&(c.isIOBox=!0);r||c.setup();l=this;k(this).find("pin").each(function(){var h=k(this).attr("pinname"),d=b(k(this).attr("values"));void 0!=d&&0<d.length&&c.addDefault(h,d);if(void 0==c.outputPins[h])if(void 0!=
c.inputPins[h])c.inputPins[h].isConnected()||c.applyPinValuesFromXML(h);else if(void 0!=c.invisiblePins[h]){if(void 0!=d){for(var m=0;m<d.length;m++)c.invisiblePins[h].data.values[m]!=d[m]&&c.invisiblePins[h].setValue(m,d[m]);c.invisiblePins[h].setSliceCount(d.length)}}else 1==k(this).attr("visible")&&"Configuration"!=k(this).attr("pintype")||c.isSubpatch?"Output"==k(this).attr("pintype")||0<k(a).find("link[srcnodeid="+c.id+"]").filter("link[srcpinname='"+h.replace(/[\[\]]/,"")+"']").length?void 0==
c.outputPins[h]&&c.addOutputPin(h,d):void 0==c.inputPins[h]&&void 0==c.invisiblePins[h]&&c.addInputPin(h,d):void 0==c.inputPins[h]&&void 0==c.invisiblePins[h]&&c.addInvisiblePin(h,d)});r||(c.initialize(),n.nodeList.push(c));"complete"==f&&(p[c.id]=c)});"complete"==f&&(_(q).each(function(a,b){void 0==p[b]&&("development"==VVVV_ENV&&console.log("removing node "+a.id),n.nodeList.splice(n.nodeList.indexOf(a),1),delete n.nodeMap[a.id])}),q={},_(p).each(function(a,b){q[b]=a}));0===this.resourcesPending&&
d(a);this.updateEvaluationRecipe();0>=this.resourcesPending&&h&&(h(),h=void 0)};this.getSubPatches=function(){for(var a=[],b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&(a.push(this.nodeList[b]),a=a.concat(this.nodeList[b].getSubPatches()));return a};this.setMainloop=function(a){this.mainloop=a;for(var b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&this.nodeList[b].setMainloop(a)};this.afterEvaluate=function(){};this.afterUpdate=function(){};this.toXML=function(){var a=
k("<PATCH>"),b=k("<BOUNDS>");b.attr("type","Window");b.attr("width",parseInt(15*this.windowWidth));b.attr("height",parseInt(15*this.windowHeight));a.append(b);for(b=0;b<this.nodeList.length;b++)a.append(this.nodeList[b].serialize());for(b=0;b<this.linkList.length;b++)a.append(this.linkList[b].serialize());a='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n  '+a.wrapAll("<d></d>").parent().html();a=a.replace(/<patch/g,"<PATCH");a=a.replace(/<\/patch>/g,"\n  </PATCH>");a=
a.replace(/<node/g,"\n  <NODE");a=a.replace(/<\/node>/g,"\n  </NODE>");a=a.replace(/<bounds/g,"\n  <BOUNDS");a=a.replace(/<\/bounds>/g,"\n  </BOUNDS>");a=a.replace(/<pin/g,"\n  <PIN");a=a.replace(/<\/pin>/g,"\n  </PIN>");a=a.replace(/<lonk/g,"\n  <LINK");return a=a.replace(/<\/lonk>/g,"\n  </LINK>")};this.updateEvaluationRecipe=function(){function a(f){if(0>h.indexOf(f.id)){h.push(f.id);var r=f.getUpstreamNodes(),q=!1;_(r).each(function(h){void 0==b[h.id]&&(q=q||a(h))});h.pop()}q&&f.delays_output&&
d.push(f);if(!q&&0>h.indexOf(f.id)||f.delays_output){c.push(f);for(var p in f.inputPins)0==f.inputPins[p].links.length&&m.push(f.inputPins[p]);for(p in f.invisiblePins)m.push(f.invisiblePins[p]);for(p in f.outputPins)m.push(f.outputPins[p]);b[f.id]=f;return!1}return!0}this.evaluationRecipe=[];this.pinList=[];for(var b={},h=[],d=[],c=this.evaluationRecipe,m=this.pinList,f=0;f<this.nodeList.length;f++)(0==this.nodeList[f].getDownstreamNodes().length||this.nodeList[f].auto_evaluate||this.nodeList[f].delays_output)&&
void 0==b[this.nodeList[f].id]&&a(this.nodeList[f]);for(f=0;f<d.length;f++)a(d[f])};this.evaluate=function(){if(!(0<this.resourcesPending)){if(h)var a={},b=(new Date).getTime(),d=0;for(var c,m=0;m<this.evaluationRecipe.length;m++){var f=this.evaluationRecipe[m];h&&console.log(f.nodename);if(f.isDirty()||f.auto_evaluate||f.isSubpatch){h&&(b=(new Date).getTime());if(f.auto_nil&&!f.isSubpatch&&f.hasNilInputs())for(c in f.outputPins)f.outputPins[c].setSliceCount(0);else f.evaluate(),f.dirty=!1;h&&(a[f.nodename]||
(a[f.nodename]={count:0,dt:0}),d=(new Date).getTime()-b,a[f.nodename].count++,a[f.nodename].dt+=d,console.log(f.nodename+" / "+f.id+": "+d+"ms"))}}h&&(_(a).each(function(a,b){console.log(a.count+"x "+b+": "+a.dt+"ms")}),b=(new Date).getTime());this.afterEvaluate();h&&console.log("patch rendering: "+((new Date).getTime()-b)+"ms");h=!1}};this.clearChangedFlags=function(){for(var a=this.pinList.length;a--;)this.pinList[a].data.changed=!1};k(window).keydown(function(a){84==a.which&&(a.altKey&&a.ctrlKey)&&
(h=!0)});if(/\.v4p[^<>\s]*$/.test(e)){this.nodename=e;var l=this,u=e;this.parentPatch&&(u=VVVV.Helpers.prepareFilePath(e,this.parentPatch));VVVV.Patches[u]?l.doLoad(VVVV.Patches[u][0].toXML(),function(){VVVV.Patches[u].push(l);l.success&&l.success();l.afterUpdate()}):k.ajax({url:u,type:"get",dataType:"text",success:function(a){l.doLoad(a,function(){VVVV.Patches[u]=VVVV.Patches[u]||[];VVVV.Patches[u].push(l);l.success&&l.success();l.afterUpdate()})},error:function(){l.error&&l.error()}})}else this.doLoad(e,
function(){this.success&&this.success()});a();k(window).bind("hashchange",function(){a()})}};VVVV.Core.Patch.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.MousePositions={_all:{x:[0],y:[0],wheel:[0],lb:[0],mb:[0],rb:[0]}};VVVV.PinDirection={Input:0,Output:1,Configuration:2};VVVV.PinTypes.Generic={typeName:"Generic",reset_on_disconnect:!0,defaultValue:function(){return"0"}};VVVV.PinTypes.Value={typeName:"Value",reset_on_disconnect:!1,defaultValue:function(){return 0},primitive:!0};VVVV.PinTypes.String={typeName:"String",reset_on_disconnect:!1,defaultValue:function(){return""},primitive:!0};VVVV.PinTypes.Enum={typeName:"Enum",reset_on_disconnect:!1,
defaultValue:function(){return""},primitive:!0};VVVV.Helpers={translateOperators:function(e){e=e.replace("Add","+");e=e.replace("Subtract","-");e=e.replace("Multiply","*");e=e.replace("Divide","/");e=e.replace("EQ","=");e=e.replace("GT",">");e=e.replace("GTE",">=");e=e.replace("LT","<");return e=e.replace("LTE","<=")},prepareFilePath:function(e,g){e=e.replace(/\\/g,"/");return e.match(/^%VVVV%/)?e.replace("%VVVV%",VVVV.Root):e.match(/^%PAGE%/)?e.replace("%PAGE%",location.pathname):e.match(/^(\/|.+:\/\/)/)?
e:g?g.getAbsolutePath()+e:e},dynamicPins:function(e,g,f,c){for(var d=g.length;d<f;d++)g[d]=c.call(e,d);for(d=f;d<g.length;d++)e.removeInputPin(g[d].pinname);g.length=f;e.parentPatch.afterUpdate()}};VVVV.Core={Pin:function(e,g,f,c,d){this.direction=g;this.pinname=e;this.links=[];this.values=[];this.values.changedAt=0;this.node=c;this.reset_on_disconnect=this.active=!1;this.masterPin=this.slavePin=void 0;this.connectionChangedHandlers={};this.enumOptions=[];this.getValue=function(b,a){if(!a||1==a)return this.values[b%
this.values.length];for(var h=[],d=0;d<a;d++)h.push(this.values[(b*a+d)%this.values.length]);return h};this.setValue=function(b,a){this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.typeName&&VVVV.PinTypes[this.typeName].primitive&&this.values[b]==a||this.markPinAsChanged(),this.values[b]=a);this.node.isIOBox&&("Descriptive Name"==this.pinname&&this.node.invisiblePins["Descriptive Name"])&&(this.node.parentPatch.domInterface?this.node.parentPatch.domInterface.connect(this.node):this.node.parentPatch.parentPatch&&
this.node.registerInterfacePin())};this.markPinAsChanged=function(){this.node.parentPatch.mainloop&&(this.values.changedAt=this.node.parentPatch.mainloop.frameNum)};this.pinIsChanged=function(){return this.node.parentPatch.mainloop?this.values.changedAt==this.node.parentPatch.mainloop.frameNum:!0};this.connect=function(b){this.values=b.values;if(this.direction==VVVV.PinDirection.Output){b=this.links.length;for(var a=0;a<b;a++)this.links[a].toPin.values=this.values}this.slavePin&&(this.slavePin.values=
this.values);this.markPinAsChanged()};this.disconnect=function(){if("Color"==this.typeName){for(var b=[],a=0;a<this.values.length;a++)b[a]=new VVVV.Types.Color("0,0,0,0"),this.values[a].copy_to(b[a]);this.values=b}else this.values=this.values.slice(0);this.slavePin&&(this.slavePin.values=this.values);this.markPinAsChanged()};this.isConnected=function(){return 0<this.links.length||this.masterPin&&this.masterPin.isConnected()||this.slavePin&&0<this.slavePin.links.length};this.getSliceCount=function(){return this.values.length};
this.setSliceCount=function(b){0>b&&(b=0);this.values.length!=b&&(this.direction!=VVVV.PinDirection.Output&&this.isConnected()||(this.values.length=b),this.markPinAsChanged())};this.setType=function(b){if(b.typeName!=this.typeName){var a=this;delete this.connectionChangedHandlers.webglresource;_(b.connectionChangedHandlers).each(function(h,d){a.connectionChangedHandlers[d]=b.connectionChangedHandlers[d]});this.typeName=b.typeName;this.defaultValue=b.defaultValue;this.direction==VVVV.PinDirection.Input&&
(this.defaultValue&&!this.isConnected())&&(this.setValue(0,this.defaultValue()),this.setSliceCount(1));void 0!=b.reset_on_disconnect&&(this.reset_on_disconnect=b.reset_on_disconnect)}};void 0==d&&(d=VVVV.PinTypes.Generic);d==VVVV.PinTypes.Generic&&(this.unvalidated=!0);this.setType(d);if(f&&0<f.length)for(e=f.length;e--;)this.setValue(e,f[e]);this.reset=function(){this.values=[];this.slavePin&&(this.slavePin.values=this.values);this.defaultValue?(this.setValue(0,this.defaultValue()),this.setSliceCount(1)):
(this.values=f.slice(0),this.markPinAsChanged());this.markPinAsChanged()};this.connectionChanged=function(){var b=this;_(this.connectionChangedHandlers).each(function(a){a.call(b)})};this.generateStaticCode=function(b){for(var a="",h="if (",d="if (",c=0;c<this.values.incomingPins.length;c++)var f=this.values.incomingPins[c],h=h+("patch.nodeMap["+f.node.id+"].inputPins['"+f.pinname+"'].pinIsChanged() || "),d=d+("patch.nodeMap["+f.node.id+"].inputPins['"+f.pinname+"'].values[0]==undefined || "),a="Math.max(patch.nodeMap["+
f.node.id+"].inputPins['"+f.pinname+"'].getSliceCount(), "+a;d+="false) { patch.nodeMap["+this.node.id+"].outputPins['Output'].setSliceCount(0); }\n else {";a+="0)";for(c=0;c<this.values.incomingPins.length-1;c++)a+=")";b&&(d+=h+"false) {\n");d=d+"  var iii = "+(a+";\n");d+="  patch.nodeMap["+this.node.id+"].outputPins['Output'].setSliceCount(iii);";d+="  while (iii--) {\n";d+="    patch.nodeMap["+this.node.id+"].outputPins['Output'].setValue(iii, "+this.values.code+");\n";d+="  }\n";b&&(d+="}\n");
return d+="}\n"}},Node:function(e,g,f){this.nodename=g;this.id=e;this.height=this.width=this.y=this.x=0;this.isShader=this.isIOBox=!1;this.resourcesPending=0;this.auto_nil=!0;this.setupObject=function(){this.inputPins={};this.outputPins={};this.invisiblePins={};this.defaultPinValues={}};this.setupObject();this.delays_output=this.auto_evaluate=!1;this.dirty=!0;(this.parentPatch=f)&&(this.parentPatch.nodeMap[e]=this);this.addDefault=function(c,d){this.defaultPinValues[c]=d};this.addInputPin=function(c,
d,b){b=b||VVVV.PinTypes.Generic;d=new VVVV.Core.Pin(c,VVVV.PinDirection.Input,d,this,b);this.inputPins[c]=d;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_in_"+c]=d);this.applyPinValuesFromXML(c);return d};this.addOutputPin=function(c,d,b){b=b||VVVV.PinTypes.Generic;d=new VVVV.Core.Pin(c,VVVV.PinDirection.Output,d,this,b);this.outputPins[c]=d;this.parentPatch&&(this.parentPatch.pinMap[this.id+"_out_"+c]=d);return d};this.removeInputPin=function(c){if(this.inputPins[c]){var d=this.inputPins[c].links[0];
d&&(d.fromPin.connectionChanged(),d.destroy());delete this.inputPins[c];this.dirty=!0}};this.removeOutputPin=function(c){if(this.outputPins[c]){for(var d=this.outputPins[c].links.length,b=0;b<d;b++){var a=this.outputPins[c].links[b];a.toPin.connectionChanged();a.destroy()}delete this.outputPins[c];this.dirty=!0}};this.addInvisiblePin=function(c,d,b){b=b||VVVV.PinTypes.Generic;d=new VVVV.Core.Pin(c,VVVV.PinDirection.Configuration,d,this,b);this.invisiblePins[c]=d;this.parentPatch.pinMap[this.id+"_inv_"+
c]=d;void 0!=this.defaultPinValues[c]&&(d.values=this.defaultPinValues[c],d.markPinAsChanged());return d};this.IOBoxType=function(){var c=/^IOBox \((.*)\)/.exec(this.nodename);return c&&1<c.length?c[1]:""};this.IOBoxInputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.inputPins["Y Input Value"];case "String":return this.inputPins["Input String"];case "Color":return this.inputPins["Color Input"];case "Node":return this.inputPins["Input Node"]}};this.IOBoxOutputPin=function(){switch(this.IOBoxType()){case "Value Advanced":return this.outputPins["Y Output Value"];
case "String":return this.outputPins["Output String"];case "Color":return this.outputPins["Color Output"];case "Node":return this.outputPins["Output Node"]}};this.IOBoxRows=function(){return this.invisiblePins.Rows?this.invisiblePins.Rows.getValue(0):1};this.isComment=function(){return this.isIOBox&&0==_(this.outputPins).size()};this.label=function(){if(this.isIOBox)return this.IOBoxInputPin().getValue(0)?this.IOBoxInputPin().getValue(0).toString():"";if(this.isSubpatch)return"||"+this.nodename.match(/([^\/]+)\.v4p$/)[1];
var c=this.nodename.replace(/\s\(.+\)/,"");return c=VVVV.Helpers.translateOperators(c)};this.getWidth=function(){var c;c=100==this.width||0==this.width?this.isIOBox?60:Math.max(18,6*(this.label().length+2)):this.width/15;return c=Math.max(c,12*(_(this.inputPins).size()-1)+4)};this.getHeight=function(){return this.isIOBox&&100==this.height?18*this.IOBoxRows():100==this.height||this.isSubpatch?18:Math.max(18,this.height/15)};this.getUpstreamNodes=function(){var c=[];_(this.inputPins).each(function(d){0<
d.links.length&&c.push(d.links[0].fromPin.node)});return c};this.getDownstreamNodes=function(){var c=[];_(this.outputPins).each(function(d){for(var b=0;b<d.links.length;b++)c.push(d.links[b].toPin.node)});return c};this.findDownstreamNodes=function(c){var d=[];_(this.outputPins).each(function(b){for(var a=0;a<b.links.length;a++)b.links[a].toPin.node.nodename==c?d.push(b.links[a].toPin.node):d=b.links[a].toPin.slavePin?d.concat(b.links[a].toPin.slavePin.node.findDownstreamNodes(c)):b.links[a].toPin.node.isIOBox&&
b.links[a].toPin.node.IOBoxOutputPin().slavePin?d.concat(b.links[a].toPin.node.IOBoxOutputPin().slavePin.node.findDownstreamNodes(c)):d.concat(b.links[a].toPin.node.findDownstreamNodes(c))});return d};this.hasNilInputs=function(){var c=!1;_(this.inputPins).each(function(d){if(0==d.getSliceCount()||void 0==d.values[0])c=!0});return c};this.isDirty=function(){if(this.dirty)return!0;for(var c in this.inputPins)if(this.inputPins[c].pinIsChanged())return!0;for(c in this.invisiblePins)if(this.invisiblePins[c].pinIsChanged())return!0;
return!1};this.getMaxInputSliceCount=function(){var c=0,d;for(d in this.inputPins)this.inputPins[d].getSliceCount()>c&&(c=this.inputPins[d].values.length);return c};this.applyPinValuesFromXML=function(c){if(this.inputPins[c]){var d=this.inputPins[c];c=this.defaultPinValues[c];if(void 0!=c&&(!d.reset_on_disconnect||1<c.length||""!=c[0])){for(var b=0;b<c.length;b++)d.values[b]!=c[b]&&("Color"==d.typeName?d.setValue(b,new VVVV.Types.Color(c[b])):"Value"==d.typeName?d.setValue(b,parseFloat(c[b])):d.setValue(b,
c[b]));d.setSliceCount(c.length)}}};this.registerInterfacePin=function(){var c=this;if(this.isIOBox&&this.parentPatch.parentPatch&&""!=this.invisiblePins["Descriptive Name"].getValue(0)){var d=this.invisiblePins["Descriptive Name"].getValue(0);this.IOBoxInputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.masterPin){"development"==VVVV_ENV&&console.log("deleting "+d+" input pin because node has input connection...");for(var b=0;b<this.masterPin.links.length;b++)this.masterPin.links[b].destroy();
this.disconnect();c.parentPatch.removeInputPin(d);this.masterPin=void 0}0==c.IOBoxOutputPin().links.length&&(c.IOBoxOutputPin().slavePin?c.IOBoxOutputPin().slavePin.pinname!=d&&("development"==VVVV_ENV&&console.log("renaming "+c.IOBoxOutputPin().slavePin.pinname+" to "+d),c.parentPatch.outputPins[d]=c.parentPatch.outputPins[c.IOBoxOutputPin().slavePin.pinname],c.parentPatch.removeOutputPin(c.IOBoxOutputPin().slavePin.pinname),c.IOBoxOutputPin().slavePin.pinname=d):("development"==VVVV_ENV&&console.log("interfacing output pin detected: "+
d),b=c.parentPatch.outputPins[d],void 0==b&&(b=c.parentPatch.addOutputPin(d,c.IOBoxOutputPin().values)),b.setType(VVVV.PinTypes[c.IOBoxOutputPin().typeName]),c.IOBoxOutputPin().slavePin=b,b.masterPin=c.IOBoxOutputPin(),b.connect(c.IOBoxOutputPin())));this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxInputPin().connectionChanged();this.IOBoxOutputPin().connectionChangedHandlers.subpatchpins=function(){if(0<this.links.length&&this.slavePin){"development"==VVVV_ENV&&console.log("deleting "+
d+" output pin because node "+c.id+" has output connection...");for(var b=0;b<this.slavePin.links.length;b++)this.slavePin.links[b].destroy();this.slavePin.disconnect();c.parentPatch.removeOutputPin(d);this.slavePin=void 0}if(0==c.IOBoxInputPin().links.length)if(c.IOBoxInputPin().masterPin)c.IOBoxInputPin().masterPin.pinname!=d&&(console.log("renaming "+c.IOBoxInputPin().masterPin.pinname+" to "+d),c.parentPatch.inputPins[d]=c.parentPatch.inputPins[c.IOBoxInputPin().masterPin.pinname],c.parentPatch.removeInputPin(c.IOBoxInputPin().masterPin.pinname),
c.IOBoxInputPin().masterPin.pinname=d);else{"development"==VVVV_ENV&&console.log("interfacing input pin detected: "+d);var a=c.parentPatch.inputPins[d];void 0==a&&("development"==VVVV_ENV&&console.log("creating new input pin at parent patch, using IOBox values"),a=c.parentPatch.addInputPin(d,c.IOBoxInputPin().values));var h=a.values.slice();a.setType(VVVV.PinTypes[c.IOBoxInputPin().typeName]);if(a.unvalidated&&VVVV.PinTypes[a.typeName].primitive&&!a.isConnected()){if("V"==a.typeName[0])for(b=0;b<
h.length;b++)a.values[b]=parseFloat(h[b]);else a.values=h;a.markPinAsChanged()}a.unvalidated=!1;a.slavePin=c.IOBoxInputPin();c.IOBoxInputPin().masterPin=a;c.IOBoxInputPin().connect(a)}this.node.parentPatch.parentPatch.afterUpdate()};this.IOBoxOutputPin().connectionChanged()}};this.setup=function(){this.addInvisiblePin("Descriptive Name",[""],VVVV.PinTypes.String)};this.initialize=function(){};this.evaluate=function(){_(this.outputPins).each(function(c){c.setValue(0,"not calculated")})};this.dealWithNilInput=
function(){if(this.auto_nil&&!this.isSubpatch&&this.hasNilInputs()){for(pinname in this.outputPins)this.outputPins[pinname].setSliceCount(0);return!0}return!1};this.destroy=function(){this.isIOBox&&(this.IOBoxInputPin().masterPin&&(this.parentPatch.removeInputPin(this.IOBoxInputPin().masterPin.pinname),this.parentPatch.parentPatch.afterUpdate()),this.IOBoxOutputPin().slavePin&&(this.parentPatch.removeOutputPin(this.IOBoxOutputPin().slavePin.pinname),this.parentPatch.parentPatch.afterUpdate()))};this.serialize=
function(){var c=k("<NODE>");c.attr("id",this.id);c.attr("nodename",this.nodename);c.attr("systemname",this.nodename);this.shaderFile&&c.attr("filename",this.shaderFile.replace(".vvvvjs.fx",".fx").replace("%VVVV%/effects","%VVVV%/lib/nodes/effects"));this.isSubpatch&&(c.attr("filename",this.nodename),c.attr("systemname",this.nodename.match("(.*).v4p$")[1]));this.isIOBox?c.attr("componentmode","InABox"):c.attr("componentmode","Hidden");var d=k("<BOUNDS>");this.isIOBox?d.attr("type","Box"):d.attr("type",
"Node");d.attr("left",parseInt(15*this.x));d.attr("top",parseInt(15*this.y));d.attr("width",parseInt(this.width));d.attr("height",parseInt(this.height));c.append(d);var b=this;_(this.inputPins).each(function(a){var h=k("<PIN>");h.attr("pinname",a.pinname);h.attr("visible","1");(!a.isConnected()||a.masterPin)&&(VVVV.PinTypes[a.typeName].primitive&&b.defaultPinValues[a.pinname])&&h.attr("values",_(b.defaultPinValues[a.pinname]).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));
c.append(h)});_(this.invisiblePins).each(function(a){var b=k("<PIN>");b.attr("pinname",a.pinname);b.attr("visible","0");VVVV.PinTypes[a.typeName].primitive&&b.attr("values",_(a.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||")+"|"}).join(","));c.append(b)});return c}},Link:function(e,g){this.fromPin=e;this.toPin=g;this.fromPin.links.push(this);this.toPin.links.push(this);this.destroy=function(){this.fromPin.links.splice(this.fromPin.links.indexOf(this),1);this.toPin.links.splice(this.toPin.links.indexOf(this),
1);this.fromPin.node.parentPatch.linkList.splice(this.fromPin.node.parentPatch.linkList.indexOf(this),1);this.toPin.disconnect();if(this.toPin.reset_on_disconnect)this.toPin.reset();else{this.toPin.node.defaultPinValues[this.toPin.pinname]=[];for(var f=this.toPin.getSliceCount();f--;)this.toPin.node.defaultPinValues[this.toPin.pinname][f]=this.toPin.values[f]}};this.serialize=function(){var f=k("<LONK>");f.attr("srcnodeid",this.fromPin.node.id);f.attr("srcpinname",this.fromPin.pinname);f.attr("dstnodeid",
this.toPin.node.id);f.attr("dstpinname",this.toPin.pinname);return f}},Patch:function(e,g,f,c,d){function b(a){if(void 0==a)return[];if("45_26">=this.vvvv_version)return separator=/\|/.test(a)?"|":",",a.split(separator).filter(function(a,b){return""!=a});for(var b=[],h="",d=!1,c=a.length,m=0;m<c;m++)","!=a[m]||d?"|"==a[m]?"|"!=a[m+1]||m+1==a.length-1?d=!d:h+=a[++m]:h+=a[m]:(b.push(h),h="");b.push(h);return b}function a(){var a=window.location.hash.match("#([^/]+)/("+n.ressource+"|[0-9]+)$");a&&(VVVV.Editors[a[1]]&&
(a[2]==n.ressource||VVVV.Patches[a[2]]==n||VVVV.Patches.length==a[2]))&&(console.log("launching editor ..."),(new VVVV.Editors[a[1]]).enable(n))}this.ressource=e;this.vvvv_version="45_26.1";this.boundingBox={width:0,height:0};this.windowHeight=this.windowWidth=500;this.pinMap={};this.nodeMap={};this.nodeList=[];this.linkList=[];this.pinList=[];this.mainloop=this.compiledFunc=void 0;this.success=g;this.error=f;this.editor=void 0;this.setupObject();c&&(this.parentPatch=c);d&&(this.id=d);var h=!1;this.getAbsolutePath=
function(){var a=this.getRelativePath();this.parentPatch&&(a=this.parentPatch.getAbsolutePath()+a);return a};this.getRelativePath=function(){return this.nodename.match(/(.*\/)?[^/]+\.v4p/)[1]||""};this.destroy=function(){for(var a=0;a<this.nodeList.length;a++)this.nodeList[a].destroy(),delete this.nodeMap[this.nodeList[a].id],delete this.nodeList[a]};if("45_26">=this.vvvv_version)var m={},r={},q={},p={};var n=this;this.doLoad=function(a,h){function d(a){"complete"==f&&(r={});k(a).find('link[deleteme="pronto"]').each(function(){for(var a=
!1,b=0;b<n.linkList.length;b++)n.linkList[b].fromPin.node.id==k(this).attr("srcnodeid")&&(n.linkList[b].fromPin.pinname==k(this).attr("srcpinname")&&n.linkList[b].toPin.node.id==k(this).attr("dstnodeid")&&n.linkList[b].toPin.pinname==k(this).attr("dstpinname"))&&(a=n.linkList[b]);if(a){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var b=a.fromPin,h=a.toPin;a.destroy();b.connectionChanged();h.connectionChanged();h.markPinAsChanged()}});k(a).find('link[deleteme!="pronto"]').each(function(){var a=
n.pinMap[k(this).attr("srcnodeid")+"_out_"+k(this).attr("srcpinname")],b=n.pinMap[k(this).attr("dstnodeid")+"_in_"+k(this).attr("dstpinname")];void 0==a&&n.nodeMap[k(this).attr("srcnodeid")]&&(a=n.nodeMap[k(this).attr("srcnodeid")].addOutputPin(k(this).attr("srcpinname"),void 0));void 0==b&&n.nodeMap[k(this).attr("dstnodeid")]&&(b=n.nodeMap[k(this).attr("dstnodeid")].addInputPin(k(this).attr("dstpinname"),void 0));if(a&&b){for(var h=!1,d=0;d<n.linkList.length;d++)n.linkList[d].fromPin.node.id==a.node.id&&
(n.linkList[d].fromPin.pinname==a.pinname&&n.linkList[d].toPin.node.id==b.node.id&&n.linkList[d].toPin.pinname==b.pinname)&&(h=n.linkList[d]);h||(h=new VVVV.Core.Link(a,b),a.connectionChanged(),b.connectionChanged(),n.linkList.push(h),b.connect(a));"complete"==f&&(r[a.node.id+"_"+a.pinname+"-"+b.node.id+"_"+b.pinname]=h)}});"complete"==f&&(_(m).each(function(a,b){if(void 0==r[b]){"development"==VVVV_ENV&&console.log("removing "+a.fromPin.pinname+" -> "+a.toPin.pinname);var h=a.fromPin,d=a.toPin;a.destroy();
h.connectionChanged();d.connectionChanged();d.markPinAsChanged();d.reset_on_disconnect&&d.reset()}}),m={},_(r).each(function(a,b){m[b]=a}))}var c=this;do c.dirty=!0;while(c=c.parentPatch);if(c=/^<!DOCTYPE\s+PATCH\s+SYSTEM\s+"(.+)\\(.+)\.dtd/.exec(a))n.vvvv_version=c[2].replace(/[a-zA-Z]+/,"_");var f="diff";if(/\s<PATCH/.test(a)||"45_26">=n.vvvv_version)f="complete","development"==VVVV_ENV&&console.log("complete: "+this.nodename);c=k(a).find('bounds[type="Window"]').first();0<c.length&&(n.windowWidth=
c.attr("width")/15,n.windowHeight=c.attr("height")/15);"complete"==f&&(p={});k(a).find("node").each(function(){var c=void 0,m=!1;void 0!=n.nodeMap[k(this).attr("id")]&&("pronto"==k(this).attr("createme")?c=n.nodeMap[k(this).attr("id")]:m=!0);var r;r="InABox"==k(this).attr("componentmode")?k(this).find('bounds[type="Box"]').first():k(this).find('bounds[type="Node"]').first();if(m)l=n.nodeMap[k(this).attr("id")];else{var q=""!=k(this).attr("systemname")?k(this).attr("systemname"):k(this).attr("nodename");
if(void 0==q)return;if(void 0!=VVVV.NodeLibrary[q.toLowerCase()]){var l=new (VVVV.NodeLibrary[q.toLowerCase()])(k(this).attr("id"),n);VVVV.NodeLibrary[q.toLowerCase()].definingNode&&(l.definingNode=VVVV.NodeLibrary[q.toLowerCase()].definingNode,c?VVVV.NodeLibrary[q.toLowerCase()].definingNode.relatedNodes[VVVV.NodeLibrary[q.toLowerCase()].definingNode.relatedNodes.indexOf(c)]=l:VVVV.NodeLibrary[q.toLowerCase()].definingNode.relatedNodes.push(l));VVVV.NodeLibrary[q.toLowerCase()].requirements&&_(VVVV.NodeLibrary[q.toLowerCase()].requirements).each(function(b){void 0===
VVVV.LoadedLibs[b]&&(n.resourcesPending++,VVVV.loadScript(VVVV.ThirdPartyLibs[b],function(){n.resourcesPending--;VVVV.LoadedLibs[b]=VVVV.ThirdPartyLibs[b];d(a);n.afterUpdate();n.compile();0>=n.resourcesPending&&h&&(h(),h=void 0)}))})}else if(/.fx$/.test(k(this).attr("filename")))l=new VVVV.Nodes.GenericShader(k(this).attr("id"),n),l.isShader=!0,l.shaderFile=k(this).attr("filename").replace(/\\/g,"/").replace(/\.fx$/,".vvvvjs.fx").replace("lib/nodes/",""),l.nodename=q;else if(/.v4p$/.test(k(this).attr("filename"))){n.resourcesPending++;
var g=this,l=new VVVV.Core.Patch(k(this).attr("filename"),function(){n.resourcesPending--;"development"==VVVV_ENV&&console.log(this.nodename+"invoking update links");d(a);n.editor&&n.editor.addPatch(this);if(this.auto_evaluate){var b=n;do b.auto_evaluate=!0;while(b=b.parentPatch)}this.setMainloop(n.mainloop);n.afterUpdate();n.compile();0>=n.resourcesPending&&h&&(h(),h=void 0)},function(){n.resourcesPending--;this.not_implemented=!0;VVVV.onNotImplemented(q);d(a);n.afterUpdate();n.compile();0>=n.resourcesPending&&
h&&(h(),h=void 0)},n,k(g).attr("id"));l.isSubpatch=!0;n.editor&&!l.editor&&n.editor.addPatch(l);n.nodeMap[l.id]=l}else l=new VVVV.Core.Node(k(this).attr("id"),q,n),l.not_implemented=!0,VVVV.onNotImplemented(q);"development"==VVVV_ENV&&"complete"!=f&&console.log(n.nodename+": inserted new node "+l.nodename)}if(l.auto_evaluate){g=n;do g.auto_evaluate=!0;while(g=g.parentPatch)}if("pronto"==k(this).attr("deleteme")){"development"==VVVV_ENV&&console.log("removing node "+l.id);if(l.isSubpatch&&!l.not_implemented){l.editor&&
l.editor.removePatch(l);g=l.getSubPatches();g.push(l);for(var e,u=0;u<g.length;u++)e=VVVV.Helpers.prepareFilePath(g[u].nodename,g[u].parentPatch),VVVV.Patches[e].splice(VVVV.Patches[e].indexOf(l),1),0==VVVV.Patches[e].length&&delete VVVV.Patches[e]}l.definingNode&&l.definingNode.relatedNodes.splice(l.definingNode.relatedNodes.indexOf(l),1);n.nodeList.splice(n.nodeList.indexOf(l),1);l.destroy();delete n.nodeMap[l.id]}0<r.length&&(r.attr("left")&&(l.x=r.attr("left")/15,l.y=r.attr("top")/15,n.boundingBox.width=
Math.max(n.boundingBox.width,l.x+100),n.boundingBox.height=Math.max(n.boundingBox.height,l.y+100)),r.attr("width")&&(l.width=r.attr("width"),l.height=r.attr("height")));/^iobox/.test(l.nodename.toLowerCase())&&(l.isIOBox=!0);m||l.setup();g=this;k(this).find("pin").each(function(){var h=k(this).attr("pinname"),d=b(k(this).attr("values"));void 0!=d&&0<d.length&&l.addDefault(h,d);if(void 0==l.outputPins[h])if(void 0!=l.inputPins[h])l.inputPins[h].isConnected()||l.applyPinValuesFromXML(h);else if(void 0!=
l.invisiblePins[h]){if(void 0!=d){for(var c=0;c<d.length;c++)l.invisiblePins[h].values[c]!=d[c]&&l.invisiblePins[h].setValue(c,d[c]);l.invisiblePins[h].setSliceCount(d.length)}}else 1==k(this).attr("visible")&&"Configuration"!=k(this).attr("pintype")||l.isSubpatch?"Output"==k(this).attr("pintype")||0<k(a).find("link[srcnodeid="+l.id+"]").filter("link[srcpinname='"+h.replace(/[\[\]]/,"")+"']").length?void 0==l.outputPins[h]&&l.addOutputPin(h,d):void 0==l.inputPins[h]&&void 0==l.invisiblePins[h]&&l.addInputPin(h,
d):void 0==l.inputPins[h]&&void 0==l.invisiblePins[h]&&l.addInvisiblePin(h,d)});m||(c&&(console.log("replacing node "+l.id+" / "+c.nodename+" with "+l.nodename),_(c.invisiblePins).each(function(a,b){l.invisiblePins[b]?(n.pinMap[l.id+"_inv_"+b]=l.inputPins[b],l.invisiblePins[b].typeName==a.typeName&&(l.invisiblePins[b].values=a.values)):l.invisiblePins[b]=a})),l.initialize(),c&&(_(c.inputPins).each(function(a,b){if(l.inputPins[b])if(n.pinMap[l.id+"_in_"+b]=l.inputPins[b],l.inputPins[b].typeName!=a.typeName)for(var h=
a.links.length;h--;)a.links[h].destroy();else for(l.inputPins[b].values=a.values,h=a.links.length;h--;)l.inputPins[b].links[h]=a.links[h],l.inputPins[b].links[h].toPin=l.inputPins[b];else for(h=a.links.length;h--;)a.links[h].destroy()}),_(c.outputPins).each(function(a,b){if(l.outputPins[b])if(n.pinMap[l.id+"_out_"+b]=l.outputPins[b],l.outputPins[b].typeName!=a.typeName)for(var h=a.links.length;h--;)a.links[h].destroy();else for(l.outputPins[b].values=a.values,h=a.links.length;h--;)l.outputPins[b].links[h]=
a.links[h],l.outputPins[b].links[h].fromPin=l.outputPins[b];else for(h=a.links.length;h--;)a.links[h].destroy()}),n.nodeList.splice(n.nodeList.indexOf(c),1),c.destroy(),delete c,c=void 0),n.nodeList.push(l));"complete"==f&&(p[l.id]=l)});"complete"==f&&(_(q).each(function(a,b){void 0==p[b]&&("development"==VVVV_ENV&&console.log("removing node "+a.id),n.nodeList.splice(n.nodeList.indexOf(a),1),delete n.nodeMap[a.id])}),q={},_(p).each(function(a,b){q[b]=a}));0===this.resourcesPending&&d(a);this.compile();
0>=this.resourcesPending&&h&&(h(),h=void 0)};this.getSubPatches=function(){for(var a=[],b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&(a.push(this.nodeList[b]),a=a.concat(this.nodeList[b].getSubPatches()));return a};this.setMainloop=function(a){this.mainloop=a;for(var b=0;b<this.nodeList.length;b++)this.nodeList[b].isSubpatch&&this.nodeList[b].setMainloop(a)};this.afterEvaluate=function(){};this.afterUpdate=function(){};this.toXML=function(){var a=k("<PATCH>"),b=k("<BOUNDS>");b.attr("type",
"Window");b.attr("width",parseInt(15*this.windowWidth));b.attr("height",parseInt(15*this.windowHeight));a.append(b);for(b=0;b<this.nodeList.length;b++)a.append(this.nodeList[b].serialize());for(b=0;b<this.linkList.length;b++)a.append(this.linkList[b].serialize());a='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n  '+a.wrapAll("<d></d>").parent().html();a=a.replace(/<patch/g,"<PATCH");a=a.replace(/<\/patch>/g,"\n  </PATCH>");a=a.replace(/<node/g,"\n  <NODE");a=a.replace(/<\/node>/g,
"\n  </NODE>");a=a.replace(/<bounds/g,"\n  <BOUNDS");a=a.replace(/<\/bounds>/g,"\n  </BOUNDS>");a=a.replace(/<pin/g,"\n  <PIN");a=a.replace(/<\/pin>/g,"\n  </PIN>");a=a.replace(/<lonk/g,"\n  <LINK");return a=a.replace(/<\/lonk>/g,"\n  </LINK>")};this.compile=function(){function a(r){if(0>h.indexOf(r.id)){h.push(r.id);var l=r.getUpstreamNodes(),p=!1;_(l).each(function(h){void 0==b[h.id]&&(p=p||a(h))});h.pop()}p&&r.delays_output&&d.push(r);if(!p&&0>h.indexOf(r.id)||r.delays_output){if(r.getCode){r.outputPins.Output.values.incomingPins=
[];for(var n=l="("+r.getCode()+")",g;g=f.exec(l);){var e;r.inputPins[g[1]].values.code?(e=r.inputPins[g[1]].values.code,r.outputPins.Output.values.incomingPins=r.outputPins.Output.values.incomingPins.concat(r.inputPins[g[1]].values.incomingPins)):(e=r.inputPins[g[1]].isConnected()||1!=r.inputPins[g[1]].getSliceCount()?"patch.nodeMap["+r.id+"].inputPins['"+g[1]+"'].getValue(iii)":r.inputPins[g[1]].getValue(0),r.outputPins.Output.values.incomingPins.push(r.inputPins[g[1]]));n=n.replace("{"+g[1]+"}",
e)}r.outputPins.Output.values.code=n;for(l=0;l<r.outputPins.Output.links.length;l++)if(!r.outputPins.Output.links[l].toPin.node.getCode){q+=r.outputPins.Output.generateStaticCode(!0);break}}else r.not_implemented||(c.push(r),q+="var n = patch.nodeMap["+r.id+"];",q+="if ((n.isDirty() || n.auto_evaluate || n.isSubpatch) && !n.dealWithNilInput()) { n.evaluate(); n.dirty = false; }\n");for(var u in r.inputPins)0==r.inputPins[u].links.length&&m.push(r.inputPins[u]);for(u in r.invisiblePins)m.push(r.invisiblePins[u]);
for(u in r.outputPins)m.push(r.outputPins[u]);b[r.id]=r;return!1}return!0}this.evaluationRecipe=[];this.pinList=[];for(var b={},h=[],d=[],c=this.evaluationRecipe,m=this.pinList,f=RegExp(/\{([^\}]+)\}/g),q="",r=0;r<this.nodeList.length;r++)(0==this.nodeList[r].getDownstreamNodes().length||this.nodeList[r].auto_evaluate||this.nodeList[r].delays_output)&&void 0==b[this.nodeList[r].id]&&a(this.nodeList[r]);for(r=0;r<d.length;r++)a(d[r]);q="try {\n"+q+"\n} catch (e) { console.error(e.message); console.log(e.stack); }";
this.compiledFunc=new Function("patch",q)};this.evaluate=function(){if(!(0<this.resourcesPending)){if(h)var a={},b=(new Date).getTime();this.compiledFunc(this);h&&(_(a).each(function(a,b){console.log(a.count+"x "+b+": "+a.dt+"ms")}),b=(new Date).getTime());this.afterEvaluate();h&&console.log("patch rendering: "+((new Date).getTime()-b)+"ms");h=!1}};k(window).keydown(function(a){84==a.which&&(a.altKey&&a.ctrlKey)&&(h=!0)});if(/\.v4p[^<>\s]*$/.test(e)){this.nodename=e;var l=this,u=e;this.parentPatch&&
(u=VVVV.Helpers.prepareFilePath(e,this.parentPatch));VVVV.Patches[u]?l.doLoad(VVVV.Patches[u][0].toXML(),function(){VVVV.Patches[u].push(l);l.success&&l.success();l.afterUpdate()}):k.ajax({url:u,type:"get",dataType:"text",success:function(a){l.doLoad(a,function(){VVVV.Patches[u]=VVVV.Patches[u]||[];VVVV.Patches[u].push(l);l.success&&l.success();l.afterUpdate()})},error:function(){l.error&&l.error()}})}else this.doLoad(e,function(){this.success&&this.success()});a();k(window).bind("hashchange",function(){a()})}};
VVVV.Core.Patch.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Core.DOMInterface=function(e){function g(b){if("event"==b.property_class){var a=b.selector;"window"==a&&(a=window);"document"==a&&(a=document);k(a).each(function(a){b.values[a]=0;k(this).bind(b.property,function(){b.values[a]=1;return!1})})}}var f={},c={};e.domInterface=this;this.connect=function(b){_(f).each(function(a,h){a.node.id==b.id&&("event"==a.property_class&&k(a.selector).unbind(a.property),delete f[h])});_(c).each(function(a,h){a.node.id==b.id&&delete c[h]});var a=/([^\/]+)(\/(event|attribute|style)\/(.+))?/.exec(b.invisiblePins["Descriptive Name"].getValue(0));
if(null!=a){var h={selector:a[1],property_class:a[3],property:a[4],values:[],node:b};0!=k(h.selector).length&&(0==b.getUpstreamNodes().length?f[a[0]]=h:0==b.getDownstreamNodes().length&&(c[a[0]]=h),g(h))}};var d=this;_(e.nodeList).each(function(b){b.isIOBox&&void 0!=b.invisiblePins["Descriptive Name"]&&(d.connect(b),b.IOBoxInputPin().connectionChanged=function(){d.connect(b)})});this.populateInputConnectors=function(){var b,a;for(b in f)switch(a=f[b],a.property_class){case "event":a.values.length!=
a.node.IOBoxInputPin().values.length&&a.node.IOBoxInputPin().setSliceCount(a.values.length);for(var h=0;h<a.values.length;h++)void 0!=a.node.IOBoxInputPin().values[h]&&a.values[h]==a.node.IOBoxInputPin().values[h]||a.node.IOBoxInputPin().setValue(h,a.values[h]);break;default:for(this.fetchValuesFromDOM(a),a.values.length!=a.node.IOBoxInputPin().values.length&&a.node.IOBoxInputPin().setSliceCount(a.values.length),h=0;h<a.values.length;h++)a.node.IOBoxInputPin().getValue(h)!=a.values[h]&&a.node.IOBoxInputPin().setValue(h,
a.values[h])}};this.processOutputConnectors=function(){for(var b in c)switch(c[b].property_class){default:this.setDOMByIOBox(c[b])}for(b in f)if("event"==f[b].property_class)for(var a=0;a<f[b].values.length;a++)f[b].values[a]=0};this.fetchValuesFromDOM=function(b){b.values.length=0;k(b.selector).each(function(a){var h;if(void 0==b.property_class)switch(this.nodeName){case "INPUT":"text"==k(this).attr("type")&&(h=k(this).val());"checkbox"==k(this).attr("type")&&(h=k(this).attr("checked")?1:0);break;
default:h=k(this).text()}"attribute"==b.property_class&&(h=k(this).attr(b.property));"style"==b.property_class&&(h=k(this).css(b.property));b.values[a]=h})};this.setDOMByIOBox=function(b){var a=b.node.IOBoxOutputPin();if(a.pinIsChanged()){var a=a.getValue(0,a.getSliceCount()),h=k(b.selector).length;void 0==b.property_class&&(k(b.selector).empty(),k(b.selector).val(""));for(var d=0;d<Math.max(a.length,h);d++){var c=d%h,f=d%a.length,p=k(b.selector).eq(c);if(0!=p.length){if(void 0==b.property_class)switch(p[0].nodeName){case "INPUT":p.val(k(b.selector).eq(c).val()+
a[f]);break;default:p.html(k(b.selector).eq(c).html()+a[f])}"attribute"==b.property_class&&p.attr(b.property,a[f]);"style"==b.property_class&&p.css(b.property,a[f])}}}}}})(vvvvjs_jquery);(function(k){VVVV.fps=60;VVVV.Core.MainLoop=function(e,g){function f(){if(0==e.resourcesPending){c++;var q=(new Date).getTime();a&&(r.deltaT=q-a);a=q;d.populateInputConnectors();e.evaluate();d.processOutputConnectors();q=(new Date).getTime()-a;0==c%10&&(m&&(console.log(1/((a-h)/1E4)+"fps"),m=!1),h=a);r.frameNum++;if(66<q&&50<r.lowFrameRateCount++)VVVV.onLowFrameRate();else lowFrameRateCount=0}b&&window.setTimeout(function(){window.requestAnimationFrame(f)},Math.max(0,Math.round(1E3/VVVV.fps-q)))}
VVVV.fps=g||60;var c=0,d=new VVVV.Core.DOMInterface(e),b=!0,a=void 0,h=this.lowFrameRateCount=0,m=!1;this.deltaT=1E3/VVVV.fps;this.frameNum=0;e.setMainloop(this);var r=this;this.stop=function(){b=!1};this.start=function(){b||(b=!0,f())};this.isRunning=function(){return b};f();k(window).keydown(function(a){(102==a.which||70==a.which)&&(a.altKey&&a.ctrlKey)&&(m=!0)})}})(vvvvjs_jquery);(function(k){VVVV.Types.Color=function(e){this.rgba=new Float32Array(_(e.split(",")).map(function(g){return parseFloat(g)}));this.toString=function(){return this.rgba[0]+", "+this.rgba[1]+", "+this.rgba[2]+", "+this.rgba[3]};this.setHSV=function(g,f,c){g=360*((g%1+1)%1);var d=Math.floor(g/60),b=g/60-d;g=c*(1-f);var a=c*(1-f*b);f=c*(1-f*(1-b));switch(d){case 1:this.rgba[0]=a;this.rgba[1]=c;this.rgba[2]=g;break;case 2:this.rgba[0]=g;this.rgba[1]=c;this.rgba[2]=f;break;case 3:this.rgba[0]=g;this.rgba[1]=
a;this.rgba[2]=c;break;case 4:this.rgba[0]=f;this.rgba[1]=g;this.rgba[2]=c;break;case 5:this.rgba[0]=c;this.rgba[1]=g;this.rgba[2]=a;break;default:this.rgba[0]=c,this.rgba[1]=f,this.rgba[2]=g}};this.getHSV=function(){var g=this.rgba[0],f=this.rgba[1],c=this.rgba[2],d=Math.max(g,Math.max(f,c)),b=Math.min(g,Math.min(f,c)),a;d==b?a=0:d==g?a=60*(0+(f-c)/(d-b)):d==f?a=60*(2+(c-g)/(d-b)):d==c&&(a=60*(4+(g-f)/(d-b)));0>a&&(a+=360);g=0;0!=d&&(g=(d-b)/d);return[a/360,g,d]};this.copy_to=function(g){g.rgba[0]=
this.rgba[0];g.rgba[1]=this.rgba[1];g.rgba[2]=this.rgba[2];g.rgba[3]=this.rgba[3]}};VVVV.Types.CanvasGraphics={typeName:"CanvasGraphics",reset_on_disconnect:!0,defaultValue:function(){return"NONE"}}})(vvvvjs_jquery);(function(k){VVVV.Nodes.Cross2d=function(e,g){this.constructor(e,"Cross (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X In",[0],VVVV.PinTypes.Value),c=this.addInputPin("Y In",[0],VVVV.PinTypes.Value),d=this.addInputPin("Include Upper",[1],VVVV.PinTypes.Value),b=this.addInputPin("Include Lower",[1],VVVV.PinTypes.Value),a=this.addInputPin("Include Equal",[1],VVVV.PinTypes.Value),h=this.addOutputPin("X Out",
[0],VVVV.PinTypes.Value),m=this.addOutputPin("Y Out",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var r=0,q=0;q<c.getSliceCount();q++)for(var p=0;p<f.getSliceCount();p++)0.5>d.getValue(0)&&q>p||(0.5>b.getValue(0)&&q<p||0.5>a.getValue(0)&&q==p)||(h.setValue(r,f.getValue(p)),m.setValue(r,c.getValue(q)),r++);h.setSliceCount(r);m.setSliceCount(r)}};VVVV.Nodes.Cross2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Polar2d=function(e,g){this.constructor(e,"Polar (2d)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X",[1],VVVV.PinTypes.Value),c=this.addInputPin("Y",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++){var m=f.getValue(h),r=c.getValue(h);d.setValue(h,Math.atan2(r,m)/(2*Math.PI));b.setValue(h,Math.sqrt(m*
m+r*r))}d.setSliceCount(a);b.setSliceCount(a)}};VVVV.Nodes.Polar2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Cartesian2d=function(e,g){this.constructor(e,"Cartesian (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),c=this.addInputPin("Length",[1],VVVV.PinTypes.Value),d=this.addOutputPin("X",[1],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++){var m=f.getValue(h),r=c.getValue(h);d.setValue(h,r*Math.cos(2*m*Math.PI));b.setValue(h,r*Math.sin(2*m*Math.PI))}d.setSliceCount(a);b.setSliceCount(a)}};VVVV.Nodes.Cartesian2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Points2Vector2d=function(e,g){this.constructor(e,"Points2Vector (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X1",
[0],VVVV.PinTypes.Value),c=this.addInputPin("Y1",[0],VVVV.PinTypes.Value),d=this.addInputPin("X2",[1],VVVV.PinTypes.Value),b=this.addInputPin("Y2",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Length",[1],VVVV.PinTypes.Value),r=this.addOutputPin("Angle",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var q=this.getMaxInputSliceCount(),p=0;p<q;p++){var n=f.getValue(p),l=c.getValue(p),g=d.getValue(p),
e=b.getValue(p),g=g-n,e=e-l;a.setValue(p,n+g/2);h.setValue(p,l+e/2);m.setValue(p,Math.sqrt(g*g+e*e));r.setValue(p,Math.atan2(e,g)/(2*Math.PI))}a.setSliceCount(q);h.setSliceCount(q);m.setSliceCount(q);r.setSliceCount(q)}};VVVV.Nodes.Points2Vector2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Vector2Points2d=function(e,g){this.constructor(e,"Vector2Points (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X",
[0],VVVV.PinTypes.Value),c=this.addInputPin("Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Length",[1],VVVV.PinTypes.Value),b=this.addInputPin("Angle",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X1",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y1",[0],VVVV.PinTypes.Value),m=this.addOutputPin("X2",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Y2",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var q=this.getMaxInputSliceCount(),p=0;p<q;p++){var n=f.getValue(p),l=c.getValue(p),g=d.getValue(p),
e=b.getValue(p)-0.5*Math.PI,k=g/2*Math.sin(e),g=-g/2*Math.cos(e);a.setValue(p,n+k);h.setValue(p,l+g);m.setValue(p,n-k);r.setValue(p,l-g)}a.setSliceCount(q);h.setSliceCount(q);m.setSliceCount(q);r.setSliceCount(q)}};VVVV.Nodes.Vector2Points2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Attractor2d=function(e,g){this.constructor(e,"Attractor (2d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X",
[0],VVVV.PinTypes.Value),c=this.addInputPin("Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Attractor X",[0],VVVV.PinTypes.Value),b=this.addInputPin("Attractor Y",[0],VVVV.PinTypes.Value),a=this.addInputPin("Attractor Strength",[1],VVVV.PinTypes.Value),h=this.addInputPin("Attractor Power",[1],VVVV.PinTypes.Value),m=this.addInputPin("Attractor Radius",[0.1],VVVV.PinTypes.Value),r=this.addOutputPin("Output X",[0],VVVV.PinTypes.Value),q=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=
function(){for(var p=Math.max(f.getSliceCount(),c.getSliceCount()),n=Math.max(d.getSliceCount(),b.getSliceCount()),l,g,e,k,t,x,v=0;v<p;v++){l=f.getValue(v);g=c.getValue(v);for(var A=0;A<n;A++)if(e=d.getValue(A),k=b.getValue(A),attractorstrength=a.getValue(A),t=h.getValue(A),x=m.getValue(A),e=l-e,k=g-k,0!=e||0!=k){var s=Math.sqrt(Math.pow(e,2)+Math.pow(k,2)),z=0;s<=x&&(x=s/x,z=attractorstrength*(Math.pow(x,t)*(0>x?-1:0<x?1:0)/x-1));l+=e*z;g+=k*z}r.setValue(v,l);q.setValue(v,g)}r.setSliceCount(p);q.setSliceCount(p)}};
VVVV.Nodes.Attractor2d.prototype=new VVVV.Core.Node;VVVV.Nodes.ConnectAll2d=function(e,g){this.constructor(e,"ConnectAll (2d)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X In",[0],VVVV.PinTypes.Value),c=this.addInputPin("Y In",[0],VVVV.PinTypes.Value),d=this.addOutputPin("X1 Out",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y1 Out",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X2 Out",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("Y2 Out",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),r=0,q=0;q<m;q++)for(var p=q+1;p<m;p++)d.setValue(r,f.getValue(q)),b.setValue(r,c.getValue(q)),a.setValue(r,f.getValue(p)),h.setValue(r,c.getValue(p)),r++;d.setSliceCount(r);b.setSliceCount(r);a.setSliceCount(r);h.setSliceCount(r)}};VVVV.Nodes.ConnectAll2d.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.Polar3d=function(e,g){this.constructor(e,"Polar (3d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X",[0],VVVV.PinTypes.Value),c=this.addInputPin("Y",[0],VVVV.PinTypes.Value),d=this.addInputPin("Z",[-1],VVVV.PinTypes.Value),b=this.addOutputPin("Pitch",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Yaw",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Length",[1],VVVV.PinTypes.Value);
this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),r=0;r<m;r++){var q=f.getValue(r),p=c.getValue(r),n=d.getValue(r),l=Math.sqrt(q*q+p*p+n*n);a.setValue(r,Math.atan2(-q,-n)/(2*Math.PI));b.setValue(r,0==l?0:Math.acos(-p/l)/(2*Math.PI)-0.25);h.setValue(r,l)}a.setSliceCount(m);b.setSliceCount(m);h.setSliceCount(m)}};VVVV.Nodes.Polar3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Cartesian3d=function(e,g){this.constructor(e,"Cartesian (3d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Pitch",[0],VVVV.PinTypes.Value),c=this.addInputPin("Yaw",[0],VVVV.PinTypes.Value),d=this.addInputPin("Length",[1],VVVV.PinTypes.Value),b=this.addOutputPin("X",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Z",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),r=0;r<m;r++){var q=2*(f.getValue(r)+0.25)*Math.PI,p=2*c.getValue(r)*Math.PI,
n=d.getValue(r);h.setValue(r,-n*Math.cos(p)*Math.sin(q));b.setValue(r,-n*Math.sin(p)*Math.sin(q));a.setValue(r,-n*Math.cos(q))}b.setSliceCount(m);a.setSliceCount(m);h.setSliceCount(m)}};VVVV.Nodes.Cartesian3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Normalize3d=function(e,g){this.constructor(e,"Normalize (3d)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("X",[1],VVVV.PinTypes.Value),c=this.addInputPin("Y",
[0],VVVV.PinTypes.Value),d=this.addInputPin("Z",[0],VVVV.PinTypes.Value),b=this.addOutputPin("NormalizedX",[1],VVVV.PinTypes.Value),a=this.addOutputPin("NormalizedY",[0],VVVV.PinTypes.Value),h=this.addOutputPin("NormalizedZ",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var r=this.getMaxInputSliceCount(),q=0;q<r;q++){var p=f.getValue(q),n=c.getValue(q),l=d.getValue(q),g=Math.sqrt(p*p+n*n+l*l);b.setValue(q,0==g?0:p/g);a.setValue(q,
0==g?0:n/g);h.setValue(q,0==g?0:l/g);m.setValue(q,g)}b.setSliceCount(r);a.setSliceCount(r);h.setSliceCount(r);m.setSliceCount(r)}};VVVV.Nodes.Normalize3d.prototype=new VVVV.Core.Node;VVVV.Nodes.Normalize3dVector=function(e,g){this.constructor(e,"Normalize (3d Vector)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("XYZ",[],VVVV.PinTypes.Value),c=this.addOutputPin("NormalizedXYZ",[],VVVV.PinTypes.Value),
d=this.addOutputPin("Input Length",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b/3;a++){var h=f.getValue(a,3),m=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]);c.setValue(3*a,0==m?0:h[0]/m);c.setValue(3*a+1,0==m?0:h[1]/m);c.setValue(3*a+2,0==m?0:h[2]/m);d.setValue(a,m)}c.setSliceCount(3*Math.ceil(b/3));d.setSliceCount(Math.ceil(b/3))}};VVVV.Nodes.Normalize3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dCross=function(e,g){this.constructor(e,"Multiply (3d Cross)",
g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),c=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),d=this.addOutputPin("Output XYZ",[],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b/3;a++){var h=f.getValue(a,3),m=c.getValue(a,3);d.setValue(3*a+0,h[1]*m[2]-h[2]*m[1]);d.setValue(3*a+1,-(h[0]*m[2]-h[2]*m[0]));
d.setValue(3*a+2,h[0]*m[1]-h[1]*m[0])}d.setSliceCount(3*Math.ceil(b/3))}};VVVV.Nodes.Multiply3dCross.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dDot=function(e,g){this.constructor(e,"Multiply (3d Dot)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input1 XYZ",[],VVVV.PinTypes.Value),c=this.addInputPin("Input2 XYZ",[],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);
this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b/3;a++){var h=f.getValue(a,3),m=c.getValue(a,3);d.setValue(a,h[0]*m[0]+h[1]*m[1]+h[2]*m[2])}d.setSliceCount(Math.ceil(b/3))}};VVVV.Nodes.Multiply3dDot.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply3dVector=function(e,g){this.constructor(e,"Multiply (3d Vector)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Transform",
[],VVVV.PinTypes.Transform),c=this.addInputPin("XYZ UnTransformed",[0,0,0],VVVV.PinTypes.Value),d=this.addOutputPin("XYZ Transformed",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=Math.max(f.getSliceCount(),c.getSliceCount()/3),a=0;a<b;a++){var h=c.getValue(a,3),m=f.getValue(a);mat4.multiplyVec3(m,h);d.setValue(3*a+0,h[0]);d.setValue(3*a+1,h[1]);d.setValue(3*a+2,h[2])}d.setSliceCount(Math.ceil(3*b))}};VVVV.Nodes.Multiply3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Multiply4dVector=
function(e,g){this.constructor(e,"Multiply (4d Vector)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),c=this.addInputPin("XYZW UnTransformed",[0,0,0,1],VVVV.PinTypes.Value),d=this.addOutputPin("XYZW Transformed",[0,0,0,1],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=Math.max(f.getSliceCount(),c.getSliceCount()/4),a=0;a<b;a++){var h=c.getValue(a,
4),m=f.getValue(a);mat4.multiplyVec4(m,h);d.setValue(4*a+0,h[0]);d.setValue(4*a+1,h[1]);d.setValue(4*a+2,h[2]);d.setValue(4*a+3,h[3])}d.setSliceCount(Math.ceil(4*b))}};VVVV.Nodes.Multiply4dVector.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.LFO=function(e,g){this.constructor(e,"LFO (Animation)",g);this.meta={authors:["Matthias Zauner, sebl, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable yet"]};this.auto_evaluate=!0;var f=this.addInputPin("Period",[1],VVVV.PinTypes.Value),c=this.addInputPin("Pause",[0],VVVV.PinTypes.Value),d=this.addInputPin("Reverse",[0],VVVV.PinTypes.Value),b=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),a=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Change",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Cycles",[0],VVVV.PinTypes.Value),q=[],p=[],n=(new Date).getTime(),l=(new Date).getTime();this.evaluate=function(){var g=this.getMaxInputSliceCount();n=(new Date).getTime()-l;for(var e=0;e<g;e++){var k=f.getValue(e),t=c.getValue(e),x=d.getValue(e),v=b.getValue(e),A=a.getValue(e),s=0;void 0==q[e]&&(q[e]=0);void 0==p[e]&&(p[e]=0);0.5>t&&(0!=k&&isFinite(k))&&(dv=1/(1E3*k)*n,
0<x&&(dv*=-1),q[e]+=dv,0>q[e]&&(p[e]-=Math.ceil(-q[e]),q[e]=1+q[e],s=1),1<q[e]&&(p[e]+=Math.floor(q[e]),s=1));l=(new Date).getTime();0.5<=v&&(q[e]=0,p[e]=0,s=1);if(0.5>t||0.5<=v)h.setValue(e,(q[e]+A)%1),m.setValue(e,s),r.setValue(e,p[e]);q[e]%=1}h.setSliceCount(g);m.setSliceCount(g);r.setSliceCount(g);q.splice(g);p.splice(g)}};VVVV.Nodes.LFO.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearFilter=function(e,g){this.constructor(e,"LinearFilter (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var f=this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),c=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);this.addOutputPin("Acceleration Out",[0],VVVV.PinTypes.Value);var a=[],h=[],m=[],r=[],q=[],p=[];this.evaluate=function(){for(var n=this.getMaxInputSliceCount(),
l=f.pinIsChanged()||c.pinIsChanged(),e=0;e<n;e++){void 0==a[e]&&(a[e]=(new Date).getTime());var g=this.parentPatch.mainloop.deltaT,k=f.getValue(e),t=c.getValue(e);void 0==r[e]&&(r[e]=k);if(k!=h[e]||t!=m[e])p[e]=void 0,h[e]=k,m[e]=t,q[e]=0<m[e]?(h[e]-r[e])/(1E3*m[e]):0;Math.abs(q[e]*g)>Math.abs(h[e]-r[e])?r[e]=h[e]:r[e]+=q[e]*g;0!=p[e]&&(d.setValue(e,r[e]),b.setValue(e,q[e]));p[e]=h[e]-r[e];a[e]=(new Date).getTime()}l&&d.getSliceCount()!=n&&(h.splice(n),m.splice(n),a.splice(n),r.splice(n),q.splice(n),
p.splice(n),d.setSliceCount(n))}};VVVV.Nodes.LinearFilter.prototype=new VVVV.Core.Node;VVVV.Nodes.Damper=function(e,g){this.constructor(e,"Damper (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic Pin not implemented","Acceleration Out is not set yet"]};this.auto_evaluate=!0;var f=this.addInputPin("Go To Position",[0],VVVV.PinTypes.Value),c=this.addInputPin("FilterTime",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Position Out",
[0],VVVV.PinTypes.Value),b=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value);this.addOutputPin("Acceleration Out",[0],VVVV.PinTypes.Value);var a=[],h=[],m=[],r=[];this.evaluate=function(){for(var q=this.getMaxInputSliceCount(),p=f.pinIsChanged()||c.pinIsChanged(),n=0;n<q;n++){void 0==a[n]&&(a[n]=(new Date).getTime());var l=this.parentPatch.mainloop.deltaT,e=f.getValue(n),g=c.getValue(n);void 0==h[n]&&(h[n]=e);m[n]=0<g?(e-h[n])/(1E3*g):0;Math.abs(m[n]*l)>Math.abs(e-h[n])?h[n]=e:h[n]+=m[n]*
l;0!=r[n]&&(d.setValue(n,h[n]),b.setValue(n,m[n]));r[n]=e-h[n];a[n]=(new Date).getTime()}p&&d.getSliceCount()!=q&&(a.splice(q),h.splice(q),m.splice(q),r.splice(q),d.setSliceCount(q))}};VVVV.Nodes.Damper.prototype=new VVVV.Core.Node;VVVV.Nodes.Delay=function(e,g){this.constructor(e,"Delay (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Reset not implemented","Linear Mode not implemented"]};this.auto_evaluate=!0;var f=this.addInputPin("Input",
[0],VVVV.PinTypes.Value),c=this.addInputPin("Time",[1],VVVV.PinTypes.Value),d=this.addInputPin("Insert",[1],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=[],h=Array(1024);this.evaluate=function(){var m=this.getMaxInputSliceCount();now=(new Date).getTime();var r=f.pinIsChanged();if(void 0==f.getValue(0))r&&b.setValue(0,void 0);else{if(1==d.getValue(0)&&(r||c.pinIsChanged()))for(h.pop(),h.unshift(now),r=0;r<m;r++){if(void 0==a[r]){a[r]=Array(1024);for(var q=1024;q--;)a[r][q]=
0}1024<=a[r].length&&a[r].pop();a[r].unshift(f.getValue(r))}for(r=0;r<m;r++){for(var p=now-1E3*c.getValue(r),n=!1,q=0;1024>q;q++)if(h[q]<=p){b.values[r]!=a[r][q]&&b.setValue(r,a[r][q]);n=!0;break}n||0==b.values[r]||b.setValue(r,0)}b.setSliceCount(m);a.splice(m)}}};VVVV.Nodes.Delay.prototype=new VVVV.Core.Node;VVVV.Nodes.Change=function(e,g){this.constructor(e,"Change (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!0;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addOutputPin("OnChange",[0],VVVV.PinTypes.Value),d=[];this.evaluate=function(){var b=this.getMaxInputSliceCount();if(f.pinIsChanged()){for(var a=0;a<b;a++)d[a]!=f.getValue(a)?c.setValue(a,1):1==c.getValue(a)&&c.setValue(a,0),d[a]=f.getValue(a);c.setSliceCount(b)}else{for(a=0;a<b;a++)1==c.getValue(a)&&(c.setValue(a,0),c.setSliceCount(b));d[a]=f.getValue(a)}}};VVVV.Nodes.Change.prototype=new VVVV.Core.Node;VVVV.Nodes.TogEdge=function(e,
g){this.constructor(e,"TogEdge (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Up Edge",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Down Edge",[0],VVVV.PinTypes.Value),b=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)(0>=Math.round(b[h])||void 0==b[h])&&1<=Math.round(f.getValue(h))?c.setValue(h,
1):0!=c.values[h]&&c.setValue(h,0),1<=Math.round(b[h])&&0>=Math.round(f.getValue(h))?d.setValue(h,1):0!=d.values[h]&&d.setValue(h,0),b[h]=f.getValue(h);c.setSliceCount(a);d.setSliceCount(a)}};VVVV.Nodes.TogEdge.prototype=new VVVV.Core.Node;VVVV.Nodes.FlipFlop=function(e,g){this.constructor(e,"FlipFlop (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Set",[0],VVVV.PinTypes.Value),c=this.addInputPin("Reset",
[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),a=!1;this.evaluate=function(){var h=this.getMaxInputSliceCount(),m=d.getSliceCount();if(h>m)for(;m<h;m++)d.setValue(m,0),b.setValue(m,1);for(m=0;m<h;m++){var r=void 0;1<=Math.round(c.getValue(m))&&(r=0);1<=Math.round(f.getValue(m))&&(r=1);void 0!=r?(d.setValue(m,r),b.setValue(m,1-r)):a||(d.setValue(m,0),b.setValue(m,1))}d.setSliceCount(h);b.setSliceCount(h);
a=!0}};VVVV.Nodes.FlipFlop.prototype=new VVVV.Core.Node;VVVV.Nodes.MonoFlop=function(e,g){this.constructor(e,"MonoFlop (Animation)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=this.addInputPin("Set",[0],VVVV.PinTypes.Value),c=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),d=this.addInputPin("Time",[0],VVVV.PinTypes.Value),b=this.addInputPin("Retriggerable",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[0],
VVVV.PinTypes.Value),h=this.addOutputPin("Inverse Output",[1],VVVV.PinTypes.Value),m=[];this.evaluate=function(){var r=this.getMaxInputSliceCount(),q=a.getSliceCount();if(r>q)for(;q<r;q++)a.setValue(q,0),h.setValue(q,1);for(q=0;q<r;q++)if(void 0==m[q]&&(m[q]=0),void 0==a.getValue(q)&&a.setValue(q,0),1==a.getValue(q)){if(m[q]+=this.parentPatch.mainloop.deltaT/1E3,1==f.getValue(q)&&1==b.getValue(q)&&(m[q]=0),m[q]>=d.getValue(q)||1==c.getValue(q))m[q]=0,a.setValue(q,0),h.setValue(q,1)}else 1==f.getValue(q)&&
(a.setValue(q,1),h.setValue(q,0));a.setSliceCount(r);h.setSliceCount(r);m.splice(r)}};VVVV.Nodes.MonoFlop.prototype=new VVVV.Core.Node;VVVV.Nodes.SampleAndHold=function(e,g){this.constructor(e,"S+H (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["different output slice count in pure VVVV, if Set pin has only one slice"]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Set",[0],VVVV.PinTypes.Value),
d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var b=this.getMaxInputSliceCount();if(c.pinIsChanged()||f.pinIsChanged()){for(var a=0;a<b;a++)void 0==d.values[a]&&d.setValue(a,0),1<=Math.round(c.getValue(a))&&d.setValue(a,f.getValue(a));d.setSliceCount(b)}}};VVVV.Nodes.SampleAndHold.prototype=new VVVV.Core.Node;VVVV.Nodes.FrameDelay=function(e,g){this.constructor(e,"FrameDelay (Animation)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],
compatibility_issues:["no dynamice pin count"]};this.auto_evaluate=this.delays_output=!0;var f=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),c=this.addInputPin("Default 1",[0],VVVV.PinTypes.Value),d=this.addInputPin("Initialize",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output 1",[0],VVVV.PinTypes.Value),a=[];this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),m=0;m<h;m++)0.5<d.getValue(m)||void 0==a[m]?b.setValue(m,c.getValue(m)):b.setValue(m,a[m]);for(m=0;m<h;m++)a[m]=f.getValue(m);
b.setSliceCount(h)}};VVVV.Nodes.FrameDelay.prototype=new VVVV.Core.Node;VVVV.Nodes.Toggle=function(e,g){this.constructor(e,"Toggle (Animation)",g);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:[]};this.auto_evaluate=!0;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Inverse Output",
[1],VVVV.PinTypes.Value),a=!1;this.evaluate=function(){var h=this.getMaxInputSliceCount(),m=d.getSliceCount();if(h>m)for(;m<h;m++)d.setValue(m,0),b.setValue(m,1);for(m=0;m<h;m++){var r=void 0;1<=Math.round(c.getValue(m))&&(r=0);1<=Math.round(f.getValue(m))&&(r=1-d.getValue(m));void 0!=r&&d.getValue(m)!=r?(d.setValue(m,r),b.setValue(m,1-r)):a||(d.setValue(m,0),b.setValue(m,1))}d.setSliceCount(h);b.setSliceCount(h);a=!0}};VVVV.Nodes.Toggle.prototype=new VVVV.Core.Node;VVVV.Nodes.Counter=function(e,
g){this.constructor(e,"Counter (Animation)",g);this.meta={authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=this.addInputPin("Up",[0],VVVV.PinTypes.Value),c=this.addInputPin("Down",[0],VVVV.PinTypes.Value),d=this.addInputPin("Minimum",[0],VVVV.PinTypes.Value),b=this.addInputPin("Maximum",[15],VVVV.PinTypes.Value),a=this.addInputPin("Increment",[1],VVVV.PinTypes.Value),h=this.addInputPin("Default",
[0],VVVV.PinTypes.Value),m=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),r=this.addInputPin("Mode",["Wrap"],VVVV.PinTypes.Enum);r.enumOptions=["Wrap","Unlimited","Clamp"];var q=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),p=this.addOutputPin("Underflow",[0],VVVV.PinTypes.Value),n=this.addOutputPin("Overflow",[0],VVVV.PinTypes.Value),l=!1;this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=d.pinIsChanged()||b.pinIsChanged()||h.pinIsChanged()||m.pinIsChanged()||r.pinIsChanged(),
k=0;k<e;k++)1!=n.getValue(k)&&l||n.setValue(k,0),1!=p.getValue(k)&&l||p.setValue(k,0),l||q.setValue(k,0),g=g||0.5<=f.getValue(k)||0.5<=c.getValue(k);if(g){for(k=0;k<e;k++){var g=a.getValue(k),t=k>=q.getSliceCount()?0:q.getValue(k),x=b.getValue(k),v=d.getValue(k),A=0;"Unlimited"==r.getValue(k)&&(A=1);"Clamp"==r.getValue(k)&&(A=2);switch(A){case 1:0.5<=f.getValue(k)&&(t+=g);0.5<=c.getValue(k)&&(t-=g);break;case 2:0.5<=f.getValue(k)&&(t+=g);0.5<=c.getValue(k)&&(t-=g);t>x&&(t=x,n.setValue(k,1));t<v&&
(t=v,p.setValue(k,1));break;default:0.5<=f.getValue(k)&&(t+=g),0.5<=c.getValue(k)&&(t-=g),t>x&&(t=v,n.setValue(k,1)),t<v&&(t=x,p.setValue(k,1))}q.getValue(k)!=t&&q.setValue(k,t);0.5<=m.getValue(k)&&q.setValue(k,h.getValue(k))}q.setSliceCount(e);p.setSliceCount(e);n.setSliceCount(e)}l=!0}};VVVV.Nodes.Counter.prototype=new VVVV.Core.Node;VVVV.Nodes.ADSR=function(e,g){this.constructor(e,"ADSR (Animation)",g);this.meta={authors:["Lukas Winter"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};
this.auto_evaluate=!0;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Attack Time",[0.1],VVVV.PinTypes.Value),d=this.addInputPin("Decay Time",[0.1],VVVV.PinTypes.Value),b=this.addInputPin("Sustain Level",[0.5],VVVV.PinTypes.Value),a=this.addInputPin("Release Time",[0.5],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=["idle"],r=(new Date).getTime(),q=[0],p=[0];this.evaluate=function(){var n=this.getMaxInputSliceCount(),l=(new Date).getTime(),
e=l-r;q=f.getValue(0,n);q.length||(q=[q]);h.setSliceCount(n);for(var g=0;g<n;g++){0.5<q[g]&&0.5>p[g]&&(m[g]="attack");var k=q[g],t=h.getValue(g),x=1E3*c.getValue(g),v=1E3*d.getValue(g),A=b.getValue(g),s=1E3*a.getValue(g);switch(m[g]){case "attack":t+=e/x;1<=t&&(t=1,m[g]=k?"decay":"release");break;case "decay":t-=e/v;k?t<=A&&(t=A,m[g]="sustain"):m[g]="release";break;case "sustain":k||(m[g]="release");break;case "release":t-=e/s*A,0>=t&&(t=0,m[g]="idle")}h.setValue(g,t)}r=l;p=q}};VVVV.Nodes.ADSR.prototype=
new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.CurrentTimeAstronomy=function(e,g){this.constructor(e,"CurrentTime (Astronomy)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:["http://javascript.about.com/library/bldst.htm"],compatibility_issues:["Time Zone index differs from classic VVVV","Time Zone Name does not work in Firefox"]};this.auto_evaluate=!0;var f=new Date,c=this.addOutputPin("GMT",[],VVVV.PinTypes.Value),d=this.addOutputPin("Time Zone",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Time Zone Name",
[""],VVVV.PinTypes.String);this.addOutputPin("Daylight Saving Time",[f.getTimezoneOffset()<function(a){var b=new Date(a.getFullYear(),0,1);a=new Date(a.getFullYear(),6,1);return Math.max(b.getTimezoneOffset(),a.getTimezoneOffset())}(f)?1:0],VVVV.PinTypes.Value);var a=this.addOutputPin("Current Time",[],VVVV.PinTypes.Value);this.evaluate=function(){var h=new Date,m=36E5*h.getTimezoneOffset(),f=h.getTime();c.setValue(0,f/1E3/60/60/24+25569);d.setValue(0,m/1E3/60/60);h.toString().match(/\((.+)\)$/)?
b.setValue(0,h.toString().match(/\((.+)\)$/)[1]):b.setValue(0,"n/a");a.setValue(0,(f-m)/1E3/60/60/24+25569)}};VVVV.Nodes.CurrentTimeAstronomy.prototype=new VVVV.Core.Node;VVVV.Nodes.GregorianAstronomySplit=function(e,g){this.constructor(e,"Gregorian (Astronomy Split)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Time",[41491.4301],VVVV.PinTypes.Value),c=this.addOutputPin("Millisecond",[0],VVVV.PinTypes.Value),
d=this.addOutputPin("Second",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Minute",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Hour",[0],VVVV.PinTypes.Value),h=this.addOutputPin("DayOfWeek",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Day",[1],VVVV.PinTypes.Value),r=this.addOutputPin("Month",[1],VVVV.PinTypes.Value),q=this.addOutputPin("Year",[2E3],VVVV.PinTypes.Value);this.evaluate=function(){for(var p=this.getMaxInputSliceCount(),n=0;n<p;n++){var l=864E5*(f.getValue(n)-25569),l=new Date(l),e=
l.getMilliseconds();c.setValue(n,e);e=l.getSeconds();d.setValue(n,e);e=l.getMinutes();b.setValue(n,e);e=l.getHours();a.setValue(n,e);e=l.getDay();h.setValue(n,e);e=l.getDate();m.setValue(n,e);e=l.getMonth()+1;r.setValue(n,e);e=l.getYear()+1900;q.setValue(n,e)}c.setSliceCount(p);d.setSliceCount(p);b.setSliceCount(p);a.setSliceCount(p);h.setSliceCount(p);m.setSliceCount(p);r.setSliceCount(p);q.setSliceCount(p)}};VVVV.Nodes.GregorianAstronomySplit.prototype=new VVVV.Core.Node;VVVV.Nodes.GregorianAstronomyJoin=
function(e,g){this.constructor(e,"Gregorian (Astronomy Join)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Millisecond",[0],VVVV.PinTypes.Value),c=this.addInputPin("Second",[0],VVVV.PinTypes.Value),d=this.addInputPin("Minute",[0],VVVV.PinTypes.Value),b=this.addInputPin("Hour",[0],VVVV.PinTypes.Value),a=this.addInputPin("Day",[1],VVVV.PinTypes.Value),h=this.addInputPin("Month",[1],VVVV.PinTypes.Value),
m=this.addInputPin("Year",[2E3],VVVV.PinTypes.Value),r=this.addOutputPin("Time",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var q=this.getMaxInputSliceCount(),p=0;p<q;p++){var e=new Date;e.setMilliseconds(f.getValue(p));e.setSeconds(c.getValue(p));e.setMinutes(d.getValue(p));e.setHours(b.getValue(p));e.setDate(a.getValue(p));e.setMonth(h.getValue(p)-1);e.setYear(m.getValue(p));r.setValue(p,e.getTime()/864E5+25569)}}};VVVV.Nodes.GregorianAstronomyJoin.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){function e(d,b,a){a?(this.constructor(d,b,a),c||(c=new AudioContext),this.initialize=function(){this.createAPIMultiNode(1);this.createAudioPins();this.createParamPins()},this.destroy=function(){this.truncateAPIMultiNode(0)},this.audioInputPins=[],this.audioOutputPins=[],this.paramPins=[],this.modulationPins=[],this.apiMultiNode=[],this.auto_nil=!1):(this.createAPISingleNode=function(a){var b="Analyser"==d?c.createAnalyser(a):"MediaElementSource"==d?c.createMediaElementSource(a):"Oscillator"==
d?c.createOscillator(a):"Delay"==d?c.createDelay(a):"Gain"==d?c.createGain(a):"DynamicsCompressor"==d?c.createDynamicsCompressor(a):"BiquadFilter"==d?c.createBiquadFilter(a):"MediaStreamSource"==d?c.createMediaStreamSource(a):"Convolver"==d?c.createConvolver(a):"WaveShaper"==d?c.createWaveShaper(a):c["create"+d].apply(c,arguments);b._id=g++;return b},this.auto_evaluate=!1)}if(window.AudioContext){var g=0;VVVV.PinTypes.WebAudio={typeName:"WebAudio",reset_on_disconnect:!0,defaultValue:function(){return"Unconnected Audio"},
connectionChangedHandlers:{}};VVVV.PinTypes.AudioBuffer={typeName:"AudioBuffer",reset_on_disconnect:!0,defaultValue:function(){return"Empty audio buffer"},connectionChangedHandlers:{}};var f=function(d,b){this.srcApiNode=d;this.srcName=b;this.connections=[]};f.prototype={connect:function(d,b){console.log("CONNECT ",this.srcApiNode," OUTPUT ",this.srcName,"\n TO ",d," INPUT ",b);if("number"==typeof b)this.srcApiNode.connect(d,this.srcName,b);else if("string"==typeof b){var a=d[b];console.log("DEST PARAM ",
a);this.srcApiNode.connect(a,this.srcName)}else console.log("EEEK!",typeof b,b);this.connections.push({destApiNode:d,destName:b})},disconnect:function(d,b){console.log("DISCONNECT ",this.srcApiNode," OUTPUT ",this.srcName,"\n FROM ",d," INPUT ",b);var a=this;this.srcApiNode.disconnect(this.srcName);var h=-1;this.connections.forEach(function(c,f){c.destApiNode==d&&c.destName==b?h=f:"number"==typeof c.destName?a.srcApiNode.connect(c.destApiNode,a.srcName,c.destName):"string"==typeof c.destName&&a.srcApiNode.connect(c.destApiNode[c.destName],
a.srcName)});-1!=h?this.connections.splice(h,1):console.log("Warning: Connection removal bug detected!")},toString:function(){return this.srcApiNode.constructor.name+":"+this.srcName+" ("+this.srcApiNode.channelCount+"ch)"}};var c=null;e.prototype=new VVVV.Core.Node;e.prototype.truncateAPIMultiNode=function(d){var b=this;this.audioInputPins.concat(this.modulationPins).forEach(function(a){for(var h=d;h<b.apiMultiNode.length;h++){var c=a.oldValue[h];c&&"Unconnected Audio"!=c&&c.disconnect(b.apiMultiNode[h],
a.apiName);delete a.oldValue[h]}});this.apiMultiNode.splice(d)};e.prototype.createAPIMultiNode=function(d){for(var b=this,a=[].slice.call(arguments,1),h=this.apiMultiNode.length;h<d;h++){var c=[];a.forEach(function(a){a instanceof Array?c.push(a[h]):c.push(a)});this.apiMultiNode[h]=this.createAPISingleNode.apply(this.createAPISingleNode,c);this.audioOutputPins.forEach(function(a){a.setValue(h,new f(b.apiMultiNode[h],a.apiName))})}this.apiNode=this.apiMultiNode[0]};e.prototype.resizeAPIMultiNode=function(d){this.truncateAPIMultiNode(d);
this.createAPIMultiNode(d)};e.prototype.createAudioPins=function(){for(var d=0;d<this.apiNode.numberOfInputs;d++){var b=this.addInputPin("Input "+(d+1),[],VVVV.PinTypes.WebAudio);b.apiName=d;b.oldValue=[];this.audioInputPins.push(b)}for(d=0;d<this.apiNode.numberOfOutputs;d++)b="Output "+(d+1),this.outputPins.hasOwnProperty(b)?(b=this.outputPins[b],b.setType(VVVV.PinTypes.WebAudio),b.setValue(0,new f(this.apiNode,d))):b=this.addOutputPin(b,[new f(this.apiNode,d)],VVVV.PinTypes.WebAudio),b.apiName=
d,b.audioConnections=[],this.audioOutputPins.push(b)};e.prototype.createParamPins=function(){for(var d in this.apiNode){var b=this.apiNode[d];if(b instanceof AudioParam){var a=d.replace(/([a-z^])([A-Z])/g,"$1 $2"),a=a.charAt(0).toUpperCase()+a.slice(1),b=this.addInputPin(a,[b.defaultValue],VVVV.PinTypes.Value);b.apiName=d;this.paramPins.push(b);a=this.addInputPin(a+" Modulation",[],VVVV.PinTypes.WebAudio);a.apiName=d;a.oldValue=[];this.modulationPins.push(a)}}};e.prototype.updateParamPins=function(){var d=
this;this.paramPins.forEach(function(b,a){b.pinIsChanged()&&d.apiMultiNode.forEach(function(a,d){a[b.apiName].value=b.getValue(d)})})};e.prototype.getAudioSliceCount=function(){return this.getMaxInputSliceCount()};e.prototype.updateAudioConnections=function(){var d=this,b=this.getAudioSliceCount(),a=this.apiMultiNode.length;this.resizeAPIMultiNode(b);b!=a&&d.audioOutputPins.forEach(function(a){a.setSliceCount(b)});this.audioInputPins.concat(this.modulationPins).forEach(function(h){var c=b;b!=a&&(c=
a);for(h.pinIsChanged()&&(c=0);c<b;c++){var f=h.getValue(c),q=h.oldValue[c];q==f?console.log("No change!"):(q&&"Unconnected Audio"!=q&&q.disconnect(d.apiMultiNode[c],h.apiName),f&&"Unconnected Audio"!=f&&(console.log(f),f.connect(d.apiMultiNode[c],h.apiName)),h.oldValue[c]=f)}})};VVVV.Nodes.FileAudioBuffer=function(d,b){this.constructor(d,"FileAudioBuffer (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this;this.auto_evaluate=!1;
var h=this.addInputPin("Filename",[""],VVVV.PinTypes.String),m=this.addOutputPin("Audio Out",[],VVVV.PinTypes.AudioBuffer);this.evaluate=function(){if(c&&h.pinIsChanged()){for(var b=this.getMaxInputSliceCount(),d=0;d<b;d++){var f=VVVV.Helpers.prepareFilePath(h.getValue(d),this.parentPatch),e=new XMLHttpRequest;e.open("GET",f,!0);e.responseType="arraybuffer";e.onload=function(b){return function(){c.decodeAudioData(e.response,function(h){b<a.getMaxInputSliceCount()&&m.setValue(b,h)})}}(d);e.send()}m.setSliceCount(b)}}};
VVVV.Nodes.FileAudioBuffer.prototype=new VVVV.Core.Node;VVVV.Nodes.FFT=function(d,b){e.call(this,d,"FFT (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var a=this.addInputPin("FFTSize",[2048],VVVV.PinTypes.Value),h=this.addInputPin("Smoothing",[0.8],VVVV.PinTypes.Value),c=this.addOutputPin("FFT",[],VVVV.PinTypes.Value),f=new Float32Array(1024),q=1024;this.evaluate=function(){var b=this.getMaxInputSliceCount();b==this.apiMultiNode.length||
a.pinIsChanged()||(c.setSliceCount(q*b),f=new Float32Array(q));this.updateAudioConnections();if(a.pinIsChanged()){for(var d=q=0;d<b;d++){var l=a.getValue(d);32>l&&(l=32);32768<l&&(l=32768);l=Math.pow(2,Math.round(Math.log(l)/Math.log(2)));this.apiMultiNode[d].fftSize=l;q=Math.max(l/2,q)}q!=f.length&&(c.setSliceCount(q*b),f=new Float32Array(q))}for(d=0;d<b;d++)for(h.pinIsChanged()&&(this.apiMultiNode[d].smoothingTimeConstant=h.getValue(d)),this.apiMultiNode[d].getFloatFrequencyData(f),l=0;l<q;l++)c.setValue(d*
q+l,f[l])}};VVVV.Nodes.FFT.prototype=new e("Analyser");VVVV.Nodes.MediaElementSource=function(d,b){e.call(this,d,"MediaElementSource (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInputPin("Audio",[],this),h=this.addOutputPin("Output",[],VVVV.PinTypes.WebAudio);h.apiName=0;this.audioOutputPins.push(h);this.initialize=function(){};var c=[];this.evaluate=function(){if(a.pinIsChanged()){var b=this.getMaxInputSliceCount();h.setSliceCount(b);
c.length=b;for(var d=0;d<b;d++){var e=a.getValue(d);e&&e!=c[d]&&(c[d]=e,this.apiMultiNode[d]=this.createAPISingleNode(e),e.volume=1,h.setValue(d,new f(this.apiMultiNode[d],0)))}}this.updateAudioConnections()}};VVVV.Nodes.MediaElementSource.prototype=new e("MediaElementSource");VVVV.Nodes.AudioDestination=function(d,b){e.call(this,d,"AudioDestination (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.createAPISingleNode=function(){return c.destination};
this.evaluate=function(){this.updateAudioConnections()}};VVVV.Nodes.AudioDestination.prototype=new e("AudioDestination");VVVV.Nodes.AudioIn=function(d,b){e.call(this,d,"AudioIn (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this,h=this.addOutputPin("Status",["Waiting"],VVVV.PinTypes.String);this.initialize=function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;navigator.getUserMedia?
navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},function(b){a.createAPIMultiNode(1,b);a.createAudioPins();h.setValue(0,"OK")},function(a){h.setValue(0,a)}):h.setValue(0,"Error: getUserMedia not supported!")};this.evaluate=function(){this.updateAudioConnections()}};VVVV.Nodes.AudioIn.prototype=new e("MediaStreamSource");VVVV.Nodes.Oscillator=function(d,b){e.call(this,d,"Oscillator (HTML5 Audio)",
b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInputPin("Type",["sine"],VVVV.PinTypes.Enum);a.enumOptions=["sine","square","sawtooth","triangle","custom"];this.createAPISingleNode=function(){var a=c.createOscillator();a.start();return a};this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();var b=this.getMaxInputSliceCount();if(a.pinIsChanged())for(var d=0;d<b;d++)this.apiMultiNode[d].type=a.getValue(d)}};VVVV.Nodes.Oscillator.prototype=
new e("Oscillator");VVVV.Nodes.DelayAudio=function(d,b){e.call(this,d,"Delay (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInvisiblePin("Maximum Delay",[1],VVVV.PinTypes.Value);this.createAPISingleNode=function(){return c.createDelay(a.getValue(0))};this.evaluate=function(){this.updateAudioConnections();this.updateParamPins()}};VVVV.Nodes.DelayAudio.prototype=new e("Delay");VVVV.Nodes.Gain=function(d,b){e.call(this,d,"Gain (HTML5 Audio)",
b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.evaluate=function(){this.updateAudioConnections();this.updateParamPins()}};VVVV.Nodes.Gain.prototype=new e("Gain");VVVV.Nodes.AddAudio=function(d,b){e.call(this,d,"Add (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),h=this,c=function(){var b=Math.max(2,a.getValue(0));VVVV.Helpers.dynamicPins(h,
h.audioInputPins,b,function(a){a=h.addInputPin("Input "+(a+1),[],VVVV.PinTypes.WebAudio);a.apiName=0;a.oldValue=[];return a})};this.initialize=function(){this.createAPIMultiNode(1);this.createAudioPins()};this.evaluate=function(){a.pinIsChanged()&&c();this.updateAudioConnections()}};VVVV.Nodes.AddAudio.prototype=new e("Gain");VVVV.Nodes.AddAudioSpectral=function(d,b){e.call(this,d,"Add (HTML5 Audio Spectral)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};
var a;this.createAPISingleNode=function(){a||(a=c.createGain());return a};this.initialize=function(){this.createAPIMultiNode(1);this.createAudioPins()};this.evaluate=function(){this.updateAudioConnections();this.audioOutputPins[0].setSliceCount(1)}};VVVV.Nodes.AddAudioSpectral.prototype=new e("Gain");VVVV.Nodes.Convolver=function(d,b){e.call(this,d,"Convolver (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInputPin("Impulse Response",
[],VVVV.PinTypes.AudioBuffer),h=this.addInputPin("Normalize",[1],VVVV.PinTypes.Value);this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();if(h.pinIsChanged()||a.pinIsChanged())for(var b=this.getMaxInputSliceCount(),d=0;d<b;d++)this.apiMultiNode[d].normalize=0.5<h.getValue(d),a.getValue(d)instanceof AudioBuffer&&(this.apiMultiNode[d].buffer=a.getValue(d))}};VVVV.Nodes.Convolver.prototype=new e("Convolver");VVVV.Nodes.WaveShaper=function(d,b){e.call(this,d,"WaveShaper (HTML5 Audio)",
b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInputPin("Curve",[],VVVV.PinTypes.Value),h=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),c=this.addInputPin("Oversample",[1],VVVV.PinTypes.Enum);c.enumOptions=["none","2x","4x"];this.getAudioSliceCount=function(){return Math.max(this.audioInputPins[0].getSliceCount(),c.getSliceCount(),h.getSliceCount())};this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();
var b=this.getAudioSliceCount();if(a.pinIsChanged()||h.pinIsChanged())for(var d=0,f=0;f<b;f++){var e=h.getValue(f);0>e&&(e=Math.ceil(a.getSliceCount()/-e));var l=new Float32Array(a.getValue(d/e,e));console.log(l);2<l.length&&(this.apiMultiNode[f].curve=l);d+=e}if(c.pinIsChanged())for(f=0;f<b;f++)this.apiMultiNode[f].oversample=c.getValue(f)}};VVVV.Nodes.WaveShaper.prototype=new e("WaveShaper");VVVV.Nodes.BiquadFilter=function(d,b){e.call(this,d,"BiquadFilter (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],
original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInputPin("Type",["lowpass"],VVVV.PinTypes.Enum);a.enumOptions="lowpass highpass bandpass lowshelf highshelf peaking notch allpass".split(" ");this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();if(a.pinIsChanged())for(var b=this.getMaxInputSliceCount(),d=0;d<b;d++)this.apiMultiNode[d].type=a.getValue(d)}};VVVV.Nodes.BiquadFilter.prototype=new e("BiquadFilter");VVVV.Nodes.DynamicsCompressor=function(d,b){e.call(this,
d,"DynamicsCompressor (HTML5 Audio)",b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var a=this.addOutputPin("Reduction",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.updateAudioConnections();this.updateParamPins();this.apiMultiNode.forEach(function(b,d){a.setValue(d,b.reduction.value)})}};VVVV.Nodes.DynamicsCompressor.prototype=new e("DynamicsCompressor");VVVV.Nodes.BeatDetector=function(d,b){e.call(this,d,"BeatDetector (HTML5 Audio)",
b);this.meta={authors:["Lukas Winter"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var a=new Float32Array(1024),h=[],m=this.addOutputPin("Beat Counter",[0],VVVV.PinTypes.Value),f=this.addOutputPin("BPM",[0],VVVV.PinTypes.Value);this.createAPISingleNode=function(){var a=c.createAnalyser();a.fftSize=2048;a.smoothingTimeConstant=0;return a};this.evaluate=function(){this.updateAudioConnections();for(var b=this.getMaxInputSliceCount(),d=0;d<b;d++)h[d]||(h[d]=new BeatDetektor),
this.apiMultiNode[d].getFloatFrequencyData(a),h[d].process(c.currentTime,a),m.setValue(d,h[d].beat_counter),f.setValue(d,h[d].win_bpm_int/10);h.length=b;m.setSliceCount(b);f.setSliceCount(b)}};VVVV.Nodes.BeatDetector.prototype=new e("Analyser");VVVV.Nodes.BeatDetector.requirements=["beatdetektor"]}})(vvvvjs_jquery);(function(k){VVVV.Nodes.And=function(e,g){this.constructor(e,"AND (Boolean)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=[],d=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,b,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&
this.initialize();for(var b=this.getMaxInputSliceCount(),a=c.length,h,m=0;m<b;m++){h=!0;for(var r=0;r<a;r++)h=h&&0.5<=c[r].getValue(m);d.setValue(m,h?1:0)}d.setSliceCount(b)}};VVVV.Nodes.And.prototype=new VVVV.Core.Node;VVVV.Nodes.Or=function(e,g){this.constructor(e,"OR (Boolean)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=[],d=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);
this.initialize=function(){var b=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,b,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=c.length,h,m=0;m<b;m++){h=!1;for(var r=0;r<a;r++)h=h||0.5<=c[r].getValue(m);d.setValue(m,h?1:0)}d.setSliceCount(b)}};VVVV.Nodes.Or.prototype=new VVVV.Core.Node;VVVV.Nodes.Not=function(e,g){this.constructor(e,"NOT (Boolean)",g);
this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[1],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),b=0;b<d;b++)c.setValue(b,1-Math.round(f.getValue(b)));c.setSliceCount(this.getMaxInputSliceCount())}};VVVV.Nodes.Not.prototype=new VVVV.Core.Node;VVVV.Nodes.OrSpectral=function(e,g){this.constructor(e,"OR (Boolean Spectral)",
g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0,h=0,m=!1,r=0;r<b||0<c.getValue(0)&&(0<h||0!=a%c.getSliceCount());r++)0==h&&(m=!1),m=m||0.5<=f.getValue(r),h++,0<c.getValue(0)?h>=c.getValue(a)&&(d.setValue(a,
m?1:0),a++,h=0):d.setValue(0,m?1:0);d.setSliceCount(a+(0<h))}};VVVV.Nodes.OrSpectral.prototype=new VVVV.Core.Node;VVVV.Nodes.AndSpectral=function(e,g){this.constructor(e,"AND (Boolean Spectral)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=
this.getMaxInputSliceCount(),a=0,h=0,m=!1,r=0;r<b||0<c.getValue(0)&&(0<h||0!=a%c.getSliceCount());r++)0==h&&(m=!0),m=m&&0.5<=f.getValue(r),h++,0<c.getValue(0)?h>=c.getValue(a)&&(d.setValue(a,m?1:0),a++,h=0):d.setValue(0,m?1:0);d.setSliceCount(a+(0<h))}};VVVV.Nodes.AndSpectral.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Types.CanvasTexture={imageObject:void 0,loaded:!1};VVVV.Types.CanvasRenderState=function(){this.fillColor=new VVVV.Types.Color("1,1,1,1");this.strokeColor=new VVVV.Types.Color("0,0,0,0");this.lineWidth=1;this.capStyle="butt";this.joinStyle="miter";this.gradient={type:"none"};this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0;this.shadowColor=new VVVV.Types.Color("0,0,0,1");this.blendMode="source-over";this.copy_attributes=function(c){c.fillColor.copy_to(this.fillColor);c.strokeColor.copy_to(this.strokeColor);
this.lineWidth=c.lineWidth;this.capStyle=c.capStyle;this.joinStyle=c.joinStyle;this.gradient=c.gradient;this.shadowOffsetX=c.shadowOffsetX;this.shadowOffsetY=c.shadowOffsetY;this.shadowBlur=c.shadowBlur;c.shadowColor.copy_to(this.shadowColor);this.blendMode=c.blendMode};this.apply=function(c){if("none"!=this.gradient.type){if("linear"==this.gradient.type)var d=c.createLinearGradient(this.gradient.startX,this.gradient.startY,this.gradient.endX,this.gradient.endY);for(var b=Math.max(this.gradient.colors.length,
this.gradient.colorPositions.length),a=0;a<b;a++){var h=this.gradient.colors[a];d.addColorStop(this.gradient.colorPositions[a],"rgba("+parseInt(255*h.rgba[0])+","+parseInt(255*h.rgba[1])+","+parseInt(255*h.rgba[2])+","+h.rgba[3]+")")}c.fillStyle=d}else c.fillStyle="rgba("+parseInt(255*this.fillColor.rgba[0])+","+parseInt(255*this.fillColor.rgba[1])+","+parseInt(255*this.fillColor.rgba[2])+","+this.fillColor.rgba[3]+")";c.strokeStyle="rgba("+parseInt(255*this.strokeColor.rgba[0])+","+parseInt(255*
this.strokeColor.rgba[1])+","+parseInt(255*this.strokeColor.rgba[2])+","+this.strokeColor.rgba[3]+")";c.lineWidth=this.lineWidth/c.canvas.height;c.lineCap=this.capStyle;c.lineJoin=this.joinStyle;c.shadowOffsetX=this.shadowOffsetX;c.shadowOffsetY=this.shadowOffsetY;c.shadowBlur=this.shadowBlur;c.shadowColor="rgba("+parseInt(255*this.shadowColor.rgba[0])+","+parseInt(255*this.shadowColor[1])+","+parseInt(255*this.shadowColor[2])+","+this.shadowColor[3]+")";c.globalCompositeOperation=this.blendMode}};
var e=new VVVV.Types.CanvasRenderState,g=new VVVV.Types.CanvasRenderState;g.fillColor=new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0");VVVV.PinTypes.CanvasRenderState={typeName:"CanvasRenderState",reset_on_disconnect:!0,defaultValue:function(){return e}};VVVV.Types.CanvasLayer=function(){this.draw=function(){}};var f=new VVVV.Types.CanvasLayer;VVVV.PinTypes.CanvasLayer={typeName:"CanvasLayer",reset_on_disconnect:!0,defaultValue:function(){return f}};VVVV.Nodes.FillCanvas=function(c,d){this.constructor(c,
"Fill (Canvas VVVVjs RenderState)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Color",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")],VVVV.PinTypes.Color),h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),m=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==m[c]&&(m[c]=new VVVV.Types.CanvasRenderState),
m[c].copy_attributes(b.getValue(c)),a.getValue(c).copy_to(m[c].fillColor),h.setValue(c,m[c]);h.setSliceCount(d)}};VVVV.Nodes.FillCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.StrokeCanvas=function(c,d){this.constructor(c,"Stroke (Canvas VVVVjs RenderState)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Color",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")],
VVVV.PinTypes.Color),h=this.addInputPin("Width",[1],VVVV.PinTypes.Value),m=this.addInputPin("Cap Style",["butt"],VVVV.PinTypes.Enum);m.enumOptions=["butt","round","square"];var f=this.addInputPin("Join Style",["miter"],VVVV.PinTypes.Enum);f.enumOptions=["miter","round","bevel"];var e=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),p=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==p[c]&&(p[c]=new VVVV.Types.CanvasRenderState),p[c].copy_attributes(b.getValue(c)),
a.getValue(c).copy_to(p[c].strokeColor),p[c].lineWidth=h.getValue(c),p[c].capStyle=m.getValue(c),p[c].joinStyle=f.getValue(c),e.setValue(c,p[c]);e.setSliceCount(d)}};VVVV.Nodes.StrokeCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.ShadowCanvas=function(c,d){this.constructor(c,"Shadow (Canvas VVVVjs RenderState)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Color",
[new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],VVVV.PinTypes.Color),h=this.addInputPin("Offset X",[0],VVVV.PinTypes.Value),m=this.addInputPin("Offset Y",[0],VVVV.PinTypes.Value),f=this.addInputPin("Blur",[0],VVVV.PinTypes.Value),e=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),p=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==p[c]&&(p[c]=new VVVV.Types.CanvasRenderState),p[c].copy_attributes(b.getValue(c)),p[c].shadowOffsetX=h.getValue(c),
p[c].shadowOffsetY=m.getValue(c),p[c].shadowBlur=f.getValue(c),a.getValue(c).copy_to(p[c].shadowColor),e.setValue(c,p[c]);e.setSliceCount(d)}};VVVV.Nodes.ShadowCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendCanvas=function(c,d){this.constructor(c,"Blend (Canvas VVVVjs RenderState)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Mode",["source-over"],
VVVV.PinTypes.Enum);a.enumOptions="source-over source-out source-in source-atop destination-over destination-out destination-in destination-atop copy lighter xor".split(" ");var h=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),m=[];this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==m[c]&&(m[c]=new VVVV.Types.CanvasRenderState),m[c].copy_attributes(b.getValue(c)),m[c].blendMode=a.getValue(c),h.setValue(c,m[c]);h.setSliceCount(d)}};VVVV.Nodes.BlendCanvas.prototype=
new VVVV.Core.Node;VVVV.Nodes.LinearGradientCanvas=function(c,d){this.constructor(c,"LinearGradient (Canvas VVVVjs RenderState)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State In",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Start X",[0],VVVV.PinTypes.Value),h=this.addInputPin("Start Y",[0],VVVV.PinTypes.Value),m=this.addInputPin("End X",[0],VVVV.PinTypes.Value),f=this.addInputPin("End Y",[0],VVVV.PinTypes.Value),
e=this.addInputPin("Colors",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0"),new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],VVVV.PinTypes.Color),p=this.addInputPin("Color Positions",[0,1],VVVV.PinTypes.Value),g=this.addOutputPin("Render State Out",[],VVVV.PinTypes.CanvasRenderState),l=[];this.evaluate=function(){for(var d=Math.max(b.getSliceCount(),a.getSliceCount()),d=Math.max(d,h.getSliceCount()),d=Math.max(d,m.getSliceCount()),d=Math.max(d,f.getSliceCount()),c=0;c<d;c++){void 0==l[c]&&(l[c]=new VVVV.Types.CanvasRenderState);
l[c].copy_attributes(b.getValue(c));l[c].gradient={type:"linear"};l[c].gradient.startX=a.getValue(c);l[c].gradient.startY=h.getValue(c);l[c].gradient.endX=m.getValue(c);l[c].gradient.endY=f.getValue(c);l[c].gradient.colors=[];l[c].gradient.colorPositions=[];for(var k=Math.max(e.getSliceCount(),p.getSliceCount()),t=0;t<k;t++)l[c].gradient.colors.push(e.getValue(t)),l[c].gradient.colorPositions.push(p.getValue(t));g.setValue(c,l[c])}g.setSliceCount(d)}};VVVV.Nodes.LinearGradientCanvas.prototype=new VVVV.Core.Node;
VVVV.Nodes.ArcCanvas=function(c,d){this.constructor(c,"Arc (Canvas VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),h=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),m=this.addInputPin("Radius",[1],VVVV.PinTypes.Value),r=this.addInputPin("Start Angle",[0],VVVV.PinTypes.Value),q=this.addInputPin("End Angle",
[0.5],VVVV.PinTypes.Value),p=this.addInputPin("Draw Segment",[0],VVVV.PinTypes.Value),n=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),l=[],k=function(){this.transform=mat4.create();mat4.identity(this.transform);this.startAngle=0;this.endAngle=0.5;this.strokeColor=[1,1,1,1];this.lineWidth=1;this.renderState=e;this.clippingLayer=f;this.drawSegment=!1;this.draw=function(a,b){this.clippingLayer!=f&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],
this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.beginPath();b?g.apply(a):this.renderState.apply(a);this.drawSegment&&(a.moveTo(0,0),a.lineTo(Math.cos(this.startAngle)*this.radius,Math.sin(this.startAngle)*this.radius));a.arc(0,0,this.radius,this.startAngle,this.endAngle,!1);this.drawSegment&&(a.moveTo(Math.cos(this.endAngle)*this.radius,Math.sin(this.endAngle)*this.radius),a.lineTo(0,0));0<this.renderState.fillColor.rgba[3]&&a.fill();0<this.renderState.strokeColor.rgba[3]&&
a.stroke();this.clippingLayer!=f&&a.restore()}};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==l[c]&&(l[c]=new k),l[c].transform=a.getValue(c),l[c].radius=m.getValue(c),l[c].startAngle=2*r.getValue(c)*Math.PI,l[c].endAngle=2*q.getValue(c)*Math.PI,l[c].renderState=b.getValue(c),l[c].drawSegment=1==p.getValue(c),0>l[c].radius&&(l[c].radius=-l[c].radius,l[c].startAngle+=Math.PI,l[c].endAngle+=Math.PI),l[c].clippingLayer=h.getValue(c);for(c=0;c<l.length;c++)n.setValue(c,
l[c]);n.setSliceCount(d)}};VVVV.Nodes.ArcCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.RectangleCanvas=function(c,d){this.constructor(c,"Rectangle (Canvas VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),h=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),m=this.addInputPin("Width",[1],VVVV.PinTypes.Value),
r=this.addInputPin("Height",[1],VVVV.PinTypes.Value),q=this.addInputPin("Corner Radius",[0],VVVV.PinTypes.Value),p=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),n=[],l=function(){this.transform=mat4.create();mat4.identity(this.transform);this.renderState=e;this.clippingLayer=f;this.draw=function(a,b){this.clippingLayer!=f&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],
this.transform[12],this.transform[13]);a.beginPath();b?g.apply(a):this.renderState.apply(a);var d=this.width/2,c=d-this.cornerRadius,h=this.height/2,m=h-this.cornerRadius,r=-d,e=-c,q=-h,l=-m;a.moveTo(e,q);a.lineTo(c,q);a.arc(c,l,this.cornerRadius,1.5*Math.PI,0,!1);a.lineTo(d,m);a.arc(c,m,this.cornerRadius,0,0.5*Math.PI,!1);a.lineTo(e,h);a.arc(e,m,this.cornerRadius,0.5*Math.PI,Math.PI,!1);a.lineTo(r,l);a.arc(e,l,this.cornerRadius,Math.PI,1.5*Math.PI,!1);a.closePath();0<this.renderState.fillColor.rgba[3]&&
a.fill();0<this.renderState.strokeColor.rgba[3]&&a.stroke();this.clippingLayer!=f&&a.restore()}};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==n[c]&&(n[c]=new l),n[c].transform=a.getValue(c),n[c].width=m.getValue(c),n[c].height=r.getValue(c),n[c].cornerRadius=q.getValue(c),n[c].renderState=b.getValue(c),n[c].clippingLayer=h.getValue(c);for(c=0;c<n.length;c++)p.setValue(c,n[c]);p.setSliceCount(d)}};VVVV.Nodes.RectangleCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.TextCanvas=
function(c,d){this.constructor(c,"Text (Canvas VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),a=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),h=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),m=this.addInputPin("Text",["VVVV.js"],VVVV.PinTypes.String),r=this.addInputPin("Font",["10px sans-serif"],VVVV.PinTypes.String),q=this.addInputPin("Align",
["start"],VVVV.PinTypes.Enum);q.enumOptions=["start","left","end","right","center"];var p=this.addInputPin("Baseline",["alphabetic"],VVVV.PinTypes.Enum);p.enumOptions="top hanging middle alphabetic ideographic bottom".split(" ");var n=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),l=[],k=function(){this.transform=mat4.create();mat4.identity(this.transform);this.text="VVVV.js";this.font="sans-serif";this.align="start";this.baseline="top";this.renderState=e;this.clippingLayer=f;this.draw=function(a,
b){this.clippingLayer!=f&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();a.save();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.scale(0.01,-0.01);a.font="100px "+this.font;a.textAlign=this.align;a.textBaseline=this.baseline;b?g.apply(a):this.renderState.apply(a);0<this.renderState.fillColor.rgba[3]&&a.fillText(this.text,0,0);0<this.renderState.strokeColor.rgba[3]&&a.strokeText(this.text,
0,0);a.restore();this.clippingLayer!=f&&a.restore()}};this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),d=0;d<c;d++)void 0==l[d]&&(l[d]=new k),l[d].transform=a.getValue(d),l[d].text=m.getValue(d),l[d].font=r.getValue(d),l[d].align=q.getValue(d),l[d].baseline=p.getValue(d),l[d].renderState=b.getValue(d),l[d].clippingLayer=h.getValue(d);for(d=0;d<l.length;d++)n.setValue(d,l[d]);n.setSliceCount(c)}};VVVV.Nodes.TextCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.BezierCurveCanvas=function(c,
d){function b(a,b){a.x.splice(b);a.y.splice(b);a.c1x.splice(b);a.c1y.splice(b);a.c2x.splice(b);a.c2y.splice(b)}this.constructor(c,"BezierCurve (Canvas VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var a=this.addInputPin("Render State",[],VVVV.PinTypes.CanvasRenderState),h=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),m=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),r=this.addInputPin("X",[0],VVVV.PinTypes.Value),
q=this.addInputPin("Y",[0],VVVV.PinTypes.Value),p=this.addInputPin("Control 1 X",[0],VVVV.PinTypes.Value),n=this.addInputPin("Control 1 Y",[0],VVVV.PinTypes.Value),l=this.addInputPin("Control 2 X",[0],VVVV.PinTypes.Value),k=this.addInputPin("Control 2 Y",[0],VVVV.PinTypes.Value),w=this.addInputPin("BinSize",[-1],VVVV.PinTypes.Value),y=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),t=[],x=function(){this.transform=mat4.create();mat4.identity(this.transform);this.x=[];this.y=[];this.c1x=[];
this.c1y=[];this.c2x=[];this.c2y=[];this.strokeColor=[1,1,1,1];this.lineWidth=1;this.fillColor=[1,1,1,1];this.renderState=e;this.clippingLayer=f;this.draw=function(a,b){if(!(1>this.x.length)){this.clippingLayer!=f&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());b?g.apply(a):this.renderState.apply(a);a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);a.beginPath();a.moveTo(this.x[0],this.y[0]);
for(var d=1;d<this.x.length;d++)a.bezierCurveTo(this.c1x[d-1]+this.x[d-1],this.c1y[d-1]+this.y[d-1],this.c2x[d]+this.x[d],this.c2y[d]+this.y[d],this.x[d],this.y[d]);0<this.renderState.fillColor.rgba[3]&&a.fill();0<this.renderState.strokeColor.rgba[3]&&a.stroke();this.clippingLayer!=f&&a.restore()}}};this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),c=0,f=0,e=0;e<d||0<w.getValue(0)&&(0<f||0<c%h.getSliceCount());e++)void 0==t[c]&&(t[c]=new x),0==f&&(t[c].renderState=a.getValue(c),t[c].transform=
h.getValue(c),t[c].clippingLayer=m.getValue(c)),t[c].x[f]=r.getValue(e),t[c].y[f]=q.getValue(e),t[c].c1x[f]=p.getValue(e),t[c].c1y[f]=n.getValue(e),t[c].c2x[f]=l.getValue(e),t[c].c2y[f]=k.getValue(e),f++,0<w.getValue(0)&&f>=w.getValue(c)&&(f<t[c].x.length&&b(t[c],f),c++,f=0);0>w.getValue(0)?f<t[c].x.length&&(b(t[c],f),t.splice(1)):t.splice(c);for(d=0;d<t.length;d++)y.setValue(d,t[d]);y.setSliceCount(t.length)}};VVVV.Nodes.BezierCurveCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.QuadCanvas=function(c,
d){this.constructor(c,"Quad (Canvas VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Clipping Layer",[],VVVV.PinTypes.CanvasLayer),h=this.addInputPin("Texture",[],VVVV.PinTypes.HTML5Texture),m=this.addInputPin("Color",[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")],VVVV.PinTypes.Color),e=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer),q=[],p=function(){this.transform=
mat4.create();this.clippingLayer=f;mat4.identity(this.transform);this.texture=VVVV.PinTypes.HTML5Texture.defaultValue();this.color=[1,1,1,1];this.draw=function(a,b){this.clippingLayer!=f&&(a.save(),this.clippingLayer.draw(a,!0),a.clip());a.restoreView();this.transform&&a.transform(this.transform[0],this.transform[1],this.transform[4],this.transform[5],this.transform[12],this.transform[13]);"Empty Texture"!=this.texture?this.texture.loaded&&(a.globalAlpha=this.color[3],a.save(),a.translate(-0.5,0.5),
this.texture.videoWidth?a.scale(1/this.texture.videoWidth,-1/this.texture.videoHeight):a.scale(1/this.texture.width,-1/this.texture.height),a.drawImage(this.texture,0,0),a.restore(),a.fillStyle="rgba(0, 0, 0, .001)",a.fillRect(-0.5,-0.5,1,1),a.globalAlpha=1):(a.fillStyle="rgba("+parseInt(255*this.color.rgba[0])+", "+parseInt(255*this.color.rgba[1])+", "+parseInt(255*this.color.rgba[2])+", "+this.color.rgba[3]+")",a.fillRect(-0.5,-0.5,1,1));this.clippingLayer!=f&&a.restore()}};this.evaluate=function(){for(var d=
this.getMaxInputSliceCount(),c=0;c<d;c++)void 0==q[c]&&(q[c]=new p),q[c].transform=b.getValue(c),q[c].texture=h.getValue(c),q[c].color=m.getValue(c),q[c].clippingLayer=a.getValue(c);for(c=0;c<q.length;c++)e.setValue(c,q[c]);e.setSliceCount(d)}};VVVV.Nodes.QuadCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.GroupCanvas=function(c,d){this.constructor(c,"Group (Canvas VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInvisiblePin("Layer Count",
[2],VVVV.PinTypes.Value),a=[],h=this.addOutputPin("Layer",[],VVVV.PinTypes.CanvasLayer);this.initialize=function(){var d=Math.max(2,b.getValue(0));VVVV.Helpers.dynamicPins(this,a,d,function(a){return this.addInputPin("Layer "+(a+1),[],VVVV.PinTypes.CanvasLayer)})};this.evaluate=function(){b.pinIsChanged()&&this.initialize();for(var d=0,c=a.length,e,p=0;p<c;p++)if(a[p].isConnected()){e=a[p].getSliceCount();for(var g=0;g<e;g++)h.setValue(d++,a[p].getValue(g))}0<d?h.setSliceCount(d):(h.setValue(0,f),
h.setSliceCount(1))}};VVVV.Nodes.GroupCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.RendererCanvas=function(c,d){function b(a){function b(d){switch(d.which){case 1:VVVV.MousePositions._all.lb[0]=0;VVVV.MousePositions[a.id].lb[0]=0;break;case 2:VVVV.MousePositions._all.mb[0]=0;VVVV.MousePositions[a.id].mb[0]=0;break;case 3:VVVV.MousePositions._all.rb[0]=0,VVVV.MousePositions[a.id].rb[0]=0}}function d(a,b){for(var c=a.originalEvent.changedTouches.length;c--;){var h=2*(a.originalEvent.changedTouches[c].pageX-
k(b).offset().left)/k(b).width()-1,m=-(2*(a.originalEvent.changedTouches[c].pageY-k(b).offset().top)/k(b).height()-1);VVVV.MousePositions._all.x[a.originalEvent.changedTouches[c].identifier]=VVVV.MousePositions[b.id].x[a.originalEvent.changedTouches[c].identifier]=h;VVVV.MousePositions._all.y[a.originalEvent.changedTouches[c].identifier]=VVVV.MousePositions[b.id].y[a.originalEvent.changedTouches[c].identifier]=m}}k(a).detach("mousemove");k(a).detach("mousedown");k(a).detach("mouseup");VVVV.MousePositions[a.id]=
{x:[0],y:[0],wheel:[0],lb:[0],mb:[0],rb:[0]};k(a).mousemove(function(b){var d=2*(b.pageX-k(this).offset().left)/k(this).width()-1;b=-(2*(b.pageY-k(this).offset().top)/k(this).height()-1);VVVV.MousePositions._all.x[0]=d;VVVV.MousePositions._all.y[0]=b;VVVV.MousePositions[a.id].x[0]=d;VVVV.MousePositions[a.id].y[0]=b});k(a).bind("mousewheel",function(b){b=b.originalEvent.wheelDelta/120;VVVV.MousePositions[a.id].wheel[0]+=b;VVVV.MousePositions._all.wheel[0]+=b});k(a).bind("DOMMouseScroll",function(b){b=
-b.originalEvent.detail/3;VVVV.MousePositions[a.id].wheel[0]+=b;VVVV.MousePositions._all.wheel[0]+=b});k(a).mousedown(function(d){switch(d.which){case 1:VVVV.MousePositions._all.lb[0]=1;VVVV.MousePositions[a.id].lb[0]=1;break;case 2:VVVV.MousePositions._all.mb[0]=1;VVVV.MousePositions[a.id].mb[0]=1;break;case 3:VVVV.MousePositions._all.rb[0]=1,VVVV.MousePositions[a.id].rb[0]=1}k(document).unbind("mouseup",b);k(document).mouseup(b)});k(a).bind("touchstart",function(b){for(var c=b.originalEvent.changedTouches.length;c--;)VVVV.MousePositions._all.lb[b.originalEvent.changedTouches[c].identifier]=
VVVV.MousePositions[a.id].lb[b.originalEvent.changedTouches[c].identifier]=1;d(b,this)});k(a).bind("touchend",function(b){for(var d=b.originalEvent.changedTouches.length;d--;)VVVV.MousePositions._all.lb[b.originalEvent.changedTouches[d].identifier]=VVVV.MousePositions[a.id].lb[b.originalEvent.changedTouches[d].identifier]=0});k(a).bind("touchmove",function(a){d(a,this);a.preventDefault()})}this.constructor(c,"Renderer (Canvas VVVVjs)",d);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_nil=!1;var a=this.addInputPin("Layers",[],VVVV.PinTypes.CanvasLayer);this.addInputPin("Clear",[1],VVVV.PinTypes.Value);var h=this.addInputPin("Background Color",[new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],VVVV.PinTypes.Color),m=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),f=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),q=this.addInputPin("View",[],VVVV.PinTypes.Transform),p=this.addOutputPin("Canvas Out",[],VVVV.PinTypes.CanvasGraphics),
g,l,u,w=[0,0,0,1],y,t=mat4.create(),x;this.getContext=function(){var a=this.invisiblePins["Descriptive Name"].getValue(0);if((a=k(a).get(0))&&"CANVAS"==a.nodeName)y=a;else{var d=parseInt(m.getValue(0)),c=parseInt(f.getValue(0));y=k('<canvas width="'+(0<d?d:512)+'" height="'+(0<c?c:512)+'" id="vvvv-js-generated-renderer-'+(new Date).getTime()+'" class="vvvv-js-generated-renderer"></canvas>');a||(a="body");k(a).append(y);y=y.get(0)}l=y.width;u=y.height;y&&y.getContext&&(b(y),g=y.getContext("2d"),y.ctx=
g,g.restoreView=function(){g.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])})};this.destroy=function(){k(y).remove()};this.evaluate=function(){this.invisiblePins["Descriptive Name"].pinIsChanged()&&(k(y).hasClass("vvvv-js-generated-renderer")&&k(y).remove(),this.getContext());if(g){if(m.pinIsChanged()||f.pinIsChanged()){var b=parseInt(m.getValue(0)),d=parseInt(f.getValue(0));0<b&&(l=b,k(y).attr("width",l));0<d&&(u=d,k(y).attr("height",u));x=mat4.create([l/2,0,0,0,0,-u/2,0,0,0,0,1,0,l/2,u/2,0,1]);q.getValue(0)&&
mat4.multiply(x,q.getValue(0),t)}h.pinIsChanged()&&void 0!=h.getValue(0)&&(b=h.getValue(0),w[0]=parseInt(255*b.rgba[0]),w[1]=parseInt(255*b.rgba[1]),w[2]=parseInt(255*b.rgba[2]),w[3]=b.rgba[3]);e.apply(g);g.setTransform(1,0,0,1,0,0);1>w[3]&&g.clearRect(0,0,l,u);g.fillStyle="rgba("+w[0]+","+w[1]+","+w[2]+","+w[3]+")";g.fillRect(0,0,l,u);q.pinIsChanged()&&mat4.multiply(x,q.getValue(0),t);g.restoreView();if(a.isConnected())for(b=0;b<a.getSliceCount();b++)void 0!=a.getValue(b)&&a.getValue(b).draw(g);
p.setValue(0,y);y.loaded=!0}}};VVVV.Nodes.RendererCanvas.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Color={typeName:"Color",reset_on_disconnect:!1,defaultValue:function(){return new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")},primitive:!0};VVVV.Nodes.RGBJoin=function(e,g){this.constructor(e,"RGB (Color Join)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Red",[1],VVVV.PinTypes.Value),c=this.addInputPin("Green",[1],VVVV.PinTypes.Value),d=this.addInputPin("Blue",[1],VVVV.PinTypes.Value),
b=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[],VVVV.PinTypes.Color),h=[];this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),e=0;e<m;e++)h[e]||(h[e]=new VVVV.Types.Color("0.0,0.0,0.0,0.0")),h[e].rgba[0]=f.getValue(e)||0,h[e].rgba[1]=c.getValue(e)||0,h[e].rgba[2]=d.getValue(e)||0,h[e].rgba[3]=b.getValue(e)||0,a.setValue(e,h[e]);h.length=m;a.setSliceCount(m)}};VVVV.Nodes.RGBJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.HSVJoin=function(e,g){this.constructor(e,
"HSV (Color Join)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Hue",[0.33],VVVV.PinTypes.Value),c=this.addInputPin("Saturation",[0],VVVV.PinTypes.Value),d=this.addInputPin("Value",[1],VVVV.PinTypes.Value),b=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[],VVVV.PinTypes.Color),h=[],m,r,q,p;this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=0;g<e;g++)m=f.getValue(g),
r=c.getValue(g),q=d.getValue(g),p=b.getValue(g),h[g]||(h[g]=new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0")),h[g].setHSV(m,r,q),h[g].rgba[3]=p,a.setValue(g,h[g]);h.length=e;a.setSliceCount(e)}};VVVV.Nodes.HSVJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxColor=function(e,g){this.constructor(e,"IOBox (Color)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Color Input",[new VVVV.Types.Color("0.0, 1.0, 0.0, 1.0")],
VVVV.PinTypes.Color),c=this.addOutputPin("Color Output",[],VVVV.PinTypes.Color);this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),b=0;b<d;b++)c.setValue(b,f.getValue(b));c.setSliceCount(d)}};VVVV.Nodes.IOBoxColor.prototype=new VVVV.Core.Node;VVVV.Nodes.SetAlphaColor=function(e,g){this.constructor(e,"SetAlpha (Color)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!1;var f=this.addInputPin("Input",[new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0")],VVVV.PinTypes.Color),c=this.addInputPin("Alpha",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[],VVVV.PinTypes.Color),b=[];this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++){var m=f.getValue(h),e=c.getValue(h);b[h]||(b[h]=new VVVV.Types.Color("0.0, 0.0, 0.0, 0.0"));b[h].rgba[0]=m.rgba[0];b[h].rgba[1]=m.rgba[1];b[h].rgba[2]=m.rgba[2];b[h].rgba[3]=e;d.setValue(h,b[h])}b.length=a;d.setSliceCount(a)}};
VVVV.Nodes.SetAlphaColor.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchColorInput=function(e,g){this.constructor(e,"Switch (Color Input)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),c=[];c[0]=this.addInputPin("Input 1",[],VVVV.PinTypes.Color);c[1]=this.addInputPin("Input 2",[],VVVV.PinTypes.Color);var d=this.addOutputPin("Output",[],VVVV.PinTypes.Color);this.addInvisiblePin("Input Count",
[2],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)d.setValue(a,c[Math.round(Math.abs(f.getValue(a)))%c.length].getValue(a));d.setSliceCount(b)}};VVVV.Nodes.SwitchColorInput.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.Abs=function(e,g){this.constructor(e,"Abs (Complex)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input Real",[0],VVVV.PinTypes.Value),c=this.addInputPin("Input Imagiary",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)d.setValue(a,Math.sqrt(Math.pow(f.getValue(a),2)+Math.pow(c.getValue(a),
2)));d.setSliceCount(b)}};VVVV.Nodes.Abs.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.Integrate=function(e,g){this.constructor(e,"Integrate (Differential)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=this.addInputPin("Position In",[0],VVVV.PinTypes.Value),c=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Position Out",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Velocity Out",[0],VVVV.PinTypes.Value),a=[];this.evaluate=function(){dt=this.parentPatch.mainloop.deltaT/
1E3;for(var h=this.getMaxInputSliceCount(),m=0;m<h;m++){void 0==a[m]&&(a[m]=0);var e=f.getValue(m);a[m]+=e*dt;0.5<=c.getValue(m)&&(a[m]=0);d.setValue(m,a[m]);b.setValue(m,e)}d.setSliceCount(h);b.setSliceCount(h);a.splice(h)}};VVVV.Nodes.Integrate.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.String2Enum=function(e,g){this.constructor(e,"String2Enum (Enumerations)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Validation check does not work"]};var f=this.addInputPin("String Value",[],VVVV.PinTypes.String),c=this.addOutputPin("Enum",[],VVVV.PinTypes.Enum);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),b=0;b<d;b++)c.setValue(b,f.getValue(b));c.setSliceCount(d)}};VVVV.Nodes.String2Enum.prototype=
new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Types.HTMLLayer=function(f){this.tagName=f;this.styles={};this.attributes={};this.tagName?(this.element=k("<"+this.tagName+">"),this.element.data("vvvvjslayer",this)):this.element=void 0;this.children=[e];this.parent=e;this.text="";this.position=0;this.style=g;this.set_style_properties={};this.setText=function(c){this.element&&(this.text=c,c=k(this.element),0<c.contents().length&&3==c.contents().first()[0].nodeType?c.contents().first()[0].data=this.text:c.prepend(document.createTextNode(this.text)))};
this.setAttribute=function(c,d){this.element&&this.attributes[c]!=d&&(this.attributes[c]=d,this.element.attr(c,d))};this.setStyle=function(c){if(this.element){this.style=c;for(var d in this.set_style_properties)!0!=this.set_style_properties[d]||this.style.style_properties[d]||(this.element.css(d,""),this.set_style_properties[d]=!1);this.style.apply(this)}};this.setParent=function(c){!this.element||(this.parent.element&&c.element&&this.parent.element[0]==c.element[0]||void 0==this.parent.element&&
void 0==c.element&&0!=this.element.parent().length)||(this.parent=c,this.parent.tagName?this.parent.element[0]!=this.element[0].parentElement&&this.parent.element.append(this.element):this.element[0].parentElement!=document.body&&k("body").append(this.element))};this.changeTagName=function(c){this.element&&this.tagName!=c&&(this.tagName=c,c=k("<"+this.tagName+">"),this.element.before(c),this.element.contents().detach().appendTo(c),this.element.remove(),this.element=c,this.style.apply(this))}};var e=
new VVVV.Types.HTMLLayer;VVVV.PinTypes.HTMLLayer={typeName:"HTMLLayer",reset_on_disconnect:!0,defaultValue:function(){return e}};VVVV.Types.HTMLStyle=function(){this.style_properties={};this.inherited_properties={};this.set_properties={};this.apply=function(f){var c=k(f.element),d;for(d in this.inherited_properties)c.css(d,this.inherited_properties[d]),f.set_style_properties[d]=!0;for(d in this.style_properties)c.css(d,this.style_properties[d]),f.set_style_properties[d]=!0};this.copy_properties=function(f){for(var c in f.style_properties)this.inherited_properties[c]=
f.style_properties[c];for(c in f.inherited_properties)this.inherited_properties[c]=f.inherited_properties[c];for(c in this.inherited_properties)f.style_properties[c]||f.inherited_properties[c]||delete this.inherited_properties[c]}};var g=new VVVV.Types.HTMLStyle;VVVV.PinTypes.HTMLStyle={typeName:"HTMLStyle",reset_on_disconnect:!0,defaultValue:function(){return g}};[{nodename:"Element",tagname:"div",pins:[],dynamic:!0},{nodename:"Link",tagname:"a",pins:[{name:"href",type:VVVV.PinTypes.String,value:"#",
attribute:!0}]},{nodename:"Image",tagname:"img",pins:[{name:"src",type:VVVV.PinTypes.String,value:"",attribute:!0}]},{nodename:"TextInput",tagname:"input type='text'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:"",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"Checkbox",tagname:"input type='checkbox'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0,attribute:!0},{name:"value",value:"1",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"RadioButton",
tagname:"input type='radio'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:"1",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"Button",tagname:"input type='button'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:"Push me",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"RangeSlider",tagname:"input type='range'",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0},{name:"value",value:0,type:VVVV.PinTypes.Value,
attribute:!0},{name:"min",value:0,type:VVVV.PinTypes.Value,attribute:!0},{name:"max",value:10,type:VVVV.PinTypes.Value,attribute:!0},{name:"step",value:1,type:VVVV.PinTypes.Value,attribute:!0}]},{nodename:"SelectBox",tagname:"select",pins:[{name:"name",value:"",type:VVVV.PinTypes.String,attribute:!0}]},{nodename:"SelectOption",tagname:"option",pins:[{name:"value",value:"",type:VVVV.PinTypes.String,attribute:!0}]}].forEach(function(f){VVVV.Nodes[f.nodename+"HTML"]=function(c,d){this.constructor(c,
f.nodename+" (HTML)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInvisiblePin("Attribute Names",[""],VVVV.PinTypes.String),a=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),h="",m=void 0;f.dynamic?m=this.addInputPin("Tag Name",["div"],VVVV.PinTypes.String):h=f.tagname;for(var e=this.addInputPin("Parent",[],VVVV.PinTypes.HTMLLayer),q=this.addInputPin("Text",[""],VVVV.PinTypes.String),g=[],n=[],l=0;l<f.pins.length;l++)f.pins[l].type&&
!0==f.pins[l].attribute?n.push(this.addInputPin(f.pins[l].name,[f.pins[l].value],f.pins[l].type)):this.addInputPin(f.pins[l].name,[f.pins[l].value],f.pins[l].type);var k=this.addOutputPin("Layers Out",[],VVVV.PinTypes.HTMLLayer),w=[];this.initialize=function(){for(var a=[],d=RegExp(/([a-z]+)/g),c;c=d.exec(b.getValue(0));)a.push(c[0]);for(d=0;d<a.length;d++)this.inputPins[a[d]]?this.inputPins[a[d]].unvalidated&&(g.push(this.inputPins[a[d]]),c=this.inputPins[a[d]].values.slice(),this.inputPins[a[d]].setType(VVVV.PinTypes.String),
this.inputPins[a[d]].isConnected()||(this.inputPins[a[d]].values=c)):g.push(this.addInputPin(a[d],[""],VVVV.PinTypes.String));for(d=0;d<g.length;d++)if(0>a.indexOf(g[d].pinname))for(this.removeInputPin(g[d].pinname),c=0;c<w.length;c++)delete w[c].attributes[g[d].pinname]};this.evaluate=function(){b.pinIsChanged()&&this.initialize();for(var d=this.getMaxInputSliceCount(),c=0;c<d;c++){var f=!1;void 0==w[c]&&(w[c]=new VVVV.Types.HTMLLayer(m?m.getValue(c):h),f=!0);m&&w[c].tagName!=m.getValue(c)&&w[c].changeTagName(m.getValue(c));
(f||q.pinIsChanged())&&w[c].setText(q.getValue(c));(f||e.pinIsChanged())&&w[c].setParent(e.getValue(c));for(var l=0;l<g.length;l++)(f||g[l].pinIsChanged())&&w[c].setAttribute(g[l].pinname,g[l].getValue(c));for(l=0;l<n.length;l++)(f||n[l].pinIsChanged())&&w[c].setAttribute(n[l].pinname,n[l].getValue(c));(f||a.pinIsChanged())&&w[c].setStyle(a.getValue(c));k.setValue(c,w[c])}for(c=d;c<w.length;c++)w[c].element.remove();w.length=d;k.setSliceCount(d)};this.destroy=function(){for(var a=0;a<w.length;a++)w[a].element.remove()}};
VVVV.Nodes[f.nodename+"HTML"].prototype=new VVVV.Core.Node});VVVV.Nodes.GroupHTML=function(f,c){this.constructor(f,"Group (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Parent",[],VVVV.PinTypes.HTMLLayer),b=this.addInvisiblePin("Output Count",[2],VVVV.PinTypes.Value),a=[];this.initialize=function(){for(var c=Math.max(2,b.getValue(0)),d=a.length;d<c;d++)a.push(this.addOutputPin("Element Slot "+(d+1),[],VVVV.PinTypes.HTMLLayer));
for(d=a.length-1;d>=c;d--)this.removeOutputPin(a[d].pinname);a.length=c};this.evaluate=function(){b.pinIsChanged()&&(this.initialize(),this.parentPatch.afterUpdate());for(var c=d.getSliceCount(),m=0;m<c;m++)for(var f=0;f<a.length;f++){var e=a[f].values[m];e||(e=new VVVV.Types.HTMLLayer("span"));e.setParent(d.getValue(m));a[f].setValue(m,e)}for(m=0;m<a.length;m++){for(f=a[m].values.length-1;f>=c;f--)a[m].values[f].element.remove();a[m].setSliceCount(c)}};this.destroy=function(){for(var b=0;b<a.length;b++)for(var c=
0;c<a[b].values.length;c++)a[b].values[c].element.remove()}};VVVV.Nodes.GroupHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.GetElementHTML=function(f,c){this.constructor(f,"GetElement (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Selector",[""],VVVV.PinTypes.String),b=this.addInputPin("Parent",[],VVVV.PinTypes.HTMLLayer);this.addInputPin("Refresh",[0],VVVV.PinTypes.Value);var a=this.addOutputPin("Layers Out",[],VVVV.PinTypes.HTMLLayer),
h=this.addOutputPin("Bin Size",[-1],VVVV.PinTypes.Value),m=[];this.evaluate=function(){this.getMaxInputSliceCount();var c;c=b.isConnected()?b.getValue(0).element:k(document);for(var f=d.getSliceCount(),e=0,g=0;g<f;g++){var l=d.getValue(g);if(""!=l){var u=0;c.find(l).each(function(){void 0==m[e]&&(m[e]=new VVVV.Types.HTMLLayer);m[e].tagName=k(this).prop("tagName");m[e].element=k(this);a.setValue(e,m[e]);e++;u++});h.setValue(g,u)}}m.length=e;a.setSliceCount(e);h.setSliceCount(f)}};VVVV.Nodes.GetElementHTML.prototype=
new VVVV.Core.Node;VVVV.Nodes.GetPositionHTML=function(f,c){function d(b,c){var d;d=a.getValue(c)==a.enumOptions[0]||a.getValue(c)==a.enumOptions[1]?k(b).offset():k(b).position();a.getValue(c)==a.enumOptions[1]&&(d.left=2*(d.left/window.outerWidth)-1,d.top=-1*(2*(d.top/window.outerHeight)-1));h.setValue(c,d.left);m.setValue(c,d.top)}this.constructor(f,"GetPosition (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Element",
[],VVVV.PinTypes.HTMLLayer),a=this.addInputPin("Space",["Document Pixels"],VVVV.PinTypes.Enum);a.enumOptions=["Document Pixels","Document [-1, +1]","Parent Element Pixels"];var h=this.addOutputPin("X",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),e=[],g=[];this.evaluate=function(){var a=this.getMaxInputSliceCount();if(b.isConnected()&&""!=b.getValue(0).tagName){for(var c=0;c<a;c++)void 0!=g[c]&&g[c]!=b.getValue(c).element[0]&&(e[c].disconnect(),e[c]=void 0),void 0==e[c]&&
(function(a){e[a]=new MutationObserver(function(b){d(g[a],a)})}(c),g[c]=b.getValue(c).element[0],k(g[c]).parents().each(function(){e[c].observe(this,{attributes:!0,attributeFilter:["style"]})}),e[c].observe(g[c],{attributes:!0,attributeFilter:["style"]})),d(g[c],c);e.length=a;g.length=a;h.setSliceCount(a);m.setSliceCount(a)}else e.forEach(function(a){a.disconnect()}),e.length=0,g.length=0,h.setValue(0,0),m.setValue(0,0),h.setSliceCount(1),m.setSliceCount(1)};this.destroy=function(){e.forEach(function(a){a.disconnect()})}};
VVVV.Nodes.GetPositionHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.PositionHTML=function(f,c){this.constructor(f,"Position (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),b=this.addInputPin("Absolute Position",[1],VVVV.PinTypes.Value),a=this.addInputPin("X",[0],VVVV.PinTypes.Value),h=this.addInputPin("Y",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Style Out",[],VVVV.PinTypes.HTMLStyle),
e=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),f=0;f<c;f++)e[f]||(e[f]=new VVVV.Types.HTMLStyle),e[f].copy_properties(d.getValue(f)),0.5<=b.getValue(f)?(e[f].style_properties.position="absolute",e[f].style_properties.left=a.getValue(f)+"px",e[f].style_properties.top=h.getValue(f)+"px",delete e[f].style_properties["margin-left"],delete e[f].style_properties["margin-right"]):(delete e[f].style_properties.position,delete e[f].style_properties.left,delete e[f].style_properties.top,
e[f].style_properties["margin-left"]=a.getValue(f)+"px",e[f].style_properties["margin-top"]=h.getValue(f)+"px"),m.setValue(f,e[f]);e.length=c;m.setSliceCount(c)}};VVVV.Nodes.PositionHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.TransformHTML=function(f,c){this.constructor(f,"Transform (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),b=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),
a=this.addOutputPin("Style Out",[],VVVV.PinTypes.HTMLStyle),h=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),f,e,g,n=0;n<c;n++){h[n]||(h[n]=new VVVV.Types.HTMLStyle);h[n].copy_properties(d.getValue(n));f="matrix3d(";g=b.getValue(n);for(e=0;15>e;e++)f+=g[e]+",";f+=g[e]+")";h[n].style_properties.transform=f;a.setValue(n,h[n])}h.length=c;a.setSliceCount(c)}};VVVV.Nodes.TransformHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.GetValueHTML=function(f,c){this.constructor(f,"GetValue (HTML)",
c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),b=this.addOutputPin("Output",[0],VVVV.PinTypes.String),a=[],h=[],m=[];this.evaluate=function(){var c=this.getMaxInputSliceCount(),f=this;if(d.isConnected()&&""!=d.getValue(0).tagName){for(var e=0;e<c;e++)void 0!=h[e]&&h[e]!=d.getValue(e).element[0]&&(k(h[e]).unbind("change input paste keyup",a[e]),a[e]=void 0),void 0==a[e]&&(h[e]=d.getValue(e).element[0],
function(b){a[b]=function(a){a="";"SELECT"==k(this).prop("tagName")?a=k(this).find("option:selected").attr("value"):"INPUT"==k(this).prop("tagName")&&"checkbox"==k(this).prop("type")?a=k(this).is(":checked")?k(this).attr("value"):"":"INPUT"==k(this).prop("tagName")&&"radio"==k(this).prop("type")?a=k(this).is(":checked")?k(this).attr("value"):"":"INPUT"==k(this).prop("tagName")&&(a=k(this).val());void 0==a&&(a="");m.push({sliceIdx:b,value:a});f.dirty=!0}}(e),k(h[e]).bind("change input paste keyup",
a[e]),a[e].call(h[e]));a.length=c;h.length=c;b.setSliceCount(c)}else{for(e=0;e<h.length;e++)k(h[e]).unbind("change input paste keyup",a[e]);a.length=0;h.length=0;b.setValue(0,"");b.setSliceCount(1)}if(0<m.length){for(e=m.length;e--;)b.setValue(m[e].sliceIdx,m[e].value);m.length=0;f.dirty=!1}};this.destroy=function(){for(var b=0;b<h.length;b++)k(h[b]).unbind("change input paste keyup",a[b])}};VVVV.Nodes.GetValueHTML.prototype=new VVVV.Core.Node;[{name:"Event",code:"click",dynamic:!0},{name:"Click",
code:"click"},{name:"MouseDown",code:"mousedown"},{name:"MouseUp",code:"mouseup"},{name:"MouseOver",code:"mouseover"},{name:"MouseEnter",code:"mouseenter"},{name:"MouseLeave",code:"mouseleave"},{name:"Change",code:"change"},{name:"Focus",code:"focus"},{name:"Blur",code:"blur"}].forEach(function(f){VVVV.Nodes["On"+f.name+"HTML"]=function(c,d){this.constructor(c,"On"+f.name+" (HTML)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=
!0;var b=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),a="",h=void 0;f.dynamic?h=this.addInputPin("Event",["click"],VVVV.PinTypes.String):a=f.code;var m=this.addOutputPin("OnEvent",[0],VVVV.PinTypes.Value),e=[],g=[],p=[],n=[],l=!1;this.evaluate=function(){var c=this.getMaxInputSliceCount();if(b.isConnected()&&""!=b.getValue(0).tagName){for(var d=0;d<c;d++)h&&(a=h.getValue(d)),void 0==g[d]||g[d]==b.getValue(d).element[0]&&p[d]==a||(k(g[d]).unbind(p[d],e[d]),e[d]=void 0),void 0==e[d]&&(g[d]=
b.getValue(d).element[0],p[d]=a,function(a){e[a]=function(b){n.push(a);l=!1}}(d),k(g[d]).bind(p[d],e[d]),m.setValue(d,0));e.length=c;g.length=c;p.length=c;m.setSliceCount(c)}else{for(d=0;d<g.length;d++)k(g[d]).unbind(p[d],e[d]);e.length=0;g.length=0;m.setValue(0,0);m.setSliceCount(1)}if(l){for(d=m.getSliceCount();d--;)m.setValue(d,0);l=!1}if(0<n.length){for(d=n.length;d--;)m.setValue(n[d],1);n.length=0;l=!0}};this.destroy=function(){for(var a=0;a<e.length;a++)k(g[a]).unbind(p[a],e[a])}};VVVV.Nodes["On"+
f.name+"HTML"].prototype=new VVVV.Core.Node});VVVV.Nodes.StyleHTML=function(f,c){this.constructor(f,"Style (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),b=this.addInputPin("Property Name",[],VVVV.PinTypes.String),a=this.addInputPin("Property Value",[],VVVV.PinTypes.String),h=this.addOutputPin("Style Out",[],VVVV.PinTypes.HTMLStyle),m=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),
f=[],e=0;e<c;e++)m[e]||(m[e]=new VVVV.Types.HTMLStyle),m[e].copy_properties(d.getValue(e)),""!=b.getValue(e)&&(m[e].style_properties[b.getValue(e)]=a.getValue(e),f[e]||(f[e]={}),f[e][b.getValue(e)]=!0),h.setValue(e,m[e]);for(e=0;e<c;e++)for(stylename in m[e].style_properties)f[e][stylename]||delete m[e].style_properties[stylename];h.setSliceCount(c)}};VVVV.Nodes.StyleHTML.prototype=new VVVV.Core.Node;[{name:"Background",pins:[{name:"background-color",type:VVVV.PinTypes.Color,is_property:!0}]},{name:"Border",
pins:[{name:"border-width",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"border-color",type:VVVV.PinTypes.Color,is_property:!0},{name:"border-style",value:"solid",type:VVVV.PinTypes.Enum,enumOptions:["solid","dashed","dotted"],is_property:!0}]},{name:"Padding",pins:[{name:"padding-left",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"padding-top",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"padding-right",value:1,unit:"px",type:VVVV.PinTypes.Value,
is_property:!0},{name:"padding-bottom",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0}]},{name:"Margin",pins:[{name:"margin-left",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"margin-top",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"margin-right",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0},{name:"margin-bottom",value:1,unit:"px",type:VVVV.PinTypes.Value,is_property:!0}]},{name:"Font",pins:[{name:"color",type:VVVV.PinTypes.Color,is_property:!0},
{name:"font-family",value:"inherit",type:VVVV.PinTypes.String,is_property:!0},{name:"font-weight",value:"inherit",type:VVVV.PinTypes.Enum,is_property:!0,enumOptions:["inherit","normal","light","bold"]},{name:"text-decoration",value:"inherit",type:VVVV.PinTypes.Enum,is_property:!0,enumOptions:["inherit","none","underline","line-through"]}]},{name:"FontSize",pins:[{name:"font-size",value:12,unit:"px",type:VVVV.PinTypes.Value,is_property:!0}]}].forEach(function(f){VVVV.Nodes[f.name+"HTML"]=function(c,
d){this.constructor(c,f.name+" (HTML)",d);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};for(var b=this.addInputPin("Style In",[],VVVV.PinTypes.HTMLStyle),a=[],h=0;h<f.pins.length;h++){var m=[];f.pins[h].value&&m.push(f.pins[h].value);m=this.addInputPin(f.pins[h].name,m,f.pins[h].type);f.pins[h].unit&&(m.unit=f.pins[h].unit);if(f.pins[h].enumOptions){m.enumOptions=[];for(var e=0;e<f.pins[h].enumOptions.length;e++)m.enumOptions[e]=f.pins[h].enumOptions[e]}f.pins[h].is_property&&
a.push(m)}var g=this.addOutputPin("Style Out",[],VVVV.PinTypes.HTMLStyle),p=[],n=[];this.evaluate=function(){for(var c=this.getMaxInputSliceCount(),d=[],h=0;h<c;h++){p[h]||(p[h]=new VVVV.Types.HTMLStyle);p[h].copy_properties(b.getValue(h));for(var f=0;f<a.length;f++){var m;"Color"==a[f].typeName?(n[0]=parseInt(256*a[f].getValue(h).rgba[0]),n[1]=parseInt(256*a[f].getValue(h).rgba[1]),n[2]=parseInt(256*a[f].getValue(h).rgba[2]),n[3]=a[f].getValue(h).rgba[3],m="rgba("+n.join(",")+")"):m=a[f].getValue(h);
""!=m?(a[f].unit&&(m+=a[f].unit),p[h].style_properties[a[f].pinname]=m,d[h]||(d[h]={}),d[h][a[f].pinname]=!0):d[h]&&(d[h][a[f].pinname]=!1)}g.setValue(h,p[h])}for(h=0;h<c;h++)for(stylename in p[h].style_properties)d[h]&&!d[h][stylename]&&delete p[h].style_properties[stylename];g.setSliceCount(c)}};VVVV.Nodes[f.name+"HTML"].prototype=new VVVV.Core.Node});VVVV.Nodes.ApplyStyleHTML=function(f,c){this.constructor(f,"ApplyStyle (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],
compatibility_issues:[]};var d=this.addInputPin("Style",[],VVVV.PinTypes.HTMLStyle),b=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),c,f=0;f<a;f++)c=b.getValue(f),c.style=d.getValue(f),c.style.apply(c)}};VVVV.Nodes.ApplyStyleHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.GetTextHTML=function(f,c){function d(b,c){var d="";k(b).contents().each(function(){3==this.nodeType&&(d+=this.data)});a.setValue(c,d)}this.constructor(f,"GetText (HTML)",
c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),a=this.addOutputPin("Text",[""],VVVV.PinTypes.String),h=[],m=[];this.evaluate=function(){var c=this.getMaxInputSliceCount();if(b.isConnected()&&""!=b.getValue(0).tagName){for(var f=0;f<c;f++)void 0!=m[f]&&m[f]!=b.getValue(f).element[0]&&(h[f].disconnect(),h[f]=void 0),void 0==h[f]&&(function(a){h[a]=new MutationObserver(function(b){d(m[a],a)})}(f),
m[f]=b.getValue(f).element[0],h[f].observe(m[f],{childList:!0,characterData:!0})),d(m[f],f);h.length=c;m.length=c;a.setSliceCount(c)}else h.forEach(function(a){a.disconnect()}),h.length=0,m.length=0,a.setValue(0,""),a.setSliceCount(1)};this.destroy=function(){h.forEach(function(a){a.disconnect()})}};VVVV.Nodes.GetTextHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.SetTextHTML=function(f,c){this.constructor(f,"SetText (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};
var d=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),b=this.addInputPin("Text",[],VVVV.PinTypes.String);this.evaluate=function(){var a=d.getSliceCount();if(d.isConnected()&&""!=d.getValue(0).tagName)for(var c,f=0;f<a;f++)c=d.getValue(f).element,0<c.contents().length&&3==c.contents().first()[0].nodeType?c.contents().first()[0].data=b.getValue(0):c.prepend(document.createTextNode(b.getValue(0)))}};VVVV.Nodes.SetTextHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.GetAttributeHTML=function(f,c){function d(a,
b){for(var c=0;c<p[b].length;c++)m.setValue(n[b][c],k(g[b]).attr(p[b][c])||k(g[b]).prop(p[b][c])||"")}this.constructor(f,"GetAttribute (HTML)",c);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var b=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),a=this.addInputPin("Attribute Name",[""],VVVV.PinTypes.String),h=this.addInputPin("Attribute Bin Size",[-1],VVVV.PinTypes.Value),m=this.addOutputPin("Attribute Value",[""],VVVV.PinTypes.String),e=[],
g=[],p=[],n=[];this.evaluate=function(){var c=a.pinIsChanged()||h.pinIsChanged(),f=0,k=a.getSliceCount(),y=0<=h.getValue(0),t=b.getSliceCount();if(b.isConnected()&&""!=b.getValue(0).tagName){for(var x=0;x<t;x++)if(void 0==g[x]||g[x]==b.getValue(x).element[0]&&!c||(e[x].disconnect(),e[x]=void 0),void 0==e[x]){(function(a){e[a]=new MutationObserver(function(b){d(g[a],a)})})(x);g[x]=b.getValue(x).element[0];y&&(k=h.getValue(x));p[x]=[];n[x]=[];for(var v=0;v<k;v++)p[x].push(a.getValue(f)),n[x].push(f++);
e[x].observe(g[x],{attributes:!0,attributeFilter:p[x]});d(g[x],x);m.setSliceCount(f)}e.length=t;g.length=t;p.length=t;n.length=t}else e.forEach(function(a){a.disconnect()}),e.length=0,g.length=0,p.length=0,n.length=0,m.setValue(0,""),m.setSliceCount(1)};this.destroy=function(){e.forEach(function(a){a.disconnect()})}};VVVV.Nodes.GetAttributeHTML.prototype=new VVVV.Core.Node;VVVV.Nodes.SetAttributeHTML=function(f,c){this.constructor(f,"SetAttribute (HTML)",c);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};var d=this.addInputPin("Element",[],VVVV.PinTypes.HTMLLayer),b=this.addInputPin("Attribute Name",[""],VVVV.PinTypes.String),a=this.addInputPin("Attribute Value",[""],VVVV.PinTypes.String),h=this.addInputPin("Attribute BinSize",[-1],VVVV.PinTypes.Value);this.evaluate=function(){d.getSliceCount();if(d.isConnected()&&""!=d.getValue(0).tagName)for(var c=0,f=Math.max(b.getSliceCount(),a.getSliceCount()),e=0<=h.getValue(0),g=d.getSliceCount(),n,l=
0;l<g;l++){n=d.getValue(l).element;e&&(f=h.getValue(l));for(var k=0;k<f;k++)""!=b.getValue(c)&&(n.attr(b.getValue(c),a.getValue(c)),c++)}}};VVVV.Nodes.SetAttributeHTML.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.HTML5Texture={typeName:"HTML5Texture",reset_on_disconnect:!0,defaultValue:function(){return"Empty Texture"}};VVVV.Nodes.FileTextureCanvas=function(e,g){this.constructor(e,"FileTexture (HTML5 VVVVjs)",g);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=this.addInputPin("Filename",[],VVVV.PinTypes.String),c=this.addOutputPin("Texture Out",[],VVVV.PinTypes.HTML5Texture),d=this.addOutputPin("Width",[0],
VVVV.PinTypes.Value),b=this.addOutputPin("Height",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Up and Running",[0],VVVV.PinTypes.Value),h=[],m=!1;this.evaluate=function(){var e=this.getMaxInputSliceCount();if(f.pinIsChanged()){for(var g=0;g<e;g++){var p=VVVV.Helpers.prepareFilePath(f.getValue(g),this.parentPatch);0===p.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(p=VVVV.ImageProxyPrefix+encodeURI(p));if(void 0==h[g]||h[g].origSrc!=p)h[g]=new Image,h[g].loaded=!1,h[g].origSrc=p,h[g].onload=
function(a){return function(){m=h[a].loaded=!0}}(g),h[g].src=p,a.setValue(g,0),c.setValue(g,h[g])}h.length=e;c.setSliceCount(e);d.setSliceCount(e);b.setSliceCount(e);a.setSliceCount(e)}if(m){for(g=0;g<e;g++)c.setValue(g,h[g]),d.setValue(g,h[g].width),b.setValue(g,h[g].height),a.setValue(g,h[g].loaded?1:0);m=!1}}};VVVV.Nodes.FileTextureCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.FileStreamCanvas=function(e,g){this.constructor(e,"FileStream (HTML5 VVVVjs)",g);this.meta={authors:["Matthias Zauner"],
original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"],c=["HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","HAVE_CURRENT_DATA"],d=this.addInputPin("Play",[1],VVVV.PinTypes.Value),b=this.addInputPin("Loop",[0],VVVV.PinTypes.Value),a=this.addInputPin("Start Time",[0],VVVV.PinTypes.Value),h=this.addInputPin("End Time",[-1],VVVV.PinTypes.Value),m=this.addInputPin("Do Seek",[0],VVVV.PinTypes.Value),
r=this.addInputPin("Seek Position",[0],VVVV.PinTypes.Value),q=this.addInputPin("Filename",["http://html5doctor.com/demos/video-canvas-magic/video.ogg"],VVVV.PinTypes.String),p=this.addOutputPin("Video",[],this),n=this.addOutputPin("Audio",[],this),l=this.addOutputPin("Duration",[0],VVVV.PinTypes.Value),u=this.addOutputPin("Position",[0],VVVV.PinTypes.Value),w=this.addOutputPin("Video Width",[0],VVVV.PinTypes.Value),y=this.addOutputPin("Video Height",[0],VVVV.PinTypes.Value),t=this.addOutputPin("Network Status",
[""],VVVV.PinTypes.String),x=this.addOutputPin("Ready Status",[""],VVVV.PinTypes.String),v=[];this.evaluate=function(){var e=this.getMaxInputSliceCount();if(q.pinIsChanged())for(var g=0;g<e;g++){filename=VVVV.Helpers.prepareFilePath(q.getValue(g),this.parentPatch);if(void 0==v[g]){var z=k('<video style="display:none"><source src="" type=video/ogg></video>');k("body").append(z);v[g]=z[0];v[g].volume=0;z=function(a){return function(){}}(g);v[g].onprogress=z;v[g].oncanplay=z;v[g].oncanplaythrough=z}filename!=
v[g].currentSrc&&(k(v[g]).find("source").first().attr("src",filename),v[g].load(),0.5<d.getValue(g)?v[g].play():v[g].pause(),v[g].loaded=!0,p.setValue(g,v[g]),n.setValue(g,v[g]))}if(d.pinIsChanged())for(g=0;g<e;g++)0.5<d.getValue(g)?v[g].play():v[g].pause();if(m.pinIsChanged())for(g=0;g<e;g++)v[g%v.length].loaded&&0.5<=m.getValue(g)&&(v[g%v.length].currentTime=r.getValue(g),0.5<d.getValue(g)&&v[g].play());for(g=0;g<e;g++){if(!v[g].paused){p.setValue(g,v[g]);n.setValue(g,v[g]);l.getValue(g)!=v[g].duration&&
l.setValue(g,v[g].duration);u.setValue(g,v[g].currentTime);var z=h.getValue(g),B=a.getValue(g);v[g].currentTime<B&&(v[g].currentTime=B);if(v[g].currentTime>=v[g].duration||0<=z&&v[g].currentTime>=z)0.5<=b.getValue(g)?v[g].currentTime=B:v[g].pause()}if(v[g].videoWidth!=w.getValue(g)||v[g].videoHeight!=y.getValue(g))w.setValue(g,v[g].videoWidth),y.setValue(g,v[g].videoHeight);t.getValue(g)!=f[v[g].networkState]&&t.setValue(g,f[v[g].networkState]);x.getValue(g)!=c[v[g].readyState]&&x.setValue(g,c[v[g].readyState])}p.setSliceCount(e);
n.setSliceCount(e)}};VVVV.Nodes.FileStreamCanvas.prototype=new VVVV.Core.Node;VVVV.Nodes.AudioOutHTML5=function(e,g){this.constructor(e,"AudioOut (HTML5 VVVVjs)",g);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var f=this.addInputPin("Audio",[],this),c=this.addInputPin("Volume",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){var d=this.getMaxInputSliceCount();if(c.pinIsChanged())for(var b=0;b<d;b++)f.getValue(b).volume=Math.max(0,Math.min(1,c.getValue(b)))}};
VVVV.Nodes.AudioOutHTML5.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.HTTPGet=function(e,g){this.constructor(e,"HTTP (Network Get)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Doesnt handle get variables yet","Doesnt support proxies","No header output pin yet"]};this.auto_evaluate=!0;var f=this.addInputPin("URL",["http://localhost"],VVVV.PinTypes.String),c=this.addInputPin("Name",[""],VVVV.PinTypes.String),d=this.addInputPin("Value",[""],VVVV.PinTypes.String),b=this.addInputPin("Refresh",
[0],VVVV.PinTypes.Value),a=this.addOutputPin("Status",[""],VVVV.PinTypes.String),h=this.addOutputPin("Body",[""],VVVV.PinTypes.String),m=this.addOutputPin("Fail",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Success",[0],VVVV.PinTypes.Value),q,p,n,l=!1;this.evaluate=function(){this.getMaxInputSliceCount();var e=f.pinIsChanged()||c.pinIsChanged()||d.pinIsChanged()||b.pinIsChanged()&&1==b.getValue(0);1==r.getValue(0)&&r.setValue(0,0);1==m.getValue(0)&&m.setValue(0,0);l&&(h.setValue(0,q),a.setValue(0,
void 0),r.setValue(0,p),m.setValue(0,n),l=!1);e&&(void 0==f.getValue(0)?(h.setValue(0,""),a.setValue(0,"")):k.ajax({url:f.getValue(0),type:"get",dataType:"text",success:function(a,b,c){q=a;p=1;l=!0},error:function(a,b){q="";n=1;l=!0}}))}};VVVV.Nodes.HTTPGet.prototype=new VVVV.Core.Node;VVVV.Nodes.WebsocketClient=function(e,g){this.constructor(e,"Websocket (Network Client)",g);this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};this.auto_evaluate=!0;var f=
this.addInputPin("URL",["localhost"],VVVV.PinTypes.String),c=this.addInputPin("Port",[8006],VVVV.PinTypes.Value),d=this.addInputPin("Input",["Hello"],VVVV.PinTypes.String),b=this.addInputPin("DoSend",[0],VVVV.PinTypes.Value),a=this.addInputPin("Enabled",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[""],VVVV.PinTypes.String),m=this.addOutputPin("OnData",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Connected",[0],VVVV.PinTypes.Value),q=null,p=[];this.evaluate=function(){(0.5>a.getValue(0)||
f.pinIsChanged()||c.pinIsChanged())&&null!=q&&(q.close(),q=null);0.5<=a.getValue(0)&&null==q&&(q=new WebSocket("ws://"+f.getValue(0)+":"+c.getValue(0)),q.onopen=function(a){r.setValue(0,1)},q.onclose=function(a){r.setValue(0,0)},q.onmessage=function(a){p.push(a.data)});0<p.length?(h.setValue(0,p.shift()),m.setValue(0,1)):(h.setValue(0,""),m.setValue(0,0));0.5<=b.getValue(0)&&q&&q.send(d.getValue(0))}};VVVV.Nodes.WebsocketClient.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Node={typeName:"Node",reset_on_disconnect:!0,connectionChangedHandlers:{nodepin:function(){function e(c,d){for(var b in this.node.inputPins)if(this.pinname!=b&&this.node.inputPins[b].typeName==c.typeName&&"Node"!=this.node.inputPins[b].typeName&&this.node.inputPins[b].isConnected())return;for(b in this.node.outputPins)if(this.pinname!=b&&this.node.outputPins[b].typeName==c.typeName&&"Node"!=this.node.outputPins[b].typeName&&this.node.outputPins[b].isConnected())return;for(b in this.node.outputPins)if(this.node.outputPins[b].typeName==
c.typeName){this.node.outputPins[b].setType(d);this.node.outputPins[b].slavePin&&this.node.outputPins[b].slavePin.setType(d);for(var a=this.node.outputPins[b].links.length;a--;)this.node.outputPins[b].links[a].toPin.typeName!=d.typeName&&this.node.outputPins[b].links[a].toPin.connectionChanged()}for(b in this.node.inputPins)this.node.inputPins[b].typeName==c.typeName&&(this.node.inputPins[b].setType(d),this.node.inputPins[b].masterPin&&this.node.inputPins[b].masterPin.setType(d),this.pinname!=b&&
0<this.node.inputPins[b].links.length&&this.node.inputPins[b].links[0].fromPin.connectionChanged())}if(this.direction==VVVV.PinDirection.Input)if(this.isConnected()){var g;0<this.links.length?g=this.links[0].fromPin:this.masterPin&&(g=this.masterPin);e.call(this,VVVV.PinTypes.Node,VVVV.PinTypes[g.typeName])}else e.call(this,VVVV.PinTypes[this.typeName],VVVV.PinTypes.Node);else if(this.direction==VVVV.PinDirection.Output)if(this.isConnected()){var f;0<this.links.length?f=this.links[0].toPin:this.slavePin&&
(f=this.slavePin);e.call(this,VVVV.PinTypes.Node,VVVV.PinTypes[f.typeName])}else e.call(this,VVVV.PinTypes[this.typeName],VVVV.PinTypes.Node)}}};VVVV.Nodes.IOBoxNode=function(e,g){this.constructor(e,"IOBox (Node)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input Node",[],VVVV.PinTypes.Node),c=this.addOutputPin("Output Node",[],VVVV.PinTypes.Node);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),
b=0;b<d;b++)c.setValue(b,f.getValue(b));c.setSliceCount(d)}};VVVV.Nodes.IOBoxNode.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchNodeInput=function(e,g){this.constructor(e,"Switch (Node Input)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};this.auto_nil=!1;var f=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),d=[],b=this.addOutputPin("Output",[],
VVVV.PinTypes.Node);this.initialize=function(){for(var a=c.getValue(0),b=d.length;b<a;b++)d[b]=this.addInputPin("Input "+(b+1),[],VVVV.PinTypes.Node);d.length=a};this.evaluate=function(){c.pinIsChanged()&&this.initialize();if(void 0==f.getValue(0))b.setValue(0,void 0);else{for(var a=d[Math.round(Math.abs(f.getValue(0)))%d.length],h=a.getSliceCount(),m=0;m<h;m++)b.setValue(m,a.getValue(m));b.setSliceCount(h)}}};VVVV.Nodes.SwitchNodeInput.prototype=new VVVV.Core.Node;VVVV.Nodes.GetSliceNode=function(e,
g){this.constructor(e,"GetSlice (Node)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[],VVVV.PinTypes.Node),c=this.addInputPin("BinSize",[1],VVVV.PinTypes.Value),d=this.addInputPin("Index",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[],VVVV.PinTypes.Node);this.evaluate=function(){for(var a=d.getSliceCount(),h,m,e=0,g=0;g<a;g++)if(m=c.getValue(g),h=f.getValue(Math.round(d.getValue(g)),m),1<m)for(m=
0;m<h.length;m++)b.setValue(e,h[m]),e++;else b.setValue(g,h),e++;b.setSliceCount(e)}};VVVV.Nodes.GetSliceNode.prototype=new VVVV.Core.Node;VVVV.Nodes.SelectNode=function(e,g){this.constructor(e,"Select (Node)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[],VVVV.PinTypes.Node),c=this.addInputPin("Select",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[],VVVV.PinTypes.Node),b=this.addOutputPin("Former Slice",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,m=0;m<a;m++)for(var e=0;e<c.getValue(m);e++)d.setValue(h,f.getValue(m)),b.setValue(h,m),h++;d.setSliceCount(h);b.setSliceCount(h)}};VVVV.Nodes.SelectNode.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.BoundsSpectral=function(e,g){this.constructor(e,"Bounds (Spectral)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value),d=this.addOutputPin("Center",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Width",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Minimum",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Maximum",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var m=this.getMaxInputSliceCount(),e=0,g=0,p,n,l,k=0;k<m||0<c.getValue(0)&&(0<g||0!=e%c.getSliceCount());k++)p=f.getValue(k),0==g&&(center=n=l=p,width=0),n=Math.min(p,n),l=Math.max(p,l),g++,0<c.getValue(0)&&g>=c.getValue(e)&&(a.setValue(e,n),h.setValue(e,l),d.setValue(e,n+(l-n)/2),b.setValue(e,Math.abs(l-n)),e++,g=0);-1==c.getValue(0)&&(a.setValue(e,n),h.setValue(e,l),d.setValue(e,n+(l-n)/2),b.setValue(e,Math.abs(l-n)));d.setSliceCount(e+(0<g));
b.setSliceCount(e+(0<g));a.setSliceCount(e+(0<g));h.setSliceCount(e+(0<g))}};VVVV.Nodes.BoundsSpectral.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.GetSliceSpreads=function(e,g){this.constructor(e,"GetSlice (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value),d=this.addInputPin("Index",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=d.getSliceCount(),h,m,e=0,g=0;g<a;g++)if(m=c.getValue(g),
h=f.getValue(Math.round(d.getValue(g)),m),1<m)for(m=0;m<h.length;m++)b.setValue(e,h[m]),e++;else b.setValue(g,h),e++;b.setSliceCount(e)}};VVVV.Nodes.GetSliceSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.SetSliceSpreads=function(e,g){this.constructor(e,"SetSlice (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Spread",[0],VVVV.PinTypes.Value),c=this.addInputPin("Input",[0],VVVV.PinTypes.Value),
d=this.addInputPin("Index",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=f.getSliceCount(),h=0;h<a;h++)b.setValue(h,f.getValue(h));size=Math.max(c.getSliceCount(),d.getSliceCount());for(h=0;h<size;h++)b.setValue(d.getValue(h)%a,c.getValue(h));b.setSliceCount(a)}};VVVV.Nodes.SetSliceSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.RandomSpread=function(e,g){function f(c){var d=[],b=0,a=0;(function(a){for(var b=0;256>b;b++)d[b]=b;for(var c=
0,b=0;256>b;b++){var c=(c+d[b]+a.charCodeAt(b%a.length))%256,f=d[b];d[b]=d[c];d[c]=f}})(c);this.getRandomNumber=function(){for(var c=0,f=1,e=0;8>e;e++){b=(b+1)%256;a=(a+d[b])%256;var g=d[b];d[b]=d[a];d[a]=g;c+=d[(d[b]+d[a])%256]*f;f*=256}return c/1.8446744073709552E19}}this.constructor(e,"RandomSpread (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:["http://www.webdeveloper.com/forum/showthread.php?t=140572"],compatibility_issues:["Doesnt handle spreaded inputs",
"random result will differ from original vvvv node because of different algorithm"]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.addInputPin("Random Seed",[0],VVVV.PinTypes.Value);this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){var c=parseInt(this.inputPins["Spread Count"].getValue(0)),d=this.inputPins.Input.getValue(0),b=this.inputPins.Width.getValue(0),
a=parseInt(this.inputPins["Random Seed"].getValue(0));rng=new f(a.toString());this.outputPins.Output.setSliceCount(c);for(a=0;a<c;a++)this.outputPins.Output.setValue(a,rng.getRandomNumber()*b-b/2+d)}};VVVV.Nodes.RandomSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.SortSpreads=function(e,g){this.constructor(e,"Sort (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Output",
[0],VVVV.PinTypes.Value);this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=_(this.inputPins.Input.values).map(function(c,b){return[c,b]}),f=_(f).sortBy(function(c){return c[0]}),c=0;c<f.length;c++)this.outputPins.Output.setValue(c,f[c][0]),this.outputPins["Former Index"].setValue(c,f[c][1]);this.outputPins.Output.setSliceCount(f.length);this.outputPins["Former Index"].setSliceCount(f.length)}};VVVV.Nodes.SortSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.LinearSpread=
function(e,g){this.constructor(e,"LinearSpread (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["phase does not work with Block alignment"]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Width",[1],VVVV.PinTypes.Value),d=this.addInputPin("Alignment",["Centered"],VVVV.PinTypes.Enum);d.enumOptions=["Centered","Block","LeftJustified","RightJustified"];var b=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),
a=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=0,q=0;q<e;q++){var p=parseInt(a.getValue(q)),n=c.getValue(q),l=b.getValue(q),k=f.getValue(q),w=d.getValue(q);""==w&&(w="Centered");var y=n/p;"Block"==w&&(y=n/(p-1));var t=y/2;if("Block"==w||"LeftJustified"==w)t=0;"RightJustified"==w&&(t=y);for(var x,v=0;v<p;v++)x=v*y+t,"Block"!=w&&0!=n&&(x=(x+l*n)%n),x=k-n/2+x,h.setValue(g,
x),g++}h.setSliceCount(g)}};VVVV.Nodes.LinearSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.AvoidNil=function(e,g){this.constructor(e,"AvoidNIL (Spreads)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Default",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){if(f.pinIsChanged()||c.pinIsChanged()){var b=
f;0==f.getSliceCount()&&(b=c);for(var a=0;a<b.values.length;a++)d.setValue(a,b.getValue(a));d.setSliceCount(b.getSliceCount())}}};VVVV.Nodes.AvoidNil.prototype=new VVVV.Core.Node;VVVV.Nodes.SwapDim=function(e,g){this.constructor(e,"SwapDim (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["BinSize not implemented"]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Column Count",[0],VVVV.PinTypes.Value),
d=this.addInputPin("Row Count",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=parseInt(c.getValue(0)),h=parseInt(d.getValue(0)),e=a*h,g=0;g<e;g++)b.setValue(g%a*h+parseInt(g/a),f.getValue(g));b.setSliceCount(e)}};VVVV.Nodes.SwapDim.prototype=new VVVV.Core.Node;VVVV.Nodes.I=function(e,g){this.constructor(e,"I (Spreads)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:["Matthias Zauner, M\u00f3r\u00e1sz D\u00e1vid (micro.D)"],
compatibility_issues:[]};var f=this.addInputPin("[ From ..",[0],VVVV.PinTypes.Value),c=this.addInputPin(".. To [",[1],VVVV.PinTypes.Value),d=this.addInputPin("Phase",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,e=0;e<a;e++){var g=Math.round(f.getValue(e)),q=Math.round(c.getValue(e)),p=d.getValue(e),n=q-g,l=Math.abs(n);if(g<=q)for(q=0;q<l;q++,h++){var k=parseFloat(q)-l*p,k=Math.round(k)%n;0>k&&(k=
n+k);k+=g;b.setValue(h,k)}else for(q=l;0<q;q--,h++)k=parseFloat(q)-l*p,k=Math.round(k)%n,0>n&&(k*=-1),0>k&&(k=n-k),k+=g,b.setValue(h,k)}b.setSliceCount(h)}};VVVV.Nodes.I.prototype=new VVVV.Core.Node;VVVV.Nodes.CircularSpread=function(e,g){this.constructor(e,"CircularSpread (Spreads)",g);this.meta={authors:["Matija Miloslavich, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.xIn=this.addInputPin("Input X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Input Y",
[0],VVVV.PinTypes.Value);this.widthIn=this.addInputPin("Width",[1],VVVV.PinTypes.Value);this.heightIn=this.addInputPin("Height",[1],VVVV.PinTypes.Value);this.factorIn=this.addInputPin("Factor",[1],VVVV.PinTypes.Value);this.phaseIn=this.addInputPin("Phase",[0],VVVV.PinTypes.Value);this.sprcntIn=this.addInputPin("Spread Count",[1],VVVV.PinTypes.Value);this.xOut=this.addOutputPin("Output X",[0],VVVV.PinTypes.Value);this.yOut=this.addOutputPin("Output Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var f=
2*Math.PI,c=0,d=0;d<this.getMaxInputSliceCount();d++)for(var b=this.xIn.getValue(d),a=this.yIn.getValue(d),h=0.5*this.widthIn.getValue(d),e=0.5*this.heightIn.getValue(d),g=this.factorIn.getValue(d),q=this.phaseIn.getValue(d)*f,p=parseInt(this.sprcntIn.getValue(d)),n=0;n<p;n++){var l=q+f*(n/p)*g,k=b+Math.cos(l)*h,l=a+Math.sin(l)*e;this.xOut.setValue(c,k);this.yOut.setValue(c,l);c++}this.xOut.setSliceCount(c);this.yOut.setSliceCount(c)}};VVVV.Nodes.CircularSpread.prototype=new VVVV.Core.Node;VVVV.Nodes.ReverseSpreads=
function(e,g){this.constructor(e,"Reverse (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=f.getSliceCount(),b=0;b<d;b++){var a=f.getValue(b);c.setValue(d-b-1,a)}c.setSliceCount(d)}};VVVV.Nodes.ReverseSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IntegralSpreads=
function(e,g){this.constructor(e,"Integral (Spreads)",g);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),d=this.addInputPin("Offset",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output Bin Size",[2],VVVV.PinTypes.Value);this.evaluate=function(){var h=
f.getSliceCount(),e=Math.max(c.getSliceCount(),d.getSliceCount()),g=0,q=0,p=[];if(0<e)for(;g<e||q<h;){var n=parseInt(c.getValue(g));0>n&&(n=parseInt(Math.round(h/parseFloat(Math.abs(n)))));q+=n;p[g]=n;g++}p.splice(g);for(q=e=h=0;q<g;q++){n=p[q];a.setValue(q,n+1);for(var l=d.getValue(q),k=0;k<n;k++)b.setValue(e,l),e++,l+=f.getValue(h+k);h+=n;b.setValue(e,l);e++}b.setSliceCount(e);a.setSliceCount(g)}};VVVV.Nodes.IntegralSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.DifferentialSpreads=function(e,
g){this.constructor(e,"Differential (Spreads)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Input Bin Size",[-1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output Bin Size",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Offset",[0],VVVV.PinTypes.Value);this.evaluate=function(){var h=f.getSliceCount(),
e=c.getSliceCount(),g=0,q=0,p=[];if(0<e)for(;g<e||q<h;){var n=parseInt(c.getValue(g));0>n&&(n=parseInt(Math.round(h/parseFloat(Math.abs(n)))));q+=n;p[g]=n;g++}p.splice(g);for(q=e=h=0;q<g;q++){var n=p[q]-1,l=f.getValue(h);b.setValue(q,n);a.setValue(q,l);for(var k=0;k<n;k++){var w=f.getValue(h+k+1);d.setValue(e,w-l);l=w;e++}h+=n+1}d.setSliceCount(e);b.setSliceCount(g);a.setSliceCount(g)}};VVVV.Nodes.DifferentialSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.ConsSpreads=function(e,g){this.constructor(e,
"Cons (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=[],c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,d.getValue(0));VVVV.Helpers.dynamicPins(this,f,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){d.pinIsChanged()&&this.initialize();
for(var b=0,a=0;a<f.length;a++)for(var h=0;h<f[a].getSliceCount();h++)c.setValue(b++,f[a].getValue(h));c.setSliceCount(b)}};VVVV.Nodes.ConsSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.IntervalSpreads=function(e,g){this.constructor(e,"Interval (Spreads)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0.5],VVVV.PinTypes.Value),c=this.addInputPin("Intervals",[0],VVVV.PinTypes.Value),
d=this.addOutputPin("Index",[0],VVVV.PinTypes.Value),b=0;this.evaluate=function(){var a=f.getSliceCount(),h=c.getSliceCount();if(c.pinIsChanged()){b=void 0;for(var e=0;e<h;e++)if(c.getValue(e)<b||void 0==b)b=c.getValue(e)}for(e=0;e<a;e++){var g=f.getValue(e);if(g<b)d.setValue(e,-1);else{for(var q=0;q<h-1&&!(g>=c.getValue(q)&&g<c.getValue(q+1));q++);d.setValue(e,q)}}d.setSliceCount(a)}};VVVV.Nodes.IntervalSpreads.prototype=new VVVV.Core.Node;VVVV.Nodes.QueueSpreads=function(e,g){this.constructor(e,
"Queue (Spreads)",g);this.meta={authors:["Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Insert",[0],VVVV.PinTypes.Value),d=this.addInputPin("Frame Count",[1],VVVV.PinTypes.Value),b=this.addInputPin("Reset",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[],VVVV.PinTypes.Value),h=this.addOutputPin("Output Bin Size",[],VVVV.PinTypes.Value),m=[],k=[];this.evaluate=function(){var e=
c.getValue(0),g=d.getValue(0),n=b.getValue(0),l=!1;if(0.5<=e&&0.5>n){e=f.getSliceCount();for(l=e-1;0<=l;l--)m.unshift(f.getValue(l));k.unshift(e);l=!0}if(d.pinIsChanged()||l){for(l=currFrameCount=k.length;l>g;l--)m.splice(-k[l-1]);k.splice(g);l=!0}if(l){for(l=0;l<m.length;l++)a.setValue(l,m[l]);for(l=0;l<k.length;l++)h.setValue(l,k[l]);a.setSliceCount(m.length);a.setSliceCount(k.length)}0.5<=n&&(m.length=0,k.length=0,a.setSliceCount(0),h.setSliceCount(0))}};VVVV.Nodes.QueueSpreads.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.IOBoxString=function(e,g){this.constructor(e,"IOBox (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addInputPin("SliceOffset",[0],VVVV.PinTypes.Value);this.addInputPin("Input String",[""],VVVV.PinTypes.String);this.addOutputPin("Output String",[""],VVVV.PinTypes.String);this.evaluate=function(){this.outputPins["Output String"].setSliceCount(this.inputPins["Input String"].getSliceCount());
for(var f=0;f<this.inputPins["Input String"].getSliceCount();f++)this.outputPins["Output String"].setValue(f,this.inputPins["Input String"].getValue(f))}};VVVV.Nodes.IOBoxString.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchStringInput=function(e,g){this.constructor(e,"Switch (String Input)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=this.addInputPin("Switch",[0],
VVVV.PinTypes.Value),d=[],b=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,d,a,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)b.setValue(h,d[Math.round(Math.abs(c.getValue(h)))%d.length].getValue(h));b.setSliceCount(a)}};VVVV.Nodes.SwitchStringInput.prototype=
new VVVV.Core.Node;VVVV.Nodes.AddString=function(e,g){this.constructor(e,"Add (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet","Intersperse *Enum* not implemented"]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=[],d=this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),b=this.addOutputPin("Output",["texttext"],VVVV.PinTypes.String);this.initialize=function(){var a=Math.max(2,
f.getValue(0));VVVV.Helpers.dynamicPins(this,c,a,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++){var e=[],g=d.getValue(h);void 0==g&&(g="");for(var q=0;q<c.length;q++)e.push(c[q].getValue(h));b.setValue(h,e.join(g))}b.setSliceCount(a)}};VVVV.Nodes.AddString.prototype=new VVVV.Core.Node;VVVV.Nodes.GetSliceString=function(e,g){this.constructor(e,"GetSlice (String)",
g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Bin Size not implemented"]};var f=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Bin Size",[1],VVVV.PinTypes.Value);var c=this.addInputPin("Index",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){for(var b=0;b<c.values.length;b++)d.setValue(b,f.getValue(Math.round(c.getValue(b))));d.setSliceCount(c.getSliceCount())}};
VVVV.Nodes.GetSliceString.prototype=new VVVV.Core.Node;VVVV.Nodes.AsValue=function(e,g){this.constructor(e,"AsValue (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[],VVVV.PinTypes.String),c=this.addInputPin("Default",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var h=f.getValue(a);/^\s*-?[0-9.e]+\s*$/.test(h)?
d.setValue(a,parseFloat(h)):d.setValue(a,c.getValue(a))}d.setSliceCount(b)}};VVVV.Nodes.AsValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SortString=function(e,g){this.constructor(e,"Sort (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",["text"],VVVV.PinTypes.String);this.addInputPin("Reverse Sorting",[0],VVVV.PinTypes.Value);var c=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),
d=this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var b=_(f.values).map(function(a,b){return[a,b]}),b=_(b).sortBy(function(a){return a[0]}),a=0;a<b.length;a++)c.setValue(a,b[a][0]),d.setValue(a,b[a][1]);c.setSliceCount(b.length);d.setSliceCount(b.length)}};VVVV.Nodes.SortString.prototype=new VVVV.Core.Node;VVVV.Nodes.LengthString=function(e,g){this.constructor(e,"Length (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",["text"],VVVV.PinTypes.String),c=this.addOutputPin("Count",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),b=0;b<d;b++){var a=f.getValue(b);c.setValue(b,a.length)}c.setSliceCount(d)}};VVVV.Nodes.LengthString.prototype=new VVVV.Core.Node;VVVV.Nodes.SiftString=function(e,g){this.constructor(e,"Sift (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",["text"],VVVV.PinTypes.String),c=this.addInputPin("Filter",["text"],VVVV.PinTypes.String),d=this.addInputPin("Comparison",["Matches"],VVVV.PinTypes.Enum);d.enumOptions=["Matches","Contains","MatchesAny","ContainsAny"];var b=this.addInputPin("Case Sensitive",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Input Index",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Filter Index",
[0],VVVV.PinTypes.Value),k=this.addOutputPin("Found At Position",[0],VVVV.PinTypes.Value);this.evaluate=function(){var e=this.getMaxInputSliceCount();a.setSliceCount(e);var g=d.getValue(0);b.getValue(0);for(var n=0,l=0;l<e;l++){var u=f.getValue(l),w=1;if("MatchesAny"==g||"ContainsAny"==g)w=c.getSliceCount();for(var y=0,t=0;t<w;t++){var x=c.getValue(t+l),v=[];if("Matches"==g||"MatchesAny"==g)x==u&&v.push(-1);else for(var x=RegExp(x,"gi"),A;A=x.exec(u);)v.push(A.index);for(x=0;x<v.length;x++)h.setValue(n,
l%f.getSliceCount()),m.setValue(n,(l+t)%c.getSliceCount()),k.setValue(n,v[x]+1),n++,y++}a.setValue(l,y)}h.setSliceCount(n);m.setSliceCount(n);k.setSliceCount(n)}};VVVV.Nodes.SiftString.prototype=new VVVV.Core.Node;VVVV.Nodes.SeparateString=function(e,g){this.constructor(e,"Separate (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Quotes don't work"]};this.auto_evaluate=!1;var f=this.addInputPin("Input",["text"],VVVV.PinTypes.String),
c=this.addInputPin("Intersperse",["None"],VVVV.PinTypes.Enum);c.enumOptions="None Space Comma CommaPlusSpace Semicolon Colon Pipe UnixPath DosPath Dash NewLineAutoDetection Dot UnderScore Minus".split(" ");var d=this.addInputPin("Intersperse String",[""],VVVV.PinTypes.String),b=this.addInputPin("Ignore between",["Double"],VVVV.PinTypes.Enum);b.enumOptions=["Single","Double"];var a=this.addInputPin("Keep Quotes",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),m=
this.addOutputPin("Former Index",[0],VVVV.PinTypes.Value),k={None:"",Space:" ",Comma:",",CommaPlusSpace:", ",Semicolon:";",Colon:":",Pipe:"|",UnixPath:"/",DosPath:"\\",Dash:"-",NewLineAutoDetection:"\n",Dot:".",UnderScore:"_",Minus:"-"},q={Single:"'",Double:'"'};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=0,l=0;l<e;l++){var u=f.getValue(l),w=k[c.getValue(l)],y=d.getValue(l),t=q[b.getValue(l)],x=a.getValue(l);""==w&&(w=y);""==w&&(w=void 0);u=u.split(w);w=u.length;t=RegExp("[^"+
t+"]*","g");for(y=0;y<w;y++)1==x?h.setValue(g,u[y]):h.setValue(g,u[y].match(t).join("")),m.setValue(g,l),g++}h.setSliceCount(g);m.setSliceCount(g)}};VVVV.Nodes.SeparateString.prototype=new VVVV.Core.Node;VVVV.Nodes.EQString=function(e,g){this.constructor(e,"EQ (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input 1",[""],VVVV.PinTypes.String),c=this.addInputPin("Input 2",[""],VVVV.PinTypes.String),
d=this.addInputPin("Case Sensitive",[1],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),e=0;e<h;e++){var g=f.getValue(e),q=c.getValue(e),k=d.getValue(e),g=g==q||0==k&&g.toLowerCase()==q.toLowerCase()?1:0;b.setValue(e,g);a.setValue(e,1-g)}b.setSliceCount(h);a.setSliceCount(h)}};VVVV.Nodes.EQString.prototype=new VVVV.Core.Node;VVVV.Nodes.SelectString=
function(e,g){this.constructor(e,"Select (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[""],VVVV.PinTypes.String),c=this.addInputPin("Select",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[""],VVVV.PinTypes.String),b=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,e=0;e<a;e++)for(var g=0;g<c.getValue(e);g++)d.setValue(h,
f.getValue(e)),b.setValue(h,e),h++;d.setSliceCount(h);b.setSliceCount(h)}};VVVV.Nodes.SelectString.prototype=new VVVV.Core.Node;VVVV.Nodes.CountString=function(e,g){this.constructor(e,"Count (String)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[""],VVVV.PinTypes.String);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&
(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountString.prototype=new VVVV.Core.Node;VVVV.Nodes.CleanString=function(e,g){this.constructor(e,"Clean (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",["text"],VVVV.PinTypes.String),c=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);
this.evaluate=function(){for(var d=this.getMaxInputSliceCount(),b=0;b<d;b++)f.getValue(b)?c.setValue(b,f.getValue(b).trim()):c.setValue(b,void 0);c.setSliceCount(d)}};VVVV.Nodes.CleanString.prototype=new VVVV.Core.Node;VVVV.Nodes.AvoidNilString=function(e,g){this.constructor(e,"AvoidNIL (String)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Kalle"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",["text"],VVVV.PinTypes.String),c=this.addInputPin("Default",
["text"],VVVV.PinTypes.String),d=this.addOutputPin("Output",["text"],VVVV.PinTypes.String);this.evaluate=function(){if(f.pinIsChanged()||c.pinIsChanged()){var b=f;0==f.getSliceCount()&&(b=c);for(var a=0;a<b.values.length;a++)d.setValue(a,b.getValue(a));d.setSliceCount(b.getSliceCount())}}};VVVV.Nodes.AvoidNilString.prototype=new VVVV.Core.Node;VVVV.Nodes.FormatValueString=function(e,g){this.constructor(e,"FormatValue (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:["pad function: http://stackoverflow.com/a/10073788","thousands separator regex: http://stackoverflow.com/a/2901298"],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Characters before Comma",[1],VVVV.PinTypes.Value),d=this.addInputPin("Characters after Comma",[0],VVVV.PinTypes.Value),b=this.addInputPin("Thousands Symbol",["None"],VVVV.PinTypes.Enum);b.enumOptions=["None","Dot","Comma","Space"];var a=this.addInputPin("Comma Symbol",
["Dot"],VVVV.PinTypes.Enum);a.enumOptions=["Dot","Comma"];var h=this.addInputPin("Leading Zeroes",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Output",["0"],VVVV.PinTypes.String),k={Dot:".",Comma:",",None:"",Space:" "};this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=0;g<e;g++){var n=f.getValue(g),l=parseInt(c.getValue(g)),u=parseInt(d.getValue(g)),w=b.getValue(g),y=a.getValue(g),t=h.getValue(g),l=l+u+(0<u),n=n.toFixed(u),t=t=0.5<=t?"0":" ",n=n+"",n=n.length>=l?n:Array(l-n.length+
1).join(t)+n,n=n.replace(".",k[y]).replace(/\B(?=(\d{3})+(?!\d))/g,k[w]);m.setValue(g,n)}m.setSliceCount(e)}};VVVV.Nodes.FormatValueString.prototype=new VVVV.Core.Node;VVVV.Nodes.SampleAndHoldString=function(e,g){this.constructor(e,"S+H (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["different output slice count in pure VVVV, if Set pin has only one slice"]};var f=this.addInputPin("Input",[""],VVVV.PinTypes.String),c=this.addInputPin("Set",
[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[""],VVVV.PinTypes.String);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)void 0==d.values[a]&&d.setValue(a,0),0.5<=Math.round(c.getValue(a))&&d.setValue(a,f.getValue(a));d.setSliceCount(b)}};VVVV.Nodes.SampleAndHoldString.prototype=new VVVV.Core.Node;VVVV.Nodes.ConsString=function(e,g){this.constructor(e,"Cons (String)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};
this.auto_evaluate=!1;var f=[],c=this.addOutputPin("Output",["text"],VVVV.PinTypes.String),d=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,d.getValue(0));VVVV.Helpers.dynamicPins(this,f,b,function(a){return this.addInputPin("Input "+(a+1),["text"],VVVV.PinTypes.String)})};this.evaluate=function(){d.pinIsChanged()&&this.initialize();for(var b=0,a=0;a<f.length;a++)for(var h=0;h<f[a].getSliceCount();h++)c.setValue(b++,f[a].getValue(h));c.setSliceCount(b)}};
VVVV.Nodes.ConsString.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.MouseGlobal=function(e,g){function f(a){for(var b=a.originalEvent.changedTouches.length;b--;)q[a.originalEvent.changedTouches[b].identifier]=2*a.originalEvent.changedTouches[b].pageX/parseInt(k("body").css("width"))-1,p[a.originalEvent.changedTouches[b].identifier]=-(2*a.originalEvent.changedTouches[b].pageY/parseInt(k("body").css("height"))-1)}this.constructor(e,"Mouse (System Global)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported"]};
this.auto_evaluate=!0;var c=this.addInputPin("Maximum Touch Points",[1],VVVV.PinTypes.Value),d=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Left Button",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Middle Button",[0],VVVV.PinTypes.Value),r=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value),q=[0],p=[0],n=[0],l=[0],u=[0],w=[0];k(document).mousemove(function(a){q[0]=
2*a.pageX/parseInt(k("body").css("width"))-1;p[0]=-(2*a.pageY/parseInt(k("body").css("height"))-1)});k(document).bind("mousewheel",function(a){n[0]+=a.originalEvent.wheelDelta/120});k(document).bind("DOMMouseScroll",function(a){n[0]+=-a.originalEvent.detail/3});k(document).mousedown(function(a){switch(a.which){case 1:l[0]=1;break;case 2:u[0]=1;break;case 3:w[0]=1}});k(document).mouseup(function(a){switch(a.which){case 1:l[0]=0;break;case 2:u[0]=0;break;case 3:w[0]=0}});k(document).bind("touchstart",
function(a){for(var b=a.originalEvent.changedTouches.length;b--;)l[a.originalEvent.changedTouches[b].identifier]=1;f(a)});k(document).bind("touchend",function(a){for(var b=a.originalEvent.changedTouches.length;b--;)l[a.originalEvent.changedTouches[b].identifier]=0});k(document).bind("touchmove",f);this.evaluate=function(){for(var e=Math.max(1,c.getValue(0)),f=e;f--;)d.setValue(f,q[f]||0),b.setValue(f,p[f]||0),a.setValue(f,n[f]||0),h.setValue(f,l[f]||0),m.setValue(f,u[f]||0),r.setValue(f,w[f]||0);
c.pinIsChanged()&&[d,b,a,h,m,r].forEach(function(a){a.setSliceCount(e)})}};VVVV.Nodes.MouseGlobal.prototype=new VVVV.Core.Node;VVVV.Nodes.MouseWindow=function(e,g){this.constructor(e,"Mouse (System Window)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Cyclic mode not supported","No Mouse Wheel pin","No Left Button Pin","No Right Button Pin","No Middle Button Pin"]};this.auto_evaluate=!0;var f=this.addInputPin("Maximum Touch Points",[1],
VVVV.PinTypes.Value),c=this.addOutputPin("X",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Mouse Wheel",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Left Button",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Middle Button",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Right Button",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=Math.max(1,f.getValue(0)),g=e;g--;)c.setValue(g,VVVV.MousePositions._all.x[g]||0),d.setValue(g,VVVV.MousePositions._all.y[g]||
0),b.setValue(g,VVVV.MousePositions._all.wheel[g]||0),a.setValue(g,VVVV.MousePositions._all.lb[g]||0),h.setValue(g,VVVV.MousePositions._all.mb[g]||0),m.setValue(g,VVVV.MousePositions._all.rb[g]||0);f.pinIsChanged()&&[c,d,b,a,h,m].forEach(function(a){a.setSliceCount(e)})}};VVVV.Nodes.MouseWindow.prototype=new VVVV.Core.Node;VVVV.Nodes.ShellExecute=function(e,g){this.constructor(e,"ShellExecute (Windows)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["This actually does something completely different from the original node: the origin node executes a shell command, this node evals javascript code"]};
var f=this.addInputPin("File",[0],VVVV.PinTypes.String),c=this.addInputPin("Do Execute",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Result",[""],VVVV.PinTypes.String);this.evaluate=function(){if(1<=Math.round(c.getValue(0))){var b=eval(f.getValue(0));b instanceof Array||b instanceof Object||(b=[b]);if(void 0!=b)for(var a=0;a<b.length;a++)d.setValue(a,b[a])}}};VVVV.Nodes.ShellExecute.prototype=new VVVV.Core.Node;VVVV.Nodes.ScreenInfo=function(e,g){this.constructor(e,"ScreenInfo (Windows)",g);this.meta=
{authors:["David M\u00f3r\u00e1sz (micro.D)"],original_authors:["VVVV Group"],credits:["Matthias Zauner"],compatibility_issues:["Outputs the window size (ResolutionXY) and the document size (Working AreaXY) only","no Bits per pixel"]};this.auto_evaluate=!0;var f=this.addOutputPin("ResolutionXY",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Working AreaXY",[0],VVVV.PinTypes.Value),d=0,b=0,a=0,h=0;k(document).ready(function(){b=k(window).innerHeight();d=k(window).innerWidth();h=k(document).height();
a=k(document).width()});k(window).resize(function(){b=k(window).innerHeight();d=k(window).innerWidth();h=k(document).height();a=k(document).width()});this.evaluate=function(){if(f.getValue(0)!=d||f.getValue(1)!=b)f.setValue(0,d),f.setValue(1,b);if(c.getValue(0)!=a||c.getValue(1)!=h)c.setValue(0,a),c.setValue(1,h)}};VVVV.Nodes.ScreenInfo.prototype=new VVVV.Core.Node;VVVV.Nodes.DefineNode=function(e,g){this.constructor(e,"DefineNode (System)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],
original_authors:["Matthias Zauner"],credits:[],compatibility_issues:["Not available in classic VVVV"]};this.auto_evaluate=!1;var f=this.addInvisiblePin("Node Name",[""],VVVV.PinTypes.String),c=this.addInvisiblePin("Source Code",['var valueIn = this.addInputPin("Value In", [0], VVVV.PinTypes.Value);\nvar stringIn = this.addInputPin("String In", ["text"], VVVV.PinTypes.String);\nvar colorIn = this.addInputPin("Color In", [], VVVV.PinTypes.Color);\n\nvar valueOut = this.addOutputPin("Value Out", [0], VVVV.PinTypes.Value);\nvar stringOut = this.addOutputPin("String Out", ["text"], VVVV.PinTypes.String);\nvar colorOut = this.addOutputPin("Color Out", [], VVVV.PinTypes.Color);\n\nthis.initialize = function() {\n\n//Put node configuration code here ...\n}\n\nthis.evaluate = function() {\n  var maxSize = this.getMaxInputSliceCount();\n\n  for (var i=0; i<maxSize; i++) {\n\n    valueOut.setValue(i, valueIn.getValue(i));\n    stringOut.setValue(i, stringIn.getValue(i));\n    colorOut.setValue(i, colorIn.getValue(i));\n  }\n\n  valueOut.setSliceCount(maxSize);\n  stringOut.setSliceCount(maxSize);\n  colorOut.setSliceCount(maxSize);\n}\n\nthis.destroy = function() {\n  // This is called when the node is deleted\n}'],
VVVV.PinTypes.String),d="",b=void 0,a;this.relatedNodes=[];this.initialize=function(){this.evaluate()};this.evaluate=function(){if(""!=f.getValue(0)){if(f.pinIsChanged()){var h=f.getValue(0);if(""==h)return;VVVV.NodeLibrary[h.toLowerCase()]&&VVVV.NodeLibrary[h.toLowerCase()].definingNode!=this&&(console.warn("The node '"+h+"' has already been defined."),this.not_implemented=!0);""!=d&&(VVVV.NodeLibrary[h.toLowerCase()]=VVVV.NodeLibrary[d.toLowerCase()],delete VVVV.NodeLibrary[d.toLowerCase()]);d=
h;this.not_implemented=!1;a&&k("#path",a.document).text((this.parentPatch.nodename||"root")+" / "+(""!=d?d:"Untitled"))}if(c.pinIsChanged()||f.pinIsChanged())try{b=new Function("id","graph",'this.constructor(id, "'+d+'", graph); '+c.getValue(0));b.prototype=new VVVV.Core.Node;b.definingNode=this;VVVV.NodeLibrary[d.toLowerCase()]=b;for(h=0;h<this.relatedNodes.length;h++){var e=this.relatedNodes[h];e.parentPatch.doLoad("<PATCH><NODE id='"+e.id+"' systemname='"+d+"' createme='pronto'><BOUNDS type='Node' left='"+
15*e.x+"' top='"+15*e.y+"'></BOUNDS></NODE></PATCH>",function(){e.parentPatch.afterUpdate()})}0<=VVVV.NodeNames.indexOf(d)&&VVVV.NodeNames.splice(VVVV.NodeNames.indexOf(d),1);VVVV.NodeNames.push(d);this.showStatus("success","Successfully updated.");this.not_implemented=!1}catch(g){this.showStatus("error",g.message),this.not_implemented=!0}}};this.openUIWindow=function(){a=window.open(location.protocol+"//"+location.host+("/"==VVVV.Root[0]?"":location.pathname.replace(/\/[^\/]*$/,"")+"/")+VVVV.Root+
"/code_editor.html",d+" / VVVV.js Effect Editor","location=no, width=800, height=800, toolbar=no");var b=this;window.setTimeout(function(){a.document.title=d+" / VVVV.js Node Editor";var e=b.parentPatch.nodename||"root",f=""!=d?d:"Untitled";k("#path",a.document).text(e+" / "+f);k("textarea",a.document).text(c.getValue(0));k("#compile_button",a.document).click(function(){""==d?b.showStatus("error","Please provide a name for this node first"):(c.setValue(0,k("textarea",a.document).val()),b.showStatus("notice",
"Compiling ..."),b.evaluate())});a.focus()},500)};this.showStatus=function(b,c){a&&(k("#status",a.document).text(c),k("#status",a.document).attr("class",b))}};VVVV.Nodes.DefineNode.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Transform={typeName:"Transform",reset_on_disconnect:!0,defaultValue:function(){return mat4.identity(mat4.create())}};VVVV.Nodes.Rotate=function(e,g){this.constructor(e,"Rotate (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);
this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(c>f.length)for(var d=f.length;d++<c;)f.push(mat4.create());else c<f.length&&(f.length=c);for(d=0;d<c;d++){var b=this.inputPins["Transform In"].getValue(d),a=this.inputPins.X.getValue(d),h=this.inputPins.Y.getValue(d),
e=this.inputPins.Z.getValue(d);mat4.rotate(b,2*h*Math.PI,[0,1,0],f[d]);mat4.rotate(f[d],2*a*Math.PI,[1,0,0]);mat4.rotate(f[d],2*e*Math.PI,[0,0,1]);this.trOut.setValue(d,f[d])}this.trOut.setSliceCount(c)}};VVVV.Nodes.Rotate.prototype=new VVVV.Core.Node;VVVV.Nodes.Translate=function(e,g){this.constructor(e,"Translate (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);
this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(c>f.length)for(var d=f.length;d++<c;)f.push(mat4.create());else c<f.length&&(f.length=c);for(d=
0;d<c;d++){var b=this.xIn.getValue(d),a=this.yIn.getValue(d),h=this.zIn.getValue(d);mat4.translate(this.trIn.getValue(d),[b,a,h],f[d]);this.trOut.setValue(d,f[d])}this.trOut.setSliceCount(c)}};VVVV.Nodes.Translate.prototype=new VVVV.Core.Node;VVVV.Nodes.Scale=function(e,g){this.constructor(e,"Scale (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);
this.xIn=this.addInputPin("X",[1],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[1],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(c>f.length)for(var d=f.length;d++<c;)f.push(mat4.create());else c<f.length&&(f.length=c);for(d=
0;d<c;d++){var b=this.inputPins.X.getValue(d),a=this.inputPins.Y.getValue(d),h=this.inputPins.Z.getValue(d);mat4.scale(this.trIn.getValue(d),[b,a,h],f[d]);this.trOut.setValue(d,f[d])}this.trOut.setSliceCount(c)}};VVVV.Nodes.Scale.prototype=new VVVV.Core.Node;VVVV.Nodes.UniformScale=function(e,g){this.constructor(e,"UniformScale (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);
this.xyzIn=this.addInputPin("XYZ",[1],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=this.trIn.isConnected()?this.getMaxInputSliceCount():this.xyzIn.getSliceCount();if(c>f.length)for(var d=f.length;d++<c;)f.push(mat4.create());else c<f.length&&(f.length=c);for(d=0;d<c;d++){var b=this.inputPins.XYZ.getValue(d);mat4.scale(this.trIn.getValue(d),[b,b,b],f[d]);this.trOut.setValue(d,f[d])}this.trOut.setSliceCount(c)}};VVVV.Nodes.UniformScale.prototype=
new VVVV.Core.Node;VVVV.Nodes.Trapeze=function(e,g){this.constructor(e,"Trapeze (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.xIn=this.addInputPin("X",[0],VVVV.PinTypes.Value);this.yIn=this.addInputPin("Y",[0],VVVV.PinTypes.Value);this.zIn=this.addInputPin("Z",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",
[],VVVV.PinTypes.Transform);this.evaluate=function(){var d=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.xIn.getSliceCount(),this.yIn.getSliceCount(),this.zIn.getSliceCount());if(d>f.length)for(var b=f.length;b++<d;)f.push(mat4.create());else d<f.length&&(f.length=d);for(b=0;b<d;b++){var a=2*this.inputPins.X.getValue(b),h=2*this.inputPins.Y.getValue(b),e=2*this.inputPins.Z.getValue(b);c[3]=a;c[7]=h;c[11]=e;mat4.multiply(this.inputPins["Transform In"].getValue(b),c,f[b]);this.trOut.setValue(b,
f[b])}this.trOut.setSliceCount(d)}};VVVV.Nodes.Trapeze.prototype=new VVVV.Core.Node;VVVV.Nodes.Transform2d=function(e,g){this.constructor(e,"Transform (Transform 2d)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.txIn=this.addInputPin("TranslateX",[0],VVVV.PinTypes.Value);this.tyIn=this.addInputPin("TranslateY",[0],VVVV.PinTypes.Value);this.sxIn=this.addInputPin("ScaleX",
[1],VVVV.PinTypes.Value);this.syIn=this.addInputPin("ScaleY",[1],VVVV.PinTypes.Value);this.rIn=this.addInputPin("Rotate",[0],VVVV.PinTypes.Value);this.cxIn=this.addInputPin("CenterX",[0],VVVV.PinTypes.Value);this.cyIn=this.addInputPin("CenterY",[0],VVVV.PinTypes.Value);this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=this.getMaxInputSliceCount();if(c>f.length)for(var d=f.length;d++<c;)f.push(mat4.create());else c<f.length&&(f.length=c);for(d=
0;d<c;d++){var b=this.inputPins.TranslateX.getValue(d),a=this.inputPins.TranslateY.getValue(d),h=this.inputPins.ScaleX.getValue(d),e=this.inputPins.ScaleY.getValue(d),g=this.inputPins.Rotate.getValue(d),k=this.inputPins.CenterX.getValue(d),p=this.inputPins.CenterY.getValue(d);mat4.translate(this.inputPins["Transform In"].getValue(d),[b,a,0],f[d]);mat4.rotate(f[d],2*g*Math.PI,[0,0,1]);mat4.scale(f[d],[h,e,1]);mat4.translate(f[d],[-k,-p,0]);this.trOut.setValue(d,f[d])}this.trOut.setSliceCount(c)}};
VVVV.Nodes.Transform2d.prototype=new VVVV.Core.Node;VVVV.Nodes.AspectRatio=function(e,g){this.constructor(e,"AspectRatio (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[];this.trIn=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.wIn=this.addInputPin("Aspect Width",[1],VVVV.PinTypes.Value);this.hIn=this.addInputPin("Aspect Height",[1],VVVV.PinTypes.Value);this.sIn=this.addInputPin("Uniform Scale",[1],VVVV.PinTypes.Value);
this.alignmentIn=this.addInputPin("Alignment",["FitIn"],VVVV.PinTypes.Enum);this.alignmentIn.enumOptions=["FitIn","FitWidth","FitHeight","FitOut"];this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var c=this.trIn.isConnected()?this.getMaxInputSliceCount():Math.max(this.wIn.getSliceCount(),this.hIn.getSliceCount(),this.sIn.getSliceCount(),this.alignmentIn.getSliceCount());if(c>f.length)for(var d=f.length;d++<c;)f.push(mat4.create());else c<f.length&&
(f.length=c);for(d=0;d<c;d++){var b=this.inputPins["Aspect Width"].getValue(d),a=this.inputPins["Aspect Height"].getValue(d),h=this.inputPins["Uniform Scale"].getValue(d),e=h,g=h;switch(this.alignmentIn.getValue(d)){case "FitIn":b>a?g*=a/b:e*=b/a;break;case "FitWidth":g*=a/b;e*=a/b;break;case "FitHeight":e*=b/a;g*=b/a;break;case "FitOut":b<a?g*=a/b:e*=b/a}mat4.scale(this.inputPins["Transform In"].getValue(d),[e,g,h],f[d]);this.trOut.setValue(d,f[d])}this.trOut.setSliceCount(c)}};VVVV.Nodes.AspectRatio.prototype=
new VVVV.Core.Node;VVVV.Nodes.Perspective=function(e,g){this.constructor(e,"Perspective (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Not spreadable"]};mat4.identity(mat4.create());this.addInputPin("Transform In",[],VVVV.PinTypes.Transform);this.addInputPin("FOV",[0.25],VVVV.PinTypes.Value);this.addInputPin("Near Plane",[0.05],VVVV.PinTypes.Value);this.addInputPin("Far Plane",[100],VVVV.PinTypes.Value);this.addOutputPin("Transform Out",
[],VVVV.PinTypes.Transform);this.evaluate=function(){var e=this.inputPins.FOV.getValue(0),c=this.inputPins["Near Plane"].getValue(0),d=this.inputPins["Far Plane"].getValue(0),b=mat4.create();mat4.identity(b);mat4.perspective(360*e,1,c,d,b);this.inputPins["Transform In"].isConnected()&&(e=this.inputPins["Transform In"].getValue(0),mat4.multiply(e,b,b));this.outputPins["Transform Out"].setValue(0,b)}};VVVV.Nodes.Perspective.prototype=new VVVV.Core.Node;VVVV.Nodes.InverseTransform=function(e,g){this.constructor(e,
"Inverse (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[],c=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),d=this.addInputPin("Source",[],VVVV.PinTypes.Transform),b=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);this.evaluate=function(){var a=this.getMaxInputSliceCount();if(a>f.length)for(var h=f.length;h++<a;)f.push(mat4.create());else a<f.length&&(f.length=a);for(h=0;h<a;h++)mat4.set(d.getValue(h),
f[h]),mat4.multiply(c.getValue(h),mat4.inverse(f[h],f[h]),f[h]),b.setValue(h,f[h]);b.setSliceCount(a)}};VVVV.Nodes.InverseTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.LookAtTransformVector=function(e,g){this.constructor(e,"LookAt (Transform Vector)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Transform In",[],VVVV.PinTypes.Transform),c=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),
d=this.addInputPin("LookAt XYZ",[0,0,1],VVVV.PinTypes.Value),b=this.addInputPin("UpVector XYZ",[0,1,0],VVVV.PinTypes.Value),a=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform),h=mat4.create();mat4.identity(h);mat4.scale(h,[-1,1,-1]);var m=[];this.evaluate=function(){var e=Math.max(f.getSliceCount(),Math.max(c.getSliceCount()/3,Math.max(d.getSliceCount()/3,b.getSliceCount()/3))),e=Math.ceil(e);if(e>m.length)for(var g=m.length;g++<e;)m.push(mat4.create());else e<m.length&&(m.length=e);for(g=
0;g<e;g++){var k=c.getValue(g,3),n=d.getValue(g,3),l=b.getValue(g,3);mat4.lookAt(k,n,l,m[g]);mat4.multiply(h,m[g],m[g]);f.isConnected()&&mat4.multiply(f.getValue(g),m[g],m[g]);a.setValue(g,m[g])}a.setSliceCount(e)}};VVVV.Nodes.LookAtTransformVector.prototype=new VVVV.Core.Node;VVVV.Nodes.LookAtTransform=function(e,g){this.constructor(e,"LookAt (Transform)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Transform In",
[],VVVV.PinTypes.Transform),c=this.addInputPin("Position X",[0],VVVV.PinTypes.Value),d=this.addInputPin("Position Y",[0],VVVV.PinTypes.Value),b=this.addInputPin("Position Z",[0],VVVV.PinTypes.Value),a=this.addInputPin("LookAt X",[0],VVVV.PinTypes.Value),h=this.addInputPin("LookAt Y",[0],VVVV.PinTypes.Value),m=this.addInputPin("LookAt Z",[1],VVVV.PinTypes.Value),k=this.addInputPin("UpVector X",[0],VVVV.PinTypes.Value),q=this.addInputPin("UpVector Y",[1],VVVV.PinTypes.Value),p=this.addInputPin("UpVector Z",
[0],VVVV.PinTypes.Value),n=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform),l=mat4.create();mat4.identity(l);mat4.scale(l,[-1,1,-1]);var u=[],w=vec3.create(),y=vec3.create(),t=vec3.create();this.evaluate=function(){var e=this.getMaxInputSliceCount();if(e>u.length)for(var g=u.length;g++<e;)u.push(mat4.create());else e<u.length&&(u.length=e);for(g=0;g<e;g++)w[0]=c.getValue(g),w[1]=d.getValue(g),w[2]=b.getValue(g),y[0]=a.getValue(g),y[1]=h.getValue(g),y[2]=m.getValue(g),t[0]=k.getValue(g),
t[1]=q.getValue(g),t[2]=p.getValue(g),mat4.lookAt(w,y,t,u[g]),mat4.multiply(l,u[g],u[g]),f.isConnected()&&mat4.multiply(f.getValue(g),u[g],u[g]),n.setValue(g,u[g]);n.setSliceCount(e)}};VVVV.Nodes.LookAtTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.MultiplyTransform=function(e,g){this.constructor(e,"Multiply (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=[],c=2;this.trOut=this.addOutputPin("Transform Out",[],VVVV.PinTypes.Transform);
var d=this.addInvisiblePin("Transform In Count",[2],VVVV.PinTypes.Value),b=[];this.initialize=function(){c=Math.max(2,d.getValue(0));VVVV.Helpers.dynamicPins(this,b,c,function(a){return this.addInputPin("Transform In "+(a+1),[],VVVV.PinTypes.Transform)})};this.evaluate=function(){d.pinIsChanged()&&this.initialize();var a=this.getMaxInputSliceCount();if(a>f.length)for(var h=f.length;h++<a;)f.push(mat4.create());else a<f.length&&(f.length=a);for(h=0;h<a;h++){mat4.identity(f[h]);for(var e=c-1;0<=e;e--)if(b[e].isConnected()){var g=
b[e].getValue(h);mat4.multiply(f[h],g,f[h])}this.trOut.setValue(h,f[h])}this.trOut.setSliceCount(a)}};VVVV.Nodes.MultiplyTransform.prototype=new VVVV.Core.Node;VVVV.Nodes.ApplyTransform=function(e,g){this.constructor(e,"ApplyTransform (Transform)",g);this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),c=this.addInputPin("X UnTransformed",[0],VVVV.PinTypes.Value),d=this.addInputPin("Y UnTransformed",
[0],VVVV.PinTypes.Value),b=this.addInputPin("Z UnTransformed",[0],VVVV.PinTypes.Value),a=this.addOutputPin("X Transformed",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Y Transformed",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Z Transformed",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=0;g<e;g++){var k=f.getValue(g),n=[];n[0]=c.getValue(g);n[1]=d.getValue(g);n[2]=b.getValue(g);mat4.multiplyVec3(k,n);a.setValue(g,n[0]);h.setValue(g,n[1]);m.setValue(g,
n[2])}a.setSliceCount(e);h.setSliceCount(e);m.setSliceCount(e)}};VVVV.Nodes.ApplyTransform.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.AddValue=function(e,g){this.constructor(e,"Add (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=[],d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=
function(){f.pinIsChanged()&&this.initialize();var b=this.getMaxInputSliceCount();d.setSliceCount(b);for(var a=0;a<b;a++){for(var h=c[0].getValue(a),e=1;e<c.length;e++)h+=c[e].getValue(a);d.setValue(a,h)}};this.getCode=function(){f.pinIsChanged()&&this.initialize();for(var b=[],a=0;a<c.length;a++)b.push("{Input "+(a+1)+"}");return b.join(" + ")}};VVVV.Nodes.AddValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SubtractValue=function(e,g){this.constructor(e,"Subtract (Value)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=[],d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();var b=this.getMaxInputSliceCount();d.setSliceCount(b);for(var a=0;a<b;a++){for(var h=
c[0].getValue(a),e=1;e<c.length;e++)h-=c[e].getValue(a);d.setValue(a,h)}};this.getCode=function(){f.pinIsChanged()&&this.initialize();for(var b=[],a=0;a<c.length;a++)b.push("{Input "+(a+1)+"}");return b.join(" - ")}};VVVV.Nodes.SubtractValue.prototype=new VVVV.Core.Node;VVVV.Nodes.EqValue=function(e,g){this.constructor(e,"EQ (Value)",g);this.meta={authors:["Matthias Zauner","Fibo"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),
c=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),d=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Inverse Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),e=0;e<h;e++){var g=0;Math.abs(f.getValue(e)-c.getValue(e))<=Math.abs(d.getValue(e))&&(g=1);b.setValue(e,g);a.setValue(e,1-g)}b.setSliceCount(h);a.setSliceCount(h)}};VVVV.Nodes.EqValue.prototype=new VVVV.Core.Node;
VVVV.Nodes.GtValue=function(e,g){this.constructor(e,"GT (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var f=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),c=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var h=0;f.getValue(a)>c.getValue(a)&&(h=1);d.setValue(a,h)}d.setSliceCount(b)};
this.getCode=function(){return"{Input 1} > {Input 2} ? 1 : 0"}};VVVV.Nodes.GtValue.prototype=new VVVV.Core.Node;VVVV.Nodes.LtValue=function(e,g){this.constructor(e,"LT (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var f=this.addInputPin("Input 1",[0],VVVV.PinTypes.Value),c=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=
this.getMaxInputSliceCount(),a=0;a<b;a++){var h=0;f.getValue(a)<c.getValue(a)&&(h=1);d.setValue(a,h)}d.setSliceCount(b)};this.getCode=function(){return"{Input 1} < {Input 2} ? 1 : 0"}};VVVV.Nodes.LtValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MultiplyValue=function(e,g){this.constructor(e,"Multiply (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=[],d=this.addOutputPin("Output",
[0],VVVV.PinTypes.Value);this.initialize=function(){var b=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,c,b,function(a){return this.addInputPin("Input "+(a+1),[1],VVVV.PinTypes.Value)})};this.evaluate=function(){f.pinIsChanged()&&this.initialize();var b=this.getMaxInputSliceCount();d.setSliceCount(b);for(var a=0;a<b;a++){for(var h=c[0].getValue(a),e=1;e<c.length;e++)h*=c[e].getValue(a);d.setValue(a,h)}};this.getCode=function(){f.pinIsChanged()&&this.initialize();for(var b=[],a=0;a<c.length;a++)b.push("{Input "+
(a+1)+"}");return b.join(" * ")}};VVVV.Nodes.MultiplyValue.prototype=new VVVV.Core.Node;VVVV.Nodes.DivideValue=function(e,g){this.constructor(e,"Divide (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInvisiblePin("Inputs Count",[2],VVVV.PinTypes.Value);var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Input 2",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=
function(){};this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++)0==c.getValue(a)?d.setValue(a,1):d.setValue(a,f.getValue(a)/c.getValue(a));d.setSliceCount(b)};this.getCode=function(){return"{Input} / {Input 2}"}};VVVV.Nodes.DivideValue.prototype=new VVVV.Core.Node;VVVV.Nodes.IOBoxValueAdvanced=function(e,g){this.constructor(e,"IOBox (Value Advanced)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Y Input Value",
[0],VVVV.PinTypes.Value);this.addInvisiblePin("Rows",[1],VVVV.PinTypes.Value);this.addOutputPin("Y Output Value",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.inputPins["Y Input Value"].getSliceCount(),c,d=0;d<e;d++)c=parseFloat(this.inputPins["Y Input Value"].getValue(d)),isFinite(c)||(c=0),this.outputPins["Y Output Value"].setValue(d,c);this.outputPins["Y Output Value"].setSliceCount(this.inputPins["Y Input Value"].getSliceCount())}};VVVV.Nodes.IOBoxValueAdvanced.prototype=new VVVV.Core.Node;
VVVV.Nodes.CountValue=function(e,g){this.constructor(e,"Count (Value)",g);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addOutputPin("Count",[1],VVVV.PinTypes.Value);this.addOutputPin("High",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.inputPins.Input.pinIsChanged()&&(this.outputPins.Count.setValue(0,this.inputPins.Input.values.length),this.outputPins.High.setValue(0,
this.inputPins.Input.values.length-1))}};VVVV.Nodes.CountValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SwitchValueInput=function(e,g){this.constructor(e,"Switch (Value Input)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No dynamic pin count yet"]};var f=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),c=this.addInputPin("Switch",[0],VVVV.PinTypes.Value),d=[];this.initialize=function(){var a=Math.max(2,f.getValue(0));VVVV.Helpers.dynamicPins(this,
d,a,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};var b=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){f.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h=0;h<a;h++)b.setValue(h,d[Math.round(Math.abs(c.getValue(h)))%d.length].getValue(h));b.setSliceCount(a)}};VVVV.Nodes.SwitchValueInput.prototype=new VVVV.Core.Node;VVVV.Nodes.SelectValue=function(e,g){this.constructor(e,"Select (Value)",g);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Select",[1],VVVV.PinTypes.Value),d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Former Slice",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,e=0;e<a;e++)for(var g=0;g<c.getValue(e);g++)d.setValue(h,f.getValue(e)),b.setValue(h,e),h++;d.setSliceCount(h);b.setSliceCount(h)}};VVVV.Nodes.SelectValue.prototype=
new VVVV.Core.Node;VVVV.Nodes.AsString=function(e,g){this.constructor(e,"AsString (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["SubType not implemented, always returns float formatting"]};var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("SubType",["Real (MinFloat .. MaxFloat)"],VVVV.PinTypes.Enum);c.enumOptions=["Real (MinFloat .. MaxFloat)","Integer (MinInt .. MaxInt)"];var d=this.addOutputPin("Output",
[0],VVVV.PinTypes.String);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){subtype=c.getValue(a).match(/^(.+) \(/)[1];var h;switch(subtype){case "Real":h=f.getValue(a).toFixed(4);break;case "Integer":h=f.getValue(a).toFixed(0)}d.setValue(a,h)}d.setSliceCount(b)}};VVVV.Nodes.AsString.prototype=new VVVV.Core.Node;VVVV.Nodes.Frac=function(e,g){this.constructor(e,"Frac (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};
var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Whole Part",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Real Part",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var h=f.getValue(a);c.setValue(a,Math.floor(h));d.setValue(a,h-Math.floor(h))}c.setSliceCount(b);d.setSliceCount(b)}};VVVV.Nodes.Frac.prototype=new VVVV.Core.Node;VVVV.Nodes.AddValueSpectral=function(e,g){this.constructor(e,"Add (Value Spectral)",g);this.meta=
{authors:["David M\u00f3r\u00e1sz (micro.D)","Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.addInputPin("Input",[0],VVVV.PinTypes.Value);this.addInputPin("Bin Size",[-1],VVVV.PinTypes.Value);this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),c=0,d=0,b=0;b<e||0<this.inputPins["Bin Size"].getValue(0)&&(0<d||0!=c%this.inputPins["Bin Size"].getSliceCount());b++){if(0==d)var a=0;a+=this.inputPins.Input.getValue(b);
d++;0<this.inputPins["Bin Size"].getValue(0)?d>=this.inputPins["Bin Size"].getValue(c)&&(this.outputPins.Output.setValue(c,a),c++,d=0):this.outputPins.Output.setValue(0,a)}this.outputPins.Output.setSliceCount(c+(0<d))}};VVVV.Nodes.AddValueSpectral.prototype=new VVVV.Core.Node;VVVV.Nodes.WaveShaperValue=function(e,g){this.constructor(e,"WaveShaper (Value)",g);this.meta={authors:["sebl"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",
[0],VVVV.PinTypes.Value),c=this.addInputPin("Shape",["Linear"],VVVV.PinTypes.Enum);c.enumOptions=["Linear","Inverse","Triangle","Sine","Rectangle"];var d=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.initialize=function(){};this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var h=f.getValue(a);switch(c.getValue(a)){case "Linear":d.setValue(a,h);break;case "Inverse":d.setValue(a,1-h);break;case "Triangle":0.5>h?d.setValue(a,2*h):d.setValue(a,2*(1-h));break;case "Sine":inp=
6.28318530717959*((h+0.25)%1);d.setValue(a,Math.sin(inp)/2+0.5);break;case "Rectangle":0.5>h?d.setValue(a,0):d.setValue(a,1)}}d.setSliceCount(b)}};VVVV.Nodes.WaveShaperValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MapValue=function(e,g){this.constructor(e,"Map (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Mirror Mapping Mode not implemented"]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0.5],VVVV.PinTypes.Value),c=this.addInputPin("Source Minimum",
[0],VVVV.PinTypes.Value),d=this.addInputPin("Source Maximum",[1],VVVV.PinTypes.Value),b=this.addInputPin("Destination Minimum",[0],VVVV.PinTypes.Value),a=this.addInputPin("Destination Maximum",[1],VVVV.PinTypes.Value),h=this.addInputPin("Mapping",["Float"],VVVV.PinTypes.Enum);h.enumOptions=["Float","Wrap","Clamp"];var m=this.addOutputPin("Output",[0.5],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=0;g<e;g++){var k=f.getValue(g),n=c.getValue(g),l=d.getValue(g),
u=b.getValue(g),w=a.getValue(g),y=h.getValue(g);if(l==n)m.setValue(g,u);else{k-=n;l-=n;switch(y){case "Clamp":k=Math.max(0,Math.min(l,k));break;case "Wrap":k=(l+k%l)%l}m.setValue(g,k*((w-u)/l)+u)}}m.setSliceCount(e)}};VVVV.Nodes.MapValue.prototype=new VVVV.Core.Node;VVVV.Nodes.MinValue=function(e,g){this.constructor(e,"Min (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addOutputPin("Output",[0],
VVVV.PinTypes.Value),c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,d,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var h=void 0,e=0;e<d.length;e++)if(void 0==h||d[e].getValue(a)<h)h=d[e].getValue(a);f.setValue(a,h)}f.setSliceCount(b)}};VVVV.Nodes.MinValue.prototype=
new VVVV.Core.Node;VVVV.Nodes.MaxValue=function(e,g){this.constructor(e,"Max (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,d,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};
this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var h=void 0,e=0;e<d.length;e++)if(void 0==h||d[e].getValue(a)>h)h=d[e].getValue(a);f.setValue(a,h)}f.setSliceCount(b)}};VVVV.Nodes.MaxValue.prototype=new VVVV.Core.Node;VVVV.Nodes.ModValue=function(e,g){this.constructor(e,"Mod (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addOutputPin("Output",
[0],VVVV.PinTypes.Value),c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,d,b,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var h=d[0].getValue(a),e=1;e<d.length;e++)h=0==d[e].getValue(a)?0:h%d[e].getValue(a);f.setValue(a,h)}f.setSliceCount(b)}};
VVVV.Nodes.ModValue.prototype=new VVVV.Core.Node;VVVV.Nodes.PowerValue=function(e,g){this.constructor(e,"Power (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),c=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),d=[];this.initialize=function(){var b=Math.max(2,c.getValue(0));VVVV.Helpers.dynamicPins(this,d,b,function(a){return this.addInputPin("Input "+
(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){c.pinIsChanged()&&this.initialize();for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){for(var h=d[0].getValue(a),e=1;e<d.length;e++)h=Math.pow(h,d[e].getValue(a));f.setValue(a,h)}f.setSliceCount(b)}};VVVV.Nodes.PowerValue.prototype=new VVVV.Core.Node;VVVV.Nodes.RandomValue=function(e,g){this.constructor(e,"Random (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!0;var f=this.addInputPin("Enabled",[1],VVVV.PinTypes.Value),c=this.addInputPin("Is Integer",[0],VVVV.PinTypes.Value),d=this.addInputPin("Scale",[1],VVVV.PinTypes.Value),b=this.addInputPin("Prevent from doubles",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Output",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),e=0;e<h;e++){var g=f.getValue(e),k=c.getValue(e),p=d.getValue(e),n=b.getValue(e),l=a.getValue(e);void 0==l&&a.setValue(e,0);if(0.5<=g){l=a.getValue(e);
do g=Math.random()*p,0.5<=k&&(g=Math.round(g));while(0.5<=n&&g==l);a.setValue(e,g)}}a.setSliceCount(h)}};VVVV.Nodes.RandomValue.prototype=new VVVV.Core.Node;VVVV.Nodes.SignValue=function(e,g){this.constructor(e,"Sign (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addOutputPin("Sign Part",[0],VVVV.PinTypes.Value),d=this.addOutputPin("Absolute Part",
[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var b=this.getMaxInputSliceCount(),a=0;a<b;a++){var h=f.getValue(a);c.setValue(a,0==h?0:h/Math.abs(h));d.setValue(a,Math.abs(h))}d.setSliceCount(b);c.setSliceCount(b)}};VVVV.Nodes.SignValue.prototype=new VVVV.Core.Node;VVVV.Nodes.InputMorphValue=function(e,g){this.constructor(e,"InputMorph (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Switch",
[0],VVVV.PinTypes.Value),c=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),d=this.addInvisiblePin("Input Count",[2],VVVV.PinTypes.Value),b=[];this.initialize=function(){var a=Math.max(2,d.getValue(0));VVVV.Helpers.dynamicPins(this,b,a,function(a){return this.addInputPin("Input "+(a+1),[0],VVVV.PinTypes.Value)})};this.evaluate=function(){d.pinIsChanged()&&this.initialize();for(var a=this.getMaxInputSliceCount(),h,e,g,k=0;k<a;k++)h=f.getValue(k),e=((Math.floor(h)+b.length)%b.length+b.length)%b.length,
g=((Math.ceil(h)+b.length)%b.length+b.length)%b.length,h-=Math.floor(h),c.setValue(k,(1-h)*b[e].getValue(k)+h*b[g].getValue(k));c.setSliceCount(a)}};VVVV.Nodes.InputMorphValue.prototype=new VVVV.Core.Node;VVVV.Nodes.Sift=function(e,g){this.constructor(e,"Sift (Value)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Input",[0],VVVV.PinTypes.Value),c=this.addInputPin("Filter",[0],VVVV.PinTypes.Value),
d=this.addInputPin("Epsilon",[0],VVVV.PinTypes.Value),b=this.addInputPin("Find",["First"],VVVV.PinTypes.Enum);b.enumOptions=["First","Last","All"];var a=this.addOutputPin("Hits",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Input Index",[0],VVVV.PinTypes.Value),m=this.addOutputPin("Filter Index",[0],VVVV.PinTypes.Value);this.evaluate=function(){this.getMaxInputSliceCount();var e=f.getSliceCount(),g=c.getSliceCount();a.setSliceCount(e);d.getValue(0);for(var k=b.getValue(0),n={},l=0,u=0;u<e;u++){var w=
u;"Last"==k&&(w=e-u-1);var y=f.getValue(w);if("All"!=k){if(n[y]){a.setValue(w,0);continue}n[y]=!0}for(var t=0,x=0;x<g;x++)if(filter=c.getValue(x),filter==y){h.setValue(l,w);m.setValue(l,x);l++;t++;break}a.setValue(w,t)}h.setSliceCount(l);m.setSliceCount(l)}};VVVV.Nodes.Sift.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){function e(){function e(a){return 0<a?parseInt(a):parseInt(a-1)}function f(a,b,c,d,e){return a[0]*b+a[1]*c+a[2]*d+a[3]*e}var c=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,1]],d=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],
[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],b=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,
18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,
128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,
202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],a=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,
0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],
[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]];this.noise2d=function(a,d){var f,k,p;p=0.5*(Math.sqrt(3)-1);p*=a+d;var n=e(a+p),l=e(d+p),u=(3-Math.sqrt(3))/6;p=(n+l)*u;f=a-(n-p);var w=d-(l-p),y,t;f>w?(y=1,t=0):(y=0,t=1);k=f-y+u;var x=w-t+u;p=f-1+2*u;var u=w-1+2*u,v=n&255,l=l&255,n=b[v+b[l]]%12;y=b[v+y+b[l+t]]%12;t=b[v+1+b[l+1]]%12;l=0.5-f*f-w*w;0>l?f=0:(l*=l,f=l*l*(c[n][0]*f+c[n][1]*w));w=0.5-k*k-x*x;0>w?k=0:(w*=w,k=w*w*(c[y][0]*k+c[y][1]*x));x=0.5-p*p-u*u;0>x?p=0:
(x*=x,p=x*x*(c[t][0]*p+c[t][1]*u));return 70*(f+k+p)};this.noise3d=function(a,d,f){var k,p,n,l=(a+d+f)*(1/3),u=e(a+l),w=e(d+l),y=e(f+l),l=1/6;n=(u+w+y)*l;k=a-(u-n);p=d-(w-n);var t=f-(y-n),x,v,A,s,z,B;k>=p?p>=t?(x=1,A=v=0,z=s=1,B=0):(k>=t?(x=1,A=v=0):(v=x=0,A=1),s=1,z=0,B=1):p<t?(v=x=0,A=1,s=0,B=z=1):k<t?(x=0,v=1,s=A=0,B=z=1):(x=0,v=1,A=0,z=s=1,B=0);var D=k-x+l,C=p-v+l,F=t-A+l;n=k-s+2*l;a=p-z+2*l;var J=t-B+2*l;f=k-1+3*l;d=p-1+3*l;var l=t-1+3*l,u=u&255,H=w&255,M=y&255,w=b[u+b[H+b[M]]]%12,y=b[u+x+b[H+
v+b[M+A]]]%12;s=b[u+s+b[H+z+b[M+B]]]%12;u=b[u+1+b[H+1+b[M+1]]]%12;z=0.6-k*k-p*p-t*t;0>z?k=0:(z*=z,k=z*z*(c[w][0]*k+c[w][1]*p+c[w][2]*t));p=0.6-D*D-C*C-F*F;0>p?p=0:(p*=p,p=p*p*(c[y][0]*D+c[y][1]*C+c[y][2]*F));D=0.6-n*n-a*a-J*J;0>D?n=0:(D*=D,n=D*D*(c[s][0]*n+c[s][1]*a+c[s][2]*J));a=0.6-f*f-d*d-l*l;0>a?f=0:(a*=a,f=a*a*(c[u][0]*f+c[u][1]*d+c[u][2]*l));return 32*(k+p+n+f)};this.noise4d=function(c,m,k,q){var p=(Math.sqrt(5)-1)/4,n=(5-Math.sqrt(5))/20,l,u,w,p=(c+m+k+q)*p,y=e(c+p),t=e(m+p),x=e(k+p),v=e(q+
p),p=(y+t+x+v)*n;l=c-(y-p);u=m-(t-p);var A=k-(x-p),s=q-(v-p);q=(l>u?32:0)+(l>A?16:0)+(u>A?8:0)+(l>s?4:0)+(u>s?2:0)+(A>s?1:0);var z,B,D,C,F,J,H,M,G,L,E,I;z=3<=a[q][0]?1:0;B=3<=a[q][1]?1:0;D=3<=a[q][2]?1:0;C=3<=a[q][3]?1:0;F=2<=a[q][0]?1:0;J=2<=a[q][1]?1:0;H=2<=a[q][2]?1:0;M=2<=a[q][3]?1:0;G=1<=a[q][0]?1:0;L=1<=a[q][1]?1:0;E=1<=a[q][2]?1:0;I=1<=a[q][3]?1:0;var O=l-z+n,P=u-B+n,Q=A-D+n,R=s-C+n;w=l-F+2*n;var K=u-J+2*n,S=A-H+2*n,T=s-M+2*n,p=l-G+3*n;c=u-L+3*n;var U=A-E+3*n,V=s-I+3*n;q=l-1+4*n;k=u-1+4*n;
m=A-1+4*n;var n=s-1+4*n,y=y&255,t=t&255,N=x&255,v=v&255,x=b[y+b[t+b[N+b[v]]]]%32;z=b[y+z+b[t+B+b[N+D+b[v+C]]]]%32;F=b[y+F+b[t+J+b[N+H+b[v+M]]]]%32;G=b[y+G+b[t+L+b[N+E+b[v+I]]]]%32;v=b[y+1+b[t+1+b[N+1+b[v+1]]]]%32;t=0.6-l*l-u*u-A*A-s*s;0>t?l=0:(t*=t,l=t*t*f(d[x],l,u,A,s));u=0.6-O*O-P*P-Q*Q-R*R;0>u?u=0:(u*=u,u=u*u*f(d[z],O,P,Q,R));A=0.6-w*w-K*K-S*S-T*T;0>A?w=0:(A*=A,w=A*A*f(d[F],w,K,S,T));K=0.6-p*p-c*c-U*U-V*V;0>K?p=0:(K*=K,p=K*K*f(d[G],p,c,U,V));c=0.6-q*q-k*k-m*m-n*n;0>c?q=0:(c*=c,q=c*c*f(d[v],q,k,
m,n));return 27*(l+u+w+p+q)}}VVVV.Nodes.Join2dVector=function(e,f){this.constructor(e,"Vector (2d Join)",f);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInputPin("X",[0],VVVV.PinTypes.Value),d=this.addInputPin("Y",[0],VVVV.PinTypes.Value),b=this.addOutputPin("XY",[0,0],VVVV.PinTypes.Value);this.evaluate=function(){var a=this.getMaxInputSliceCount();b.setSliceCount(2*a);for(var h=0;h<a;h++)b.setValue(2*h,c.getValue(h)),b.setValue(2*
h+1,d.getValue(h))}};VVVV.Nodes.Join2dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Join3dVector=function(e,f){this.constructor(e,"Vector (3d Join)",f);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInputPin("X",[0],VVVV.PinTypes.Value),d=this.addInputPin("Y",[0],VVVV.PinTypes.Value),b=this.addInputPin("Z",[0],VVVV.PinTypes.Value),a=this.addOutputPin("XYZ",[0,0,0],VVVV.PinTypes.Value);this.evaluate=function(){var h=this.getMaxInputSliceCount();
a.setSliceCount(3*h);for(var e=0;e<h;e++)a.setValue(3*e,c.getValue(e)),a.setValue(3*e+1,d.getValue(e)),a.setValue(3*e+2,b.getValue(e))}};VVVV.Nodes.Join3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Join4dVector=function(e,f){this.constructor(e,"Vector (4d Join)",f);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInputPin("X",[0],VVVV.PinTypes.Value),d=this.addInputPin("Y",[0],VVVV.PinTypes.Value),b=this.addInputPin("Z",[0],
VVVV.PinTypes.Value),a=this.addInputPin("W",[0],VVVV.PinTypes.Value),h=this.addOutputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value);this.evaluate=function(){var e=this.getMaxInputSliceCount();h.setSliceCount(4*e);for(var g=0;g<e;g++)h.setValue(4*g,c.getValue(g)),h.setValue(4*g+1,d.getValue(g)),h.setValue(4*g+2,b.getValue(g)),h.setValue(4*g+3,a.getValue(g))}};VVVV.Nodes.Join4dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split2dVector=function(e,f){this.constructor(e,"Vector (2d Split)",f);this.meta={authors:["Julien Vulliet"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInputPin("XY",[0],VVVV.PinTypes.Value),d=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var a=this.getMaxInputSliceCount(),h=0,e=0;e<a;e+=2)d.setValue(h,c.getValue(e)),b.setValue(h,c.getValue(e+1)),h++;d.setSliceCount(h);b.setSliceCount(h)}};VVVV.Nodes.Split2dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split3dVector=function(e,f){this.constructor(e,
"Vector (3d Split)",f);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInputPin("XYZ",[0],VVVV.PinTypes.Value),d=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Z",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var h=this.getMaxInputSliceCount(),e=0,g=0;g<h;g+=3)d.setValue(e,c.getValue(g)),b.setValue(e,c.getValue(g+1)),a.setValue(e,c.getValue(g+2)),
e++;d.setSliceCount(e);b.setSliceCount(e);a.setSliceCount(e)}};VVVV.Nodes.Split3dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Split4dVector=function(e,f){this.constructor(e,"Vector (4d Split)",f);this.meta={authors:["Julien Vulliet"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[""]};var c=this.addInputPin("XYZW",[0,0,0,1],VVVV.PinTypes.Value),d=this.addOutputPin("X",[0],VVVV.PinTypes.Value),b=this.addOutputPin("Y",[0],VVVV.PinTypes.Value),a=this.addOutputPin("Z",[0],VVVV.PinTypes.Value),
h=this.addOutputPin("W",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),g=0,f=0;f<e;f+=4)d.setValue(g,c.getValue(f)),b.setValue(g,c.getValue(f+1)),a.setValue(g,c.getValue(f+2)),h.setValue(g,c.getValue(f+3)),g++;d.setSliceCount(g);b.setSliceCount(g);a.setSliceCount(g);h.setSliceCount(g)}};VVVV.Nodes.Split4dVector.prototype=new VVVV.Core.Node;VVVV.Nodes.Simplex2d=function(g,f){this.constructor(g,"Simplex (2d)",f);this.meta={authors:["woei"],original_authors:["tonfilm"],
credits:[],compatibility_issues:[]};var c=this.addInputPin("Position Input XY",[0.5,0.5],VVVV.PinTypes.Value),d=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),b=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=new e;this.evaluate=function(){for(var e=Math.ceil(Math.max(0.5*c.getSliceCount())),g=parseInt(d.getValue(0)),f=b.getValue(0),k=a.getValue(0),l=0;l<e;l++){for(var u=
c.getValue(2*l),w=c.getValue(2*l+1),y=0,t=0;t<=g;t++)var x=Math.pow(f,t),y=y+m.noise2d(u*x,w*x)*Math.pow(k,t);h.setValue(l,y)}h.setSliceCount(e)}};VVVV.Nodes.Simplex2d.prototype=new VVVV.Core.Node;VVVV.Nodes.Simplex3d=function(g,f){this.constructor(g,"Simplex (3d)",f);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Position Input XYZ",[0.5,0.5,0.5],VVVV.PinTypes.Value),d=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),b=this.addInputPin("Frequency",
[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=new e;this.evaluate=function(){for(var e=Math.ceil(Math.max(c.getSliceCount()/3)),g=parseInt(d.getValue(0)),f=b.getValue(0),k=a.getValue(0),l=0;l<e;l++){for(var u=c.getValue(3*l),w=c.getValue(3*l+1),y=c.getValue(3*l+2),t=0,x=0;x<=g;x++)var v=Math.pow(f,x),t=t+m.noise3d(u*v,w*v,y*v)*Math.pow(k,x);h.setValue(l,t)}h.setSliceCount(e)}};VVVV.Nodes.Simplex3d.prototype=
new VVVV.Core.Node;VVVV.Nodes.Simplex4d=function(g,f){this.constructor(g,"Simplex (4d)",f);this.meta={authors:["woei"],original_authors:["tonfilm"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Position Input XYZW",[0.5,0.5,0.5,0.5],VVVV.PinTypes.Value),d=this.addInputPin("Octaves",[0],VVVV.PinTypes.Value),b=this.addInputPin("Frequency",[1],VVVV.PinTypes.Value),a=this.addInputPin("Persistance",[0.5],VVVV.PinTypes.Value),h=this.addOutputPin("Output",[0],VVVV.PinTypes.Value),m=new e;this.evaluate=
function(){for(var e=Math.ceil(Math.max(c.getSliceCount()/3)),g=parseInt(d.getValue(0)),f=b.getValue(0),k=a.getValue(0),l=0;l<e;l++){for(var u=c.getValue(4*l),w=c.getValue(4*l+1),y=c.getValue(4*l+2),t=c.getValue(4*l+3),x=0,v=0;v<=g;v++)var A=Math.pow(f,v),x=x+m.noise4d(u*A,w*A,y*A,t*A)*Math.pow(k,v);h.setValue(l,x)}h.setSliceCount(e)}};VVVV.Nodes.Simplex4d.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.ShaderCodeResources={"%VVVV%/effects/PhongDirectional.vvvvjs.fx":void 0,"%VVVV%/effects/GouraudDirectional.vvvvjs.fx":void 0,"%VVVV%/effects/Constant.vvvvjs.fx":void 0};VVVV.Types.ShaderCodeResource=function(){var e="";this.relatedNodes=[];this.definingNode=void 0;this.setSourceCode=function(f){e=f;for(f=0;f<this.relatedNodes.length;f++)this.relatedNodes[f].shaderSourceUpdated(e)};this.addRelatedNode=function(f){this.relatedNodes.push(f);""!=e&&f.shaderSourceUpdated(e)}};mat4.identity(mat4.create());
VVVV.Types.WebGlRenderState=function(){this.alphaBlending=!0;this.srcBlendMode="SRC_ALPHA";this.destBlendMode="ONE_MINUS_SRC_ALPHA";this.enableZWrite=!0;this.depthFunc="LEQUAL";this.depthOffset=0;this.cullFace=void 0;this.polygonDrawMode="TRIANGLES";this.copy_attributes=function(e){this.alphaBlending=e.alphaBlending;this.alphaFunc=e.alphaFunc;this.srcBlendMode=e.srcBlendMode;this.destBlendMode=e.destBlendMode;this.enableZwrite=e.enableZWrite;this.depthFunc=e.depthFunc;this.depthOffset=e.depthOffset;
this.cullFace=e.cullFace;this.polygonDrawMode=e.polygonDrawMode};this.apply=function(e){this.alphaBlending?e.enable(e.BLEND):e.disable(e.BLEND);e.blendFunc(e[this.srcBlendMode],e[this.destBlendMode]);void 0!==this.cullFace?(e.enable(e.CULL_FACE),e.frontFace(e[this.cullFace]),e.cullFace(e.BACK)):e.disable(e.CULL_FACE);e.depthMask(this.enableZWrite)}};VVVV.Types.VertexBuffer=function(e,f){this.vbo=void 0;this.subBuffers={};this.length=0;this.setSubBuffer=function(c,d,b){this.subBuffers[c]={usage:c,
data:new Float32Array(b),size:d,offset:this.length};this.length+=this.subBuffers[c].data.byteLength};this.updateSubBuffer=function(c,d){this.subBuffers[c].data=new Float32Array(d)};this.create=function(){this.vbo=e.createBuffer()};this.update=function(){e.bindBuffer(e.ARRAY_BUFFER,this.vbo);e.bufferData(e.ARRAY_BUFFER,this.length,e.DYNAMIC_DRAW);_(this.subBuffers).each(function(c){e.bufferSubData(e.ARRAY_BUFFER,c.offset,c.data)})}};VVVV.Types.Mesh=function(e,f,c){this.vertexBuffer=f;this.indexBuffer=
e.createBuffer();this.update=function(c){e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),e.DYNAMIC_DRAW);this.numIndices=c.length}};VVVV.Types.Layer=function(){this.mesh=null;this.textures=[];this.shader=null;this.uniforms={};this.uniformNames=[];this.renderState=e;this.toString=function(){return"Layer"}};VVVV.PinTypes.WebGlResource={typeName:"WebGlResource",reset_on_disconnect:!0,connectionChangedHandlers:{webglresource:function(){function e(b){return"WebGlResource"==
b||"WebGlTexture"==b}if(this.direction!=VVVV.PinDirection.Input){var f=this.node,c=f.findDownstreamNodes("Renderer (EX9)");f.renderContexts||(f.renderContexts=[]);void 0==f.contextChanged&&(f.contextChanged=!1);for(var d=0;d<c.length;d++)f.contextChanged|=!f.renderContexts[d]||f.renderContexts[d].canvas.id!=c[d].ctxt.id,f.renderContexts[d]=c[d].ctxt,f.dirty=!0;f.renderContexts.length!=c.length&&(f.renderContexts.length=c.length,f.contextChanged=!0,f.dirty=!0);f.isSubpatch||_(f.inputPins).each(function(b){var a;
b.markPinAsChanged();"Renderer (EX9)"!=f.nodename&&b.isConnected()&&(0<b.links.length?a=b.links[0].fromPin:0<b.masterPin.links[0].fromPin.links.length&&(a=b.masterPin.links[0].fromPin),a&&e(a.typeName)&&a.connectionChanged())});this.masterPin&&e(this.masterPin.typeName)&&this.masterPin.connectionChanged()}}},defaultValue:function(){return new VVVV.Types.Layer}};VVVV.PinTypes.WebGlTexture={typeName:"WebGlTexture",reset_on_disconnect:!0,connectionChangedHandlers:{webglresource:VVVV.PinTypes.WebGlResource.connectionChangedHandlers.webglresource},
defaultValue:function(){return VVVV.DefaultTexture}};var e=new VVVV.Types.WebGlRenderState;VVVV.PinTypes.WebGlRenderState={typeName:"WebGlRenderState",reset_on_disconnect:!0,defaultValue:function(){return e}};VVVV.DefaultTexture="Empty Texture";VVVV.Types.ShaderProgram=function(){this.uniformSpecs={};this.attributeSpecs={};this.attribSemanticMap={};this.uniformSemanticMap={};var e="",f="",c,d;this.isSetup=!1;this.shaderProgram=void 0;this.log="";var b=this;this.extractSemantics=function(a){b.attributeSpecs=
{};b.attribSemanticMap={};b.uniformSpecs={};b.uniformSemanticMap={};for(var c=/(uniform|attribute) ([a-zA-Z]+)([0-9xD]*) ([a-zA-Z0-9_]+)( : ([A-Z0-9]+))?( = \{?([^;\}]+)\}?)?;/g,d;d=c.exec(a);)"attribute"!=d[1]||b.attributeSpecs[d[4]]?"uniform"!=d[1]||b.uniformSpecs[d[4]]||(b.uniformSpecs[d[4]]={varname:d[4],semantic:d[6],position:0,type:d[2],defaultValue:d[8],dimension:""==d[3]?1:d[3]},void 0!=d[6]&&(b.uniformSemanticMap[d[6]]=d[4])):(b.attributeSpecs[d[4]]={varname:d[4],semantic:d[6],position:0},
void 0!=d[6]&&(b.attribSemanticMap[d[6]]=d[4]))};this.setVertexShader=function(a){e=a};this.setFragmentShader=function(a){f=a};this.setup=function(a){this.log="";c=a.createShader(a.VERTEX_SHADER);a.shaderSource(c,e.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,"$1"));a.compileShader(c);a.getShaderParameter(c,a.COMPILE_STATUS)||(this.log=a.getShaderInfoLog(c),console.log(this.log));d=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(d,f.replace(/((uniform|attribute) [a-zA-Z0-9]+ [a-zA-Z0-9_]+)[^;]*/g,
"$1"));a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(this.log=a.getShaderInfoLog(d),console.log(this.log));this.shaderProgram=a.createProgram();a.attachShader(this.shaderProgram,c);a.attachShader(this.shaderProgram,d);a.linkProgram(this.shaderProgram);a.getProgramParameter(this.shaderProgram,a.LINK_STATUS)||console.log("Could not initialise shaders");_(this.attributeSpecs).each(function(c){c.position=a.getAttribLocation(b.shaderProgram,c.varname)});_(this.uniformSpecs).each(function(c){c.position=
a.getUniformLocation(b.shaderProgram,c.varname)});this.isSetup=!0;return""==this.log}};VVVV.Nodes.FileTexture=function(e,f){this.constructor(e,"FileTexture (EX9.Texture)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["Always loads in background","No reload pin","No preload pin (preloading handled by browser)","No up and running pin","No texture info outputs"]};this.auto_evaluate=!1;var c=this.addInputPin("Filename",[""],
VVVV.PinTypes.String),d=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),b=this.addInvisiblePin("Type",["Texture"],VVVV.PinTypes.Enum);b.enumOptions=["Texture","Cube Texture"];var a=[];this.evaluate=function(){if(this.renderContexts){var e=this.renderContexts[0];if(e){if(this.contextChanged){for(var f=0;f<a.length;f++)a[f].context.deleteTexture(a[f]);a=[]}if(c.pinIsChanged()||b.pinIsChanged()||this.contextChanged){for(var g=b.getValue(0),q=this.getMaxInputSliceCount(),f=0;f<q;f++){var p=
VVVV.Helpers.prepareFilePath(c.getValue(f),this.parentPatch);0===p.indexOf("http://")&&void 0!==VVVV.ImageProxyPrefix&&(p=VVVV.ImageProxyPrefix+encodeURI(p));a[f]=e.createTexture();a[f].context=e;"Texture"==g?(a[f].image=new Image,a[f].image.onload=function(b){return function(){e.bindTexture(e.TEXTURE_CUBE_MAP,null);e.bindTexture(e.TEXTURE_2D,a[b]);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a[b].image);e.generateMipmap(e.TEXTURE_2D);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,
e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST);e.bindTexture(e.TEXTURE_2D,null);d.setValue(b,a[b])}}(f),a[f].image.src=p):"Cube Texture"==g&&(a[f].image=new Image,a[f].image.onload=function(b){return function(){var c=[{face:e.TEXTURE_CUBE_MAP_POSITIVE_X,offset:[2,1]},{face:e.TEXTURE_CUBE_MAP_NEGATIVE_X,offset:[0,1]},{face:e.TEXTURE_CUBE_MAP_POSITIVE_Y,offset:[1,0]},{face:e.TEXTURE_CUBE_MAP_NEGATIVE_Y,offset:[1,2]},{face:e.TEXTURE_CUBE_MAP_POSITIVE_Z,offset:[1,
1]},{face:e.TEXTURE_CUBE_MAP_NEGATIVE_Z,offset:[3,1]}];e.bindTexture(e.TEXTURE_CUBE_MAP,a[b]);var f=k('<canvas style="display:none" width="'+this.width/4+'" height="'+this.height/3+'"></canvas>');k("body").append(f);for(var g=f.get(0).getContext("2d"),m=0;6>m;m++)g.save(),g.translate(-this.width/4*c[m].offset[0],-this.height/3*c[m].offset[1]),g.drawImage(this,0,0),e.texImage2D(c[m].face,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,f.get(0)),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_CUBE_MAP,
e.TEXTURE_MIN_FILTER,e.NEAREST),g.restore();e.bindTexture(e.TEXTURE_CUBE_MAP,null);f.remove();d.setValue(b,a[b])}}(f),a[f].image.src=p);d.setValue(f,VVVV.defaultTexture)}d.setSliceCount(q)}this.contextChanged=!1}}};this.destroy=function(){for(var b=0;b<a.length;b++)a[b].context.deleteTexture(a[b])}};VVVV.Nodes.FileTexture.prototype=new VVVV.Core.Node;VVVV.Nodes.DX9Texture=function(e,f){this.constructor(e,"DX9Texture (EX9.Texture)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:[]};var c=this.addInputPin("Source",[],VVVV.PinTypes.WebGlResource),d=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),b,a=!1;this.evaluate=function(){if(this.renderContexts){var e=this.renderContexts[0];if(e){this.contextChanged&&b&&(b.context.deleteTexture(b),b=void 0);if(c.isConnected()){var f=c.getValue(0);if(!f)return;0==(f.width&f.width-1)&&0==(f.height&f.height-1)||console.log("Warning: Source renderer's width/height is not a power of 2. DX9Texture will most likely not work.");
f instanceof WebGLTexture?d.setValue(0,f):(a||console.warn("Using DX9Texture with Canvas Renderer input is deprecated and will be removed. Use CanvasTexture (EX9.Texture) instead."),a=!0,void 0==b&&(b=e.createTexture(),b.context=e),e.bindTexture(e.TEXTURE_2D,b),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,f),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),d.setValue(0,b))}else delete b,
e.deleteTexture(b),d.setValue(0,void 0);this.contextChanged=!1}}};this.destroy=function(){b&&b.context.deleteTexture(b)}};VVVV.Nodes.DX9Texture.prototype=new VVVV.Core.Node;VVVV.Nodes.CanvasTextureWebGl=function(e,f){this.constructor(e,"CanvasTexture (EX9.Texture)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:[],credits:[],compatibility_issues:[]};var c=this.addInputPin("Source",[],VVVV.PinTypes.CanvasGraphics),d=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),
b;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a){this.contextChanged&&b&&(b.context.deleteTexture(b),b=void 0);if(c.isConnected()){var e=c.getValue(0);if(!e)return;0==(e.width&e.width-1)&&0==(e.height&e.height-1)||console.log("Warning: Source renderer's width/height is not a power of 2. DX9Texture will most likely not work.");void 0==b&&(b=a.createTexture(),b.context=a);a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e);
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.bindTexture(a.TEXTURE_2D,null);d.setValue(0,b)}else delete b,a.deleteTexture(b),d.setValue(0,void 0);this.contextChanged=!1}}};this.destroy=function(){b&&b.context.deleteTexture(b)}};VVVV.Nodes.CanvasTextureWebGl.prototype=new VVVV.Core.Node;VVVV.Nodes.VideoTexture=function(e,f){this.constructor(e,"VideoTexture (EX9.Texture VMR9)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:["Only supports power-of-2 sized videos","Has no output pins for meta data"]};var c=this.addInputPin("Video",[],this),d=this.addOutputPin("Texture Out",[],VVVV.PinTypes.WebGlTexture),b;this.evaluate=function(){if(this.renderContexts){var a=this.renderContexts[0];if(a)if(c.isConnected()){var e=c.getValue(0);0==(e.videoWidth&e.videoWidth-1)&&0==(e.videoHeight&e.videoHeight-1)||console.log("Warning: Video width/height is not a power of 2. VideoTexture will most likely not work.");
if(void 0==b||this.contextChanged)b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.bindTexture(a.TEXTURE_2D,null);d.setValue(0,b);this.contextChanged=!1}else delete b,a.deleteTexture(b),d.setValue(0,void 0)}}};VVVV.Nodes.VideoTexture.prototype=new VVVV.Core.Node;VVVV.Nodes.VertexBufferJoin=function(e,f){this.constructor(e,
"VertexBuffer (EX9.Geometry Join)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Position XYZ",[0,0,0],VVVV.PinTypes.Value),d=this.addInputPin("Normal XYZ",[0,0,0],VVVV.PinTypes.Value),b=this.addInputPin("Texture Coordinate 0 XY",[0,0],VVVV.PinTypes.Value),a=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),h=this.addOutputPin("Vertex Buffer",[],VVVV.PinTypes.WebGlResource),m=null,k=[],q=[],p=
[],n;this.evaluate=function(){var e=this.renderContexts[0];if(e&&0.5<=a.getValue(0)){n=this.getMaxInputSliceCount();for(var f=0;f<n;f++)k[f]=c.getValue(f),q[f]=b.getValue(f),p[f]=d.getValue(f);k.length=q.length=p.length=n;m||(m=new VVVV.Types.VertexBuffer(e,k),m.create());m.setSubBuffer("POSITION",3,k);m.setSubBuffer("TEXCOORD0",2,q);m.setSubBuffer("NORMAL",3,p);m.update();h.setValue(0,m)}}};VVVV.Nodes.VertexBufferJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.MeshJoin=function(e,f){this.constructor(e,
"Mesh (EX9.Geometry Join)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Vertex Buffer",[],VVVV.PinTypes.WebGlResource),d=this.addInputPin("Indices",[0],VVVV.PinTypes.Value),b=this.addInputPin("Apply",[1],VVVV.PinTypes.Value),a=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),h=null;this.evaluate=function(){var e=this.renderContexts[0];e&&(0.5<=b.getValue(0)&&(c.isConnected()?(h||(h=new VVVV.Types.Mesh(e,
c.getValue(0),d.values)),(d.pinIsChanged()||this.contextChanged)&&h.update(d.values),(d.pinIsChanged()||c.pinIsChanged()||this.contextChanged)&&a.setValue(0,h)):(a.setValue(0,void 0),delete h)),this.contextChanged=!1)}};VVVV.Nodes.MeshJoin.prototype=new VVVV.Core.Node;VVVV.Nodes.Grid=function(e,f){this.constructor(e,"Grid (EX9.Geometry)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Resolution X",
[2],VVVV.PinTypes.Value),d=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value),b=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),a=null;this.evaluate=function(){if(this.renderContexts){var e=this.renderContexts[0];if(e){for(var f=parseInt(c.getValue(0)),g=parseInt(d.getValue(0)),k=[],p=[],n=[],l=0,u=0;u<g;u++)for(var w=0;w<f;w++)k.push(parseFloat(w)/(f-1)-0.5),k.push(0.5-parseFloat(u)/(g-1)),k.push(0),l++,p.push(0),p.push(0),p.push(1),n.push(parseFloat(w)/(f-1)),n.push(parseFloat(u)/
(g-1));l=new VVVV.Types.VertexBuffer(e,k);l.create();l.setSubBuffer("POSITION",3,k);l.setSubBuffer("TEXCOORD0",2,n);l.setSubBuffer("NORMAL",3,p);l.update();k=[];for(u=0;u<g-1;u++)for(w=0;w<f-1;w++)p=w+f*u,k.push(p),k.push(p+1),k.push(p+f+1),k.push(p+f+1),k.push(p+f),k.push(p);a=new VVVV.Types.Mesh(e,l,k);a.update(k);b.setValue(0,a)}}}};VVVV.Nodes.Grid.prototype=new VVVV.Core.Node;VVVV.Nodes.Sphere=function(e,f){this.constructor(e,"Sphere (EX9.Geometry)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Radius",[0.5],VVVV.PinTypes.Value),d=this.addInputPin("Resolution X",[15],VVVV.PinTypes.Value),b=this.addInputPin("Resolution Y",[15],VVVV.PinTypes.Value),a=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),h=null;this.evaluate=function(){if(this.renderContexts){var e=this.renderContexts[0];if(e){for(var f=parseInt(d.getValue(0)),g=parseInt(b.getValue(0)),k=c.getValue(0),n=[],l=[],u=[],w=0;w<g+1;w++)for(var y=
Math.cos(-parseFloat(w)/g*Math.PI),t=0;t<f;t++){var x=Math.cos(2*(parseFloat(t)/f)*Math.PI)*Math.cos(Math.asin(y)),v=Math.sin(2*(parseFloat(t)/f)*Math.PI)*Math.cos(Math.asin(y));n.push(x*k);n.push(y*k);n.push(v*k);l.push(x);l.push(y);l.push(v);u.push(parseFloat(t)/f);u.push(parseFloat(w)/g)}k=new VVVV.Types.VertexBuffer(e,n);k.create();k.setSubBuffer("POSITION",3,n);k.setSubBuffer("TEXCOORD0",2,u);k.setSubBuffer("NORMAL",3,l);k.update();n=[];for(w=0;w<g;w++)for(t=0;t<f;t++)l=f*w,u=t+l,n.push(u),n.push((u+
1)%f+l),n.push((u+1)%f+f+l),n.push((u+1)%f+f+l),n.push(u+f),n.push(u);h=new VVVV.Types.Mesh(e,k,n);h.update(n);a.setValue(0,h)}}}};VVVV.Nodes.Sphere.prototype=new VVVV.Core.Node;VVVV.Nodes.Cylinder=function(e,f){this.constructor(e,"Cylinder (EX9.Geometry)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Radius 1",[0.5],VVVV.PinTypes.Value),d=this.addInputPin("Radius 2",[0.5],VVVV.PinTypes.Value),
b=this.addInputPin("Length",[1],VVVV.PinTypes.Value),a=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),h=this.addInputPin("Caps",[1],VVVV.PinTypes.Value),m=this.addInputPin("Resolution X",[15],VVVV.PinTypes.Value),k=this.addInputPin("Resolution Y",[1],VVVV.PinTypes.Value),q=this.addOutputPin("Mesh",[],VVVV.PinTypes.WebGlResource),p=null;this.evaluate=function(){if(this.renderContexts){var e=this.renderContexts[0];if(e){var f=parseInt(m.getValue(0)),g=parseInt(k.getValue(0)),w=c.getValue(0),y=d.getValue(0),
t=b.getValue(0),x=a.getValue(0),v=[],A=[],s=[];v.push(0);v.push(t/2);v.push(0);A.push(0);A.push(1);A.push(0);s.push(0);s.push(0);v.push(0);v.push(-t/2);v.push(0);A.push(0);A.push(-1);A.push(0);s.push(0);s.push(0);for(var z=0;z<g+1;z++)for(var B=parseFloat(z)/g,D=(B-0.5)*-t,C=0;C<f+1;C++){var F=Math.cos(2*(parseFloat(C)/f)*Math.PI*x-Math.PI*x-Math.PI/2),J=Math.sin(2*(parseFloat(C)/f)*Math.PI*x-Math.PI*x-Math.PI/2),H=B*y+(1-B)*w;v.push(F*H);v.push(D);v.push(J*H);A.push(F);A.push(0);A.push(J);s.push(parseFloat(C)/
f);s.push(parseFloat(z)/g)}w=new VVVV.Types.VertexBuffer(e,v);w.create();w.setSubBuffer("POSITION",3,v);w.setSubBuffer("TEXCOORD0",2,s);w.setSubBuffer("NORMAL",3,A);w.update();v=[];if(0.5<h.getValue(0))for(B=0;2>B;B++)for(C=0;C<f;C++)v.push(B),v.push(2+C+B+B*g*(f+1)),v.push(2+C+(1-B)+B*g*(f+1));for(z=0;z<g;z++)for(C=0;C<f;C++)B=C+(f+1)*z+2,v.push(B),v.push(B+1),v.push(B+f+2),v.push(B+f+2),v.push(B+f+1),v.push(B);p=new VVVV.Types.Mesh(e,w,v);p.update(v);q.setValue(0,p)}}}};VVVV.Nodes.Cylinder.prototype=
new VVVV.Core.Node;VVVV.Nodes.BlendWebGLAdvanced=function(e,f){function c(a){switch(a){case "One":return"ONE";case "Zero":return"ZERO";case "SrcAlpha":return"SRC_ALPHA";case "InvSrcAlpha":return"ONE_MINUS_SRC_ALPHA";case "DestAlpha":return"DST_ALPHA";case "InvDestAlpha":return"ONE_MINUS_DST_ALPHA";case "SrcColor":return"SRC_COLOR";case "InvSrcColor":return"ONE_MINUS_SRC_COLOR";case "DestColor":return"DST_COLOR";case "InvDestColor":return"ONE_MINUS_DST_COLOR"}return null}this.constructor(e,"Blend (EX9.RenderState Advanced)",
f);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var d=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),b=this.addInputPin("Alpha Blending",[1],VVVV.PinTypes.Value),a=this.addInputPin("Source Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum),h=this.addInputPin("Destination Blend Mode",["SrcAlpha"],VVVV.PinTypes.Enum);a.enumOptions=h.enumOptions="One Zero SrcAlpha InvSrcAlpha DestAlpha InvDestAlpha SrcColor InvSrcColor DestColor InvDestColor".split(" ");
var m=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),k=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),f=0;f<e;f++)void 0==k[f]&&(k[f]=new VVVV.Types.WebGlRenderState),k[f].copy_attributes(d.getValue(f)),k[f].alphaBlending=0.5<b.getValue(f),k[f].srcBlendMode=c(a.getValue(f)),k[f].destBlendMode=c(h.getValue(f)),m.setValue(f,k[f]);m.setSliceCount(e)}};VVVV.Nodes.BlendWebGLAdvanced.prototype=new VVVV.Core.Node;VVVV.Nodes.BlendWebGL=function(e,f){this.constructor(e,
"Blend (EX9.RenderState)",f);this.meta={authors:["Matthias Zauner, woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),d=this.addInputPin("Draw Mode",["Blend"],VVVV.PinTypes.Enum);d.enumOptions=["Add","Blend","ColorAsAlphaAdd","ColorAsAlphaBlend","Multiply"];var b=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),
f=0;f<e;f++){void 0==a[f]&&(a[f]=new VVVV.Types.WebGlRenderState);a[f].copy_attributes(c.getValue(f));switch(d.getValue(f)){case "Add":a[f].srcBlendMode="SRC_ALPHA";a[f].destBlendMode="ONE";break;case "Blend":a[f].srcBlendMode="SRC_ALPHA";a[f].destBlendMode="ONE_MINUS_SRC_ALPHA";break;case "ColorAsAlphaAdd":a[f].srcBlendMode="SRC_COLOR";a[f].destBlendMode="ONE";break;case "ColorAsAlphaBlend":a[f].srcBlendMode="SRC_COLOR";a[f].destBlendMode="ONE_MINUS_SRC_COLOR";break;case "Multiply":a[f].srcBlendMode=
"ZERO",a[f].destBlendMode="SRC_COLOR"}b.setValue(f,a[f])}b.setSliceCount(e)}};VVVV.Nodes.BlendWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.FillWebGL=function(e,f){this.constructor(e,"Fill (EX9.RenderState)",f);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["does not actually draw wireframe, because this is not supported in WebGL, but makes renderer use gl.LINE instead of gl.TRIANGLES when drawing"]};var c=this.addInputPin("Render State In",
[],VVVV.PinTypes.WebGlRenderState),d=this.addInputPin("Fill Mode",["Solid"],VVVV.PinTypes.Enum);d.enumOptions=["Point","Solid","WireFrame"];var b=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),f=0;f<e;f++){void 0==a[f]&&(a[f]=new VVVV.Types.WebGlRenderState);a[f].copy_attributes(c.getValue(f));switch(d.getValue(f)){case "Point":a[f].polygonDrawMode="POINTS";break;case "Solid":a[f].polygonDrawMode="TRIANGLES";
break;case "WireFrame":a[f].polygonDrawMode="LINES"}b.setValue(f,a[f])}b.setSliceCount(e)}};VVVV.Nodes.FillWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.ZWriteEnableWebGL=function(e,f){function c(a){switch(a){case "Never":return"NEVER";case "Less":return"LESS";case "LessEqual":return"LEQUAL";case "Equal":return"EQUAL";case "NotEqual":return"NOTEQUAL";case "Greater":return"GREATER";case "GreaterEqual":return"GEQUAL";case "Always":return"ALWAYS"}return null}this.constructor(e,"ZWriteEnable (EX9.RenderState)",
f);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var d=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),b=this.addInputPin("ZWrite Enable",[1],VVVV.PinTypes.Value),a=this.addInputPin("Compare Function",["Always"],VVVV.PinTypes.Enum);a.enumOptions="Never Less LessEqual Equal NotEqual Greater GreaterEqual Always".split(" ");var h=this.addInputPin("Depth Bias",[0],VVVV.PinTypes.Value),k=this.addOutputPin("Render State Out",
[],VVVV.PinTypes.WebGlRenderState),r=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),f=0;f<e;f++)void 0==r[f]&&(r[f]=new VVVV.Types.WebGlRenderState),r[f].copy_attributes(d.getValue(f)),r[f].enableZWrite=0.5<b.getValue(f),r[f].depthFunc=c(a.getValue(f)),r[f].depthOffset=h.getValue(0),k.setValue(f,r[f]);k.setSliceCount(e)}};VVVV.Nodes.ZWriteEnableWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.CullWebGL=function(e,f){this.constructor(e,"Cull (EX9.RenderState)",f);this.meta={authors:["Matthias Zauner"],
original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Render State In",[],VVVV.PinTypes.WebGlRenderState),d=this.addInputPin("Culling",["None"],VVVV.PinTypes.Enum);d.enumOptions=["None","Clockwise","Counterclockwise"];var b=this.addOutputPin("Render State Out",[],VVVV.PinTypes.WebGlRenderState),a=[];this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),f=0;f<e;f++)void 0==a[f]&&(a[f]=new VVVV.Types.WebGlRenderState),a[f].copy_attributes(c.getValue(f)),
"Clockwise"==d.getValue(f)?a[f].cullFace="CW":"Counterclockwise"==d.getValue(f)?a[f].cullFace="CCW":a[f].cullFace=void 0,b.setValue(f,a[f]);b.setSliceCount(e)}};VVVV.Nodes.CullWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.GenericShader=function(e,f){this.constructor(e,"GenericShader (EX9.Effect)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};this.shaderFile="";var c=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState),
d=this.addInputPin("Mesh",[],VVVV.PinTypes.WebGlResource),b=this.addInputPin("Transform",[],VVVV.PinTypes.Transform),a=this.addInputPin("Technique",[""],VVVV.PinTypes.Enum);a.enumOptions=[""];this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var h=[],m=null,r,q=!1,p=[],n=this;this.initialize=function(){var a=["Render State","Mesh","Transform","Technique"];_(n.inputPins).each(function(b){0>a.indexOf(b.pinname)&&(b.unvalidated=!0,p.push(b))});void 0==VVVV.ShaderCodeResources[n.shaderFile]?(VVVV.ShaderCodeResources[n.shaderFile]=
new VVVV.Types.ShaderCodeResource,VVVV.ShaderCodeResources[n.shaderFile].addRelatedNode(n),k.ajax({url:VVVV.Helpers.prepareFilePath(n.shaderFile,n.parentPatch),async:!1,dataType:"text",success:function(a){VVVV.ShaderCodeResources[n.shaderFile].setSourceCode(a)},error:function(){console.log("ERROR: Could not load shader file "+n.shaderFile.replace("%VVVV%",VVVV.Root));VVVV.onNotImplemented("Could not load shader file "+n.shaderFile.replace("%VVVV%",VVVV.Root))}})):VVVV.ShaderCodeResources[n.shaderFile].addRelatedNode(n)};
this.shaderSourceUpdated=function(a){r=a;m||(m=new VVVV.Types.ShaderProgram);n.addUniformPins();n.setupShader();_(n.inputPins).each(function(a){a.markPinAsChanged()});q=!0;m.isSetup=!1;this.parentPatch.afterUpdate()};this.addUniformPins=function(){m.extractSemantics(r);for(var a=[],b=0;b<p.length;b++)m.uniformSpecs[p[b].pinname.replace(/ /g,"_")]||(n.removeInputPin(p[b].pinname),a.push(b));for(b=0;b<a.length;b++)p.splice(a[b],1);_(m.uniformSpecs).each(function(a){if("VIEW"!=a.semantic&&"PROJECTION"!=
a.semantic&&"WORLD"!=a.semantic&&"VIEWPROJECTION"!=a.semantic&&"WORLDVIEW"!=a.semantic&&"WORLDVIEWPROJECTION"!=a.semantic){var b=VVVV.PinTypes.Value,c=[];switch(a.type){case "mat":b=VVVV.PinTypes.Transform;break;case "samplerCube":case "sampler":b=VVVV.PinTypes.WebGlTexture;break;default:"COLOR"==a.semantic?(b=VVVV.PinTypes.Color,c=[new VVVV.Types.Color("1.0, 1.0, 1.0, 1.0")]):c=[0],a.defaultValue&&(c="COLOR"!=a.semantic?_(a.defaultValue.split(",")).map(function(a){return parseFloat(a)}):[new VVVV.Types.Color(a.defaultValue)])}for(var d=
0;d<p.length;d++)if(p[d].pinname==a.varname.replace(/_/g," ")){p[d].dimensions=a.dimension;p[d].unvalidated&&!p[d].isConnected()&&(p[d].values="Color"==b.typeName?n.defaultPinValues[p[d].pinname]?_(n.defaultPinValues[p[d].pinname]).map(function(a){return new VVVV.Types.Color(a)}):c:n.defaultPinValues[p[d].pinname]?n.defaultPinValues[p[d].pinname].slice():c);p[d].typeName!=b.typeName&&(a=p[d].values.slice(),c=p[d].getSliceCount(),p[d].setType(b),p[d].unvalidated&&(b.primitive&&!p[d].isConnected())&&
(p[d].values=a,p[d].setSliceCount(c)),p[d].isConnected()&&!p[d].unvalidated&&(p[d].connectionChanged(),p[d].links[0].destroy()));p[d].unvalidated=!1;return}b=n.addInputPin(a.varname.replace(/_/g," "),c,b);b.dimensions=a.dimension;p.push(b)}})};this.setupShader=function(){var b=a.getValue(0),b=b.replace(/^\s*/,"").replace(/\s*$/,""),c=RegExp(/(vertex_shader|fragment_shader)\{([^\}]+)\}/g);a.enumOptions=[];for(var d;null!=(d=c.exec(r));)a.enumOptions=a.enumOptions.concat(d[2].replace(/\s/g,"").split(","));
a.enumOptions=a.enumOptions.filter(function(a,b,c){return c.indexOf(a)===b});0==a.enumOptions.length&&a.enumOptions.push("");if(""==b||0>a.enumOptions.indexOf(b))b=a.enumOptions[0],a.setValue(0,b);var e=RegExp("vertex_shader(\\{([a-zA-Z0-9]+,\\s*)*"+b+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)"),c=RegExp("fragment_shader(\\{([a-zA-Z0-9]+,\\s*)*"+b+"(,\\s*[a-zA-Z0-9]+)*\\})?:([\\s\\S]*?)(vertex_shader|fragment_shader)");d=/STARTOFSTRING((\r?\n|.)*?)(vertex_shader|fragment_shader)/.exec("STARTOFSTRING"+
r);var f=d[1];void 0==(d=e.exec(r+"\nfragment_shader"))?console.log("ERROR: No vertex shader code for technique "+b+" found"):(e=d[4],void 0==(d=c.exec(r+"\nfragment_shader"))?console.log("ERROR: No fragment shader code for technique "+b+" found"):(m.setFragmentShader(f+d[4]),m.setVertexShader(f+e)))};this.evaluate=function(){if(this.renderContexts){var e=this.renderContexts[0];if(e&&m){if(!m.isSetup||this.contextChanged||a.pinIsChanged())this.setupShader(),m.setup(e)?VVVV.ShaderCodeResources[n.shaderFile].definingNode&&
VVVV.ShaderCodeResources[n.shaderFile].definingNode.showStatus("success","Successfully compiled"):VVVV.ShaderCodeResources[n.shaderFile].definingNode&&VVVV.ShaderCodeResources[n.shaderFile].definingNode.showStatus("error",m.log);var f=0;_(this.inputPins).each(function(a){var b=a.getSliceCount();a=a.pinname.replace(/ /g,"_");m.uniformSpecs[a]&&("vec"==m.uniformSpecs[a].type&&"COLOR"!=m.uniformSpecs[a].semantic)&&(b=parseInt(b/m.uniformSpecs[a].dimension));b>f&&(f=b)});d.isConnected()&&void 0!=d.getValue(0)||
(f=0);var g=h.length;if(this.contextChanged||q)g=0;f<g&&h.splice(f,g-f);for(var k=g;k<f;k++)h[k]=new VVVV.Types.Layer,h[k].mesh=d.getValue(0),h[k].shader=m,_(m.uniformSpecs).each(function(a){h[k].uniformNames.push(a.varname);h[k].uniforms[a.varname]={uniformSpec:a,value:void 0}});if(d.pinIsChanged())for(k=0;k<f;k++)h[k].mesh=d.getValue(0);for(k=0;k<f;k++)h[k].shader=m;for(e=0;e<p.length;e++){var r=p[e].pinname.replace(/ /g,"_");if(p[e].pinIsChanged()||g<f)for(k=0;k<f;k++)if("vec"==m.uniformSpecs[r].type)if("COLOR"==
m.uniformSpecs[r].semantic)h[k].uniforms[r].value=p[e].getValue(k).rgba;else{var x=p[e].getValue(k,p[e].dimensions);h[k].uniforms[r].value=new Float32Array(x)}else x=p[e].getValue(k),h[k].uniforms[r].value=x}if(c.pinIsChanged()||g<f)for(e=0;e<f;e++)c.isConnected()?h[e].renderState=c.getValue(e):h[e].renderState=VVVV.DefaultRenderState;if(b.pinIsChanged()||g<f)for(e=0;e<f;e++)g=this.inputPins.Transform.getValue(e),h[e].uniforms[h[e].shader.uniformSemanticMap.WORLD].value=g;this.outputPins.Layer.setSliceCount(f);
for(e=0;e<f;e++)this.outputPins.Layer.setValue(e,h[e]);q=this.contextChanged=!1}}};this.openUIWindow=function(){VVVV.ShaderCodeResources[n.shaderFile].definingNode&&VVVV.ShaderCodeResources[n.shaderFile].definingNode.openUIWindow()}};VVVV.Nodes.GenericShader.prototype=new VVVV.Core.Node;VVVV.Nodes.Quad=function(e,f){this.constructor(e,"Quad (DX9)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["No Sampler States","No texture coord mapping",
"No enable pin","Transprent pixels are discarded by default"]};this.auto_evaluate=!1;var c=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",[],VVVV.PinTypes.WebGlTexture);this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",[],VVVV.PinTypes.Color);this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var d=[],b=null,a=null;this.evaluate=function(){if(this.renderContexts){var e=
this.renderContexts[0];if(e){if(this.contextChanged){var f=[0.5,0.5,0,-0.5,0.5,0,0.5,-0.5,0,-0.5,-0.5,0],g=new VVVV.Types.VertexBuffer(e,f);g.create();g.setSubBuffer("POSITION",3,f);g.setSubBuffer("TEXCOORD0",2,[1,0,0,0,1,1,0,1]);g.update();b=new VVVV.Types.Mesh(e,g,[0,1,2,1,3,2]);b.update([0,1,2,1,3,2]);f="#ifdef GL_ES\nprecision mediump float;\n#endif\n";f+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";
a=new VVVV.Types.ShaderProgram;a.extractSemantics(f+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");a.setFragmentShader(f);a.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
a.setup(e)}e=this.getMaxInputSliceCount();f=d.length;this.contextChanged&&(f=0);e<f&&d.splice(e,f-e);for(var k=f;k<e;k++)d[k]=new VVVV.Types.Layer,d[k].mesh=b,d[k].shader=a,_(a.uniformSpecs).each(function(a){d[k].uniformNames.push(a.varname);d[k].uniforms[a.varname]={uniformSpec:a,value:void 0}});var p=this.inputPins.Color.pinIsChanged(),n=this.inputPins.Transform.pinIsChanged(),g=this.inputPins.Texture.pinIsChanged(),l=this.inputPins["Texture Transform"].pinIsChanged();if(p||f<e)for(p=0;p<e;p++){var u=
this.inputPins.Color.getValue(p);d[p].uniforms.col.value=u.rgba}if(c.pinIsChanged()||f<e)for(p=0;p<e;p++)c.isConnected()?d[p].renderState=c.getValue(p):d[p].renderState=VVVV.DefaultRenderState;if(n||f<e)for(p=0;p<e;p++)n=this.inputPins.Transform.getValue(p),d[p].uniforms[d[p].shader.uniformSemanticMap.WORLD].value=n;if(g||f<e)for(p=0;p<e;p++)d[p].uniforms.Samp0.value=this.inputPins.Texture.getValue(p);if(l||f<e)for(p=0;p<e;p++)n=this.inputPins["Texture Transform"].getValue(p),d[p].uniforms.tTex.value=
n;this.outputPins.Layer.setSliceCount(e);for(p=0;p<e;p++)this.outputPins.Layer.setValue(p,d[p]);this.contextChanged=!1}}}};VVVV.Nodes.Quad.prototype=new VVVV.Core.Node;VVVV.Nodes.GridSegment=function(e,f){this.constructor(e,"GridSegment (DX9)",f);this.auto_nil=!1;this.meta={authors:["woei"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=this.addInputPin("Render State",[],VVVV.PinTypes.WebGlRenderState);this.addInputPin("Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Texture",
[],VVVV.PinTypes.WebGlTexture);this.addInputPin("Texture Transform",[],VVVV.PinTypes.Transform);this.addInputPin("Color",[],VVVV.PinTypes.Color);var d=this.addInputPin("Cycles",[1],VVVV.PinTypes.Value),b=this.addInputPin("Inner Radius",[0],VVVV.PinTypes.Value),a=this.addInputPin("Resolution X",[6],VVVV.PinTypes.Value),h=this.addInputPin("Resolution Y",[2],VVVV.PinTypes.Value);this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);var k=[],r=null;this.evaluate=function(){if(this.renderContexts){var e=
this.renderContexts[0];if(e){if(this.contextChanged){var f;f="#ifdef GL_ES\nprecision mediump float;\n#endif\n";f+="uniform vec4 col : COLOR = {1.0, 1.0, 1.0, 1.0}; varying vec2 vs2psTexCd; uniform sampler2D Samp0; void main(void) { gl_FragColor = col*texture2D(Samp0, vs2psTexCd); if (gl_FragColor.a==0.0) discard;  }";r=new VVVV.Types.ShaderProgram;r.extractSemantics(f+"attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");
r.setFragmentShader(f);r.setVertexShader("attribute vec3 PosO : POSITION; attribute vec2 TexCd : TEXCOORD0; uniform mat4 tW : WORLD; uniform mat4 tV : VIEW; uniform mat4 tP : PROJECTION; uniform mat4 tTex; varying vec2 vs2psTexCd; void main(void) { gl_Position = tP * tV * tW * vec4(PosO, 1.0); vs2psTexCd = (tTex * vec4(TexCd.xy-.5, 0.0, 1.0)).xy+.5; }");r.setup(e)}f=this.getMaxInputSliceCount();var g=k.length;if(this.contextChanged||a.pinIsChanged()||h.pinIsChanged()||d.pinIsChanged()||b.pinIsChanged())g=
0;f<g&&k.splice(f,g-f);for(var l=g;l<f;l++){k[l]=new VVVV.Types.Layer;for(var u=parseInt(a.getValue(l)),w=parseInt(h.getValue(l)),y=d.getValue(l),t=b.getValue(l),x=[],v=[],A=[],s=0,z=0;z<w;z++)for(var B=0;B<u;B++){var D=parseFloat(B)/(u-1),D=0.25-D*y,D=6.28318530718*D,C=parseFloat(z)/(w-1),C=t*(1-C)+C;x.push(0.5*Math.sin(D)*C);x.push(0.5*Math.cos(D)*C);x.push(0);s++;v.push(0);v.push(0);v.push(1);A.push(parseFloat(B)/(u-1));A.push(parseFloat(z)/(w-1))}y=new VVVV.Types.VertexBuffer(e,x);y.create();
y.setSubBuffer("POSITION",3,x);y.setSubBuffer("TEXCOORD0",2,A);y.setSubBuffer("NORMAL",3,v);y.create();x=[];for(z=0;z<w-1;z++)for(B=0;B<u-1;B++)v=B+u*z,x.push(v),x.push(v+1),x.push(v+u+1),x.push(v+u+1),x.push(v+u),x.push(v);k[l].mesh=new VVVV.Types.Mesh(e,y,x);k[l].mesh.update(x);k[l].shader=r;_(r.uniformSpecs).each(function(a){k[l].uniformNames.push(a.varname);k[l].uniforms[a.varname]={uniformSpec:a,value:void 0}})}z=this.inputPins.Color.pinIsChanged();w=this.inputPins.Transform.pinIsChanged();e=
this.inputPins.Texture.pinIsChanged();u=this.inputPins["Texture Transform"].pinIsChanged();if(z||g<f)for(z=0;z<f;z++)B=this.inputPins.Color.getValue(z),k[z].uniforms.col.value=B.rgba;if(c.pinIsChanged()||g<f)for(z=0;z<f;z++)c.isConnected()?k[z].renderState=c.getValue(z):k[z].renderState=VVVV.DefaultRenderState;if(w||g<f)for(z=0;z<f;z++)w=this.inputPins.Transform.getValue(z),k[z].uniforms[k[z].shader.uniformSemanticMap.WORLD].value=w;if(e||g<f)for(z=0;z<f;z++)k[z].uniforms.Samp0.value=this.inputPins.Texture.getValue(z);
if(u||g<f)for(z=0;z<f;z++)w=this.inputPins["Texture Transform"].getValue(z),k[z].uniforms.tTex.value=w;this.outputPins.Layer.setSliceCount(f);for(z=0;z<f;z++)this.outputPins.Layer.setValue(z,k[z]);this.contextChanged=!1}}}};VVVV.Nodes.GridSegment.prototype=new VVVV.Core.Node;VVVV.Nodes.Group=function(e,f){this.constructor(e,"Group (EX9)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:[]};var c=[],d=this.addInputPin("Enabled",
[1],VVVV.PinTypes.Value),b=this.addInvisiblePin("Layer Template Count",[2],VVVV.PinTypes.Value),a=this.addOutputPin("Layer",[],VVVV.PinTypes.WebGlResource);this.initialize=function(){var a=Math.max(2,b.getValue(0));VVVV.Helpers.dynamicPins(this,c,a,function(a){return this.addInputPin("Layer "+(a+1),[],VVVV.PinTypes.WebGlResource)})};this.evaluate=function(){b.pinIsChanged()&&this.initialize();var e=0;if(0.5<d.getValue(0))for(var f=0;f<c.length;f++)for(var g=0;g<c[f].getSliceCount();g++)a.setValue(e++,
c[f].getValue(g));a.setSliceCount(e)}};VVVV.Nodes.Group.prototype=new VVVV.Core.Node;VVVV.Nodes.RendererWebGL=function(g,f){function c(){function a(b){switch(b.which){case 1:VVVV.MousePositions._all.lb[0]=0;VVVV.MousePositions[g].lb[0]=0;break;case 2:VVVV.MousePositions._all.mb[0]=0;VVVV.MousePositions[g].mb[0]=0;break;case 3:VVVV.MousePositions._all.rb[0]=0,VVVV.MousePositions[g].rb[0]=0}}function b(a,c){for(var d=a.originalEvent.changedTouches.length;d--;){var e=2*(a.originalEvent.changedTouches[d].pageX-
k(c).offset().left)/k(c).width()-1,f=-(2*(a.originalEvent.changedTouches[d].pageY-k(c).offset().top)/k(c).height()-1);VVVV.MousePositions._all.x[a.originalEvent.changedTouches[d].identifier]=VVVV.MousePositions[c.id].x[a.originalEvent.changedTouches[d].identifier]=e;VVVV.MousePositions._all.y[a.originalEvent.changedTouches[d].identifier]=VVVV.MousePositions[c.id].y[a.originalEvent.changedTouches[d].identifier]=f}}k(v).detach("mousemove");k(v).detach("mousedown");k(v).detach("mouseup");VVVV.MousePositions[g]=
{x:[0],y:[0],wheel:[0],lb:[0],mb:[0],rb:[0]};k(v).mousemove(function(a){var b=2*(a.pageX-k(this).offset().left)/k(this).width()-1;a=-(2*(a.pageY-k(this).offset().top)/k(this).height()-1);VVVV.MousePositions._all.x[0]=b;VVVV.MousePositions._all.y[0]=a;VVVV.MousePositions[g].x[0]=b;VVVV.MousePositions[g].y[0]=a});k(v).bind("mousewheel",function(a){a=a.originalEvent.wheelDelta/120;VVVV.MousePositions[g].wheel[0]+=a;VVVV.MousePositions._all.wheel[0]+=a});k(v).bind("DOMMouseScroll",function(a){a=-a.originalEvent.detail/
3;VVVV.MousePositions[g].wheel[0]+=a;VVVV.MousePositions._all.wheel[0]+=a});k(v).mousedown(function(b){switch(b.which){case 1:VVVV.MousePositions._all.lb[0]=1;VVVV.MousePositions[g].lb[0]=1;break;case 2:VVVV.MousePositions._all.mb[0]=1;VVVV.MousePositions[g].mb[0]=1;break;case 3:VVVV.MousePositions._all.rb[0]=1,VVVV.MousePositions[g].rb[0]=1}k(document).unbind("mouseup",a);k(document).mouseup(a)});k(v).bind("touchstart",function(a){for(var c=a.originalEvent.changedTouches.length;c--;)VVVV.MousePositions._all.lb[a.originalEvent.changedTouches[c].identifier]=
VVVV.MousePositions[g].lb[a.originalEvent.changedTouches[c].identifier]=1;b(a,this)});k(v).bind("touchend",function(a){for(var b=a.originalEvent.changedTouches.length;b--;)VVVV.MousePositions._all.lb[a.originalEvent.changedTouches[b].identifier]=VVVV.MousePositions[g].lb[a.originalEvent.changedTouches[b].identifier]=0});k(v).bind("touchmove",function(a){b(a,this);a.preventDefault()})}this.constructor(g,"Renderer (EX9)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],
credits:[],compatibility_issues:["Disabling Clear doesn't work in Chrome","No Fullscreen","No Enable Pin","No Aspect Ration and Viewport transform","No mouse output"]};this.addInputPin("Layers",[],VVVV.PinTypes.WebGlResource);var d=this.addInputPin("Clear",[1],VVVV.PinTypes.Value),b=this.addInputPin("Background Color",[new VVVV.Types.Color("0.0, 0.0, 0.0, 1.0")],VVVV.PinTypes.Color),a=this.addInputPin("Backbuffer Width",[0],VVVV.PinTypes.Value),h=this.addInputPin("Backbuffer Height",[0],VVVV.PinTypes.Value),
m=this.addInputPin("View",[],VVVV.PinTypes.Transform),r=this.addInputPin("Projection",[],VVVV.PinTypes.Transform),q=this.addInvisiblePin("Windowed Depthbuffer Format",["NONE"],VVVV.PinTypes.Enum);q.enumOptions=["NONE","DX16"];var p=this.addOutputPin("Actual Backbuffer Width",[0],VVVV.PinTypes.Value),n=this.addOutputPin("Actual Backbuffer Height",[0],VVVV.PinTypes.Value),l=this.addOutputPin("EX9 Out",[],VVVV.PinTypes.WebGlResource),u=0,w=0,y,t,x;mat4.create();mat4.create();var v,A=this.ctxt=void 0,
s,z,B;this.getContexts=function(){if(this.invisiblePins["Descriptive Name"]){var e=this.invisiblePins["Descriptive Name"].getValue(0);if((e=k(e).get(0))&&"CANVAS"==e.nodeName)v=k(e);else{var f=parseInt(a.getValue(0)),n=parseInt(h.getValue(0)),f=0<f?f:512,n=0<n?n:512;g="vvvv-js-generated-renderer-"+(new Date).getTime();v=k('<canvas width="'+f+'" height="'+n+'" id="'+g+'" class="vvvv-js-generated-renderer"></canvas>');e||(e="body");k(e).append(v)}if(v){c();try{A=v.get(0).getContext("experimental-webgl",
{preserveDrawingBuffer:!0}),A.viewportWidth=parseInt(v.get(0).width),A.viewportHeight=parseInt(v.get(0).height)}catch(p){console.log(p)}this.ctxt=A;l.isConnected()&&this.renderContexts&&this.renderContexts[0]?(s=this.ctxt=this.renderContexts[0],z=s.createFramebuffer(),s.bindFramebuffer(s.FRAMEBUFFER,z),z.width=v.get(0).width,z.height=v.get(0).height,B=s.createTexture(),s.bindTexture(s.TEXTURE_2D,B),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!0),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),
s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_NEAREST),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,z.width,z.height,0,s.RGBA,s.UNSIGNED_SHORT_4_4_4_4,null),s.generateMipmap(s.TEXTURE_2D),e=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,e),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,z.width,z.height),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,B,0),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e),s.bindTexture(s.TEXTURE_2D,
null),s.bindRenderbuffer(s.RENDERBUFFER,null),s.bindFramebuffer(s.FRAMEBUFFER,null)):this.renderContexts&&this.renderContexts[0]&&(this.renderContexts[0].deleteTexture(B),B=void 0);this.ctxt&&(u=parseInt(v.get(0).width),w=parseInt(v.get(0).height),s=this.ctxt,e=new Uint8Array([255,255,255]),s.DefaultTexture={},s.DefaultTexture["2D"]=s.createTexture(),s.bindTexture(s.TEXTURE_2D,s.DefaultTexture["2D"]),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,
s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texImage2D(s.TEXTURE_2D,0,s.RGB,1,1,0,s.RGB,s.UNSIGNED_BYTE,e),s.bindTexture(s.TEXTURE_2D,null),s.DefaultTexture.CUBE=s.createTexture(),s.bindTexture(s.TEXTURE_CUBE_MAP,s.DefaultTexture.CUBE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),
s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.NEAREST),s.pixelStorei(s.UNPACK_ALIGNMENT,1),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X,0,s.RGB,1,1,0,s.RGB,s.UNSIGNED_BYTE,e),s.texImage2D(s.TEXTURE_CUBE_MAP_NEGATIVE_X,0,s.RGB,1,1,0,s.RGB,s.UNSIGNED_BYTE,e),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_Y,0,s.RGB,1,1,0,s.RGB,s.UNSIGNED_BYTE,e),s.texImage2D(s.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,s.RGB,1,1,0,s.RGB,s.UNSIGNED_BYTE,e),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_Z,
0,s.RGB,1,1,0,s.RGB,s.UNSIGNED_BYTE,e),s.texImage2D(s.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,s.RGB,1,1,0,s.RGB,s.UNSIGNED_BYTE,e),s.bindTexture(s.TEXTURE_CUBE_MAP,null),this.inputPins.Layers.markPinAsChanged(),d.markPinAsChanged(),b.markPinAsChanged(),m.markPinAsChanged(),r.markPinAsChanged())}}};this.destroy=function(){k(v).remove()};var D=!1;this.evaluate=function(){s=this.ctxt;if(this.invisiblePins["Descriptive Name"].pinIsChanged()||this.contextChanged)A&&k(A.canvas).hasClass("vvvv-js-generated-renderer")&&
k(A.canvas).remove(),this.getContexts(),this.inputPins.Layers.isConnected()&&this.inputPins.Layers.links[0].fromPin.connectionChanged();D||(p.setValue(0,u),n.setValue(0,w),D=!0);if(void 0!=s){if(a.pinIsChanged()&&(!this.renderContexts||!this.renderContexts[0])){var c=parseInt(a.getValue(0));0<c&&(u=c,k(A.canvas).attr("width",u),p.setValue(0,u))}!h.pinIsChanged()||this.renderContexts&&this.renderContexts[0]||(c=parseInt(h.getValue(0)),0<c&&(w=c,k(A.canvas).attr("height",w),n.setValue(0,w)));this.renderContexts&&
this.renderContexts[0]&&s==this.renderContexts[0]?s.bindFramebuffer(s.FRAMEBUFFER,z):s.bindFramebuffer(s.FRAMEBUFFER,null);if(this.contextChanged||b.pinIsChanged())c=b.getValue(0),s.clearColor(c.rgba[0],c.rgba[1],c.rgba[2],c.rgba[3]);s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);if(this.contextChanged||q.pinIsChanged())"NONE"==q.getValue(0)?s.disable(s.DEPTH_TEST):s.enable(s.DEPTH_TEST);r.pinIsChanged()&&(r.isConnected()?(y=mat4.create(),mat4.set(r.getValue(0),y)):(y=mat4.create(),mat4.ortho(-1,
1,-1,1,-100,100,y)),mat4.scale(y,[1,1,-1]),this.renderContexts&&this.renderContexts[0]&&mat4.scale(y,[1,-1,1]),x=mat4.create());m.pinIsChanged()&&(t=m.getValue(0));(m.pinIsChanged()||r.pinIsChanged())&&mat4.multiply(y,t,x);if(!this.contextChanged){s.viewport(0,0,u,w);var d=c=null,f=null;if(this.inputPins.Layers.isConnected()){for(var g=this.inputPins.Layers.values,v=0;v<g.length;v++)if(layer=g[v],void 0!=layer.shader){c!=layer.shader.shaderProgram&&(s.useProgram(layer.shader.shaderProgram),layer.shader.uniformSemanticMap.PROJECTION&&
0!=layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.PROJECTION].position&&s.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.PROJECTION].position,!1,y),layer.shader.uniformSemanticMap.VIEW&&0!=layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEW].position&&s.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEW].position,!1,t),layer.shader.uniformSemanticMap.VIEWPROJECTION&&0!=layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEWPROJECTION].position&&
s.uniformMatrix4fv(layer.shader.uniformSpecs[layer.shader.uniformSemanticMap.VIEWPROJECTION].position,!1,x));var G=layer.renderState;G||(G=e);G!=d&&G.apply(s);if(layer.mesh!=f||layer.shader.shaderProgram!=c)s.bindBuffer(s.ARRAY_BUFFER,layer.mesh.vertexBuffer.vbo),_(layer.mesh.vertexBuffer.subBuffers).each(function(a){layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]]&&-1!=layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position&&(s.enableVertexAttribArray(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position),
s.vertexAttribPointer(layer.shader.attributeSpecs[layer.shader.attribSemanticMap[a.usage]].position,a.size,s.FLOAT,!1,0,a.offset))}),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,layer.mesh.indexBuffer);for(var d=layer.uniformNames.length,L=f=0;L<d;L++){var E=layer.uniforms[layer.uniformNames[L]];if(void 0!=E.value&&!(0<v&&layer.shader.shaderProgram==c&&g[v-1].uniforms[layer.uniformNames[L]]&&E.value==g[v-1].uniforms[layer.uniformNames[L]].value)){start=(new Date).getTime();switch(E.uniformSpec.type){case "mat":s["uniformMatrix"+
E.uniformSpec.dimension+"fv"](E.uniformSpec.position,!1,E.value);break;case "vec":s["uniform"+E.uniformSpec.dimension+"fv"](E.uniformSpec.position,E.value);break;case "int":s["uniform"+E.uniformSpec.dimension+"i"](E.uniformSpec.position,E.value);break;case "float":s["uniform"+E.uniformSpec.dimension+"f"](E.uniformSpec.position,E.value);break;case "sampler":var I=E.value;I==VVVV.DefaultTexture&&(I=s.DefaultTexture["2D"]);s.activeTexture(s["TEXTURE"+f]);s.bindTexture(s["TEXTURE_"+E.uniformSpec.dimension],
I);s.uniform1i(E.uniformSpec.position,f);f++;break;case "samplerCube":I=E.value,I==VVVV.DefaultTexture&&(I=s.DefaultTexture.CUBE),s.activeTexture(s["TEXTURE"+f]),s.bindTexture(s.TEXTURE_CUBE_MAP,I),s.uniform1i(E.uniformSpec.position,f),f++}loopstart=(new Date).getTime()}}s.drawElements(s[G.polygonDrawMode],layer.mesh.numIndices,s.UNSIGNED_SHORT,0);c=layer.shader.shaderProgram;d=G;f=layer.mesh}s.bindTexture(s.TEXTURE_2D,null);s.bindTexture(s.TEXTURE_CUBE_MAP,null)}this.renderContexts&&this.renderContexts[0]&&
(s.bindTexture(s.TEXTURE_2D,B),s.generateMipmap(s.TEXTURE_2D),s.bindTexture(this.renderContexts[0].TEXTURE_2D,null));l.setValue(0,B)}this.contextChanged=!1}}};VVVV.Nodes.RendererWebGL.prototype=new VVVV.Core.Node;VVVV.Nodes.DefineEffect=function(e,f){this.constructor(e,"DefineEffect (DX9)",f);this.auto_nil=!1;this.meta={authors:["Matthias Zauner"],original_authors:["Matthias Zauner"],credits:[],compatibility_issues:["Not available in classic VVVV"]};this.auto_evaluate=!1;var c=this.addInputPin("Effect Descriptor",
[""],VVVV.PinTypes.String),d=this.addInvisiblePin("Source Code",["#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform mat4 tW : WORLD;\nuniform mat4 tV : VIEW;\nuniform mat4 tP : PROJECTION;\n\nuniform vec4 Color : COLOR = {1.0, 1.0, 1.0, 1.0};\nuniform sampler2D Texture;\nuniform mat4 Texture_Transform;\nuniform float Alpha = 1.0;\n\nvarying vec2 vs2psTexCd;\n\nvertex_shader:\n\nattribute vec3 PosO : POSITION;\nattribute vec2 TexCd : TEXCOORD0;\n\nvoid main(void) {\n  gl_Position = tP * tV * tW * vec4(PosO, 1.0);\n  vs2psTexCd = (Texture_Transform * vec4(TexCd, 0, 1)).xy;\n}\n\n\nfragment_shader:\n\nvoid main(void) {\n  gl_FragColor = Color * texture2D(Texture, vs2psTexCd) * vec4(1.0, 1.0, 1.0, Alpha);\n}"],
VVVV.PinTypes.String),b="",a;this.evaluate=function(){if(""!=c.getValue(0)){if(c.pinIsChanged()){var e=c.getValue(0);if(""==e)return;""==b?void 0==VVVV.ShaderCodeResources["./"+e+".vvvvjs.fx"]&&(VVVV.ShaderCodeResources["./"+e+".vvvvjs.fx"]=new VVVV.Types.ShaderCodeResource):VVVV.ShaderCodeResources["./"+e+".vvvvjs.fx"]=VVVV.ShaderCodeResources[b];b="./"+e+".vvvvjs.fx";VVVV.ShaderCodeResources[b].definingNode=this;VVVV.ShaderCodeResources[b].setSourceCode(d.getValue(0));a&&k("#path",a.document).text((this.parentPatch.nodename||
"root")+" / "+(""!=b?b:"Untitled"))}d.pinIsChanged()&&VVVV.ShaderCodeResources[b]&&VVVV.ShaderCodeResources[b].setSourceCode(d.getValue(0))}};this.openUIWindow=function(){a=window.open(location.protocol+"//"+location.host+("/"==VVVV.Root[0]?"":location.pathname.replace(/\/[^\/]*$/,"")+"/")+VVVV.Root+"/code_editor.html",b+" / VVVV.js Effect Editor","location=no, width=800, height=800, toolbar=no");var c=this;window.setTimeout(function(){a.document.title=b+" / VVVV.js Effect Editor";var e=c.parentPatch.nodename||
"root",f=""!=b?b:"Untitled";k("#path",a.document).text(e+" / "+f);k("textarea",a.document).text(d.getValue(0));k("#compile_button",a.document).click(function(){""==b?c.showStatus("error","Please provide a name for this shader first"):(d.setValue(0,k("textarea",a.document).val()),0<VVVV.ShaderCodeResources[b].relatedNodes.length?(c.showStatus("notice","Compiling ..."),c.evaluate()):c.showStatus("notice","No instance of this shader found. Create a node (./"+b+") and connect it to a Renderer (EX9) to compile."))});
a.focus()},500)};this.showStatus=function(b,c){a&&(k("#status",a.document).text(c),k("#status",a.document).attr("class",b))}};VVVV.Nodes.DefineEffect.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Types.XElement=function(){this.name="root";this.data=""};VVVV.PinTypes.XElement={typeName:"XElement",reset_on_disconnect:!0,defaultValue:function(){return new VVVV.Types.XElement}};VVVV.PinTypes.XAttribute={typeName:"XAttribute",reset_on_disconnect:!0,defaultValue:function(){return{}}};VVVV.Nodes.AsXElementJSON=function(e,g){this.constructor(e,"AsXElement (JSON)",g);this.meta={authors:["Matthias Zauner"],original_authors:["herbst"],credits:[],compatibility_issues:[]};this.auto_evaluate=
!1;var f=this.addInputPin("JSON",['{"vvvv.js":"awesome"}'],VVVV.PinTypes.String),c=this.addOutputPin("Output Node",[],VVVV.PinTypes.XElement),d=this.addOutputPin("Success",[0],VVVV.PinTypes.Value),b=new VVVV.Types.XElement,a=0;this.evaluate=function(){try{b.data=JSON.parse(f.getValue(0)),a=1}catch(e){b.data={},a=0}c.setValue(0,b);d.setValue(0,a)}};VVVV.Nodes.AsXElementJSON.prototype=new VVVV.Core.Node;VVVV.Nodes.ElementXElementSplit=function(e,g){this.constructor(e,"Element (XElement Split)",g);this.meta=
{authors:["Matthias Zauner"],original_authors:["herbst"],credits:[],compatibility_issues:[]};this.auto_evaluate=!1;var f=this.addInputPin("Element",[],VVVV.PinTypes.XElement),c=this.addOutputPin("Name",[""],VVVV.PinTypes.String),d=this.addOutputPin("Value",[""],VVVV.PinTypes.String);this.addOutputPin("Deep Value",[""],VVVV.PinTypes.String);var b=this.addOutputPin("Children",[],VVVV.PinTypes.XElement),a=this.addOutputPin("Children Bin Size",[0],VVVV.PinTypes.Value);this.addOutputPin("Attributes",[],
VVVV.PinTypes.XAttribute);this.addOutputPin("Attributes Bin Size",[0],VVVV.PinTypes.Value);this.evaluate=function(){for(var e=f.getSliceCount(),g=0,k=0;k<e;k++){var q=f.getValue(k);c.setValue(k,q.name);var p=0;if(q.data instanceof Array){d.setValue(k,"");for(var n=0;n<q.data.length;n++){var l;l=b.getSliceCount()<=g?new VVVV.Types.XElement:b.getValue(g);l.name="item";l.data=q.data[n];b.setValue(g,l);g++;p++}}else if("object"==typeof q.data){d.setValue(k,"");for(var u in q.data)l=b.getSliceCount()<=
g?new VVVV.Types.XElement:b.getValue(g),l.name=u,l.data=q.data[u],b.setValue(g,l),g++,p++}else d.setValue(k,q.data);a.setValue(k,p)}c.setSliceCount(e);d.setSliceCount(e);b.setSliceCount(g);a.setSliceCount(e)}};VVVV.Nodes.ElementXElementSplit.prototype=new VVVV.Core.Node;VVVV.Nodes.GetElementsByName=function(e,g){function f(c,d){if(c.data instanceof Array)for(var e=0;e<c.data.length;e++)f(c.data[e],d);else if("object"==typeof c.data)for(e in c.data){if(e==d){var g=b.getSliceCount()<=a?new VVVV.Types.XElement:
b.getValue(a);g.name=e;g.data=c.data[e];b.setValue(a,g);a++}f(c.data[e],d)}}this.constructor(e,"GetElements (XElement ByName)",g);this.meta={authors:["Matthias Zauner"],original_authors:["herbst"],credits:[],compatibility_issues:["no bin size output"]};this.auto_evaluate=!1;var c=this.addInputPin("Element",[],VVVV.PinTypes.XElement),d=this.addInputPin("Name",["myChildTagName"],VVVV.PinTypes.String),b=this.addOutputPin("Elements",[],VVVV.PinTypes.XElement),a=0;this.evaluate=function(){for(var e=this.getMaxInputSliceCount(),
g=a=0;g<e;g++)f(c.getValue(g),d.getValue(g));b.setSliceCount(a)}};VVVV.Nodes.GetElementsByName.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.Nodes.XPathXML=function(e,g){this.constructor(e,"XPath (XML)",g);this.meta={authors:["Matthias Zauner"],original_authors:["VVVV Group"],credits:[],compatibility_issues:["XML Index Output Pin not implemented","Query Index Output Pin not implemented"]};this.auto_evaluate=!1;var f=this.addInputPin("XML Input",["text"],VVVV.PinTypes.String),c=this.addInputPin("XPath Query",["text"],VVVV.PinTypes.String),d=this.addInputPin("Base Element",["text"],VVVV.PinTypes.String),b=this.addOutputPin("Output",
["text"],VVVV.PinTypes.String),a=this.addOutputPin("XML Index",[0],VVVV.PinTypes.Value),h=this.addOutputPin("Query Index",[0],VVVV.PinTypes.Value),k;this.evaluate=function(){var e=f.getValue(0),g=c.getValue(0);d.getValue(0);f.pinIsChanged()&&(k=(new DOMParser).parseFromString(e,"text/xml"));for(var e=k.evaluate(g,k,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),g=0,p;p=e.iterateNext();)p.value?b.setValue(g,p.value):p.data?b.setValue(g,p.data):b.setValue(g,""),g++;a.setValue(g,0);h.setValue(g,0);
b.setSliceCount(g);a.setSliceCount(1);h.setSliceCount(1)}};VVVV.Nodes.XPathXML.prototype=new VVVV.Core.Node})(vvvvjs_jquery);(function(k){VVVV.PinTypes.Value.makeLabel=VVVV.PinTypes.String.makeLabel=function(e,g){var f=g.IOBoxRows();g.IOBoxInputPin().getSliceCount();d3.select(e).selectAll(".vvvv-node-label").remove();for(var c=0;c<f;c++)d3.select(e).append("svg:text").text(g.IOBoxInputPin().getValue(c)).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(d){return 12*c+12}).attr("dx",4).attr("font-size",10).attr("font-family","Lucida Sans Unicode")};VVVV.PinTypes.Value.openInputBox=VVVV.PinTypes.String.openInputBox=
function(e,g,f,c){$inputbox=k("<input type='text' value='"+f.getValue(c).toString().replace(/\|/g,"||").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"' class='pininputbox value resettable'/>");$inputbox.css("position",g.css("position"));$inputbox.css("width",g.css("width"));$inputbox.css("height",g.css("height"));$inputbox.css("left",g.css("left"));$inputbox.css("top",g.css("top"));g.replaceWith($inputbox);$inputbox.get(0).select();e.window.document.exitPointerLock=e.window.document.exitPointerLock||
e.window.document.mozExitPointerLock||e.window.document.webkitExitPointerLock;$inputbox.change(function(){"Value"==f.typeName?f.setValue(c,parseFloat(k(this).val())):f.setValue(c,k(this).val());var b=_(f.values).map(function(a){return"|"+a.toString().replace(/\|/g,"||").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"|"});b.length=f.getSliceCount();f.node.parentPatch.editor.update(f.node.parentPatch,"<PATCH><NODE id='"+f.node.id+"'><PIN pinname='"+f.pinname+"' values='"+b.join(",")+
"'/></NODE>")});$inputbox.keydown(function(b){13==b.which&&(k(this).change(),k(this).remove())});if("Value"==f.typeName){var d=function(b,a,c){var d=k(b).val()%1;if(!isNaN(d)){var e;e=1;if(c.altKey||0!==d)e=0.01;a*=e;k(b).val(parseFloat(k(b).val())+a);k(b).change()}};$inputbox.bind("mousewheel",function(b){d(this,b.originalEvent.wheelDelta/120,b);b.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",function(b){d(this,-b.originalEvent.detail/3,b);b.preventDefault();return!1});e.window.document.addEventListener("pointerlockerror",
function(b){console.log("POINTER LOCK ERROR")});$inputbox.mousedown(function(b){3==b.which&&this.requestPointerLock()});$inputbox.mouseup(function(b){3==b.which&&(e.window.document.exitPointerLock(),window.setTimeout(function(){$inputbox.remove()},100),e.state=0)});$inputbox.mousemove(function(b){e.window.document.pointerLockElement&&(e.state=6,50>Math.abs(b.originalEvent.movementY)&&d(this,Math.floor(-0.5*b.originalEvent.movementY),b))})}$inputbox.bind("paste",function(b){b.stopPropagation()});$inputbox.bind("copy",
function(b){b.stopPropagation()})};VVVV.PinTypes.Enum.openInputBox=function(e,g,f,c){$inputbox=k("<select class='pininputbox value resettable'>");for(e=0;e<f.enumOptions.length;e++)$opt=k('<option value="'+f.enumOptions[e]+'">'+f.enumOptions[e]+"</option>"),f.getValue(c)==f.enumOptions[e]&&$opt.attr("selected",!0),$inputbox.append($opt);$inputbox.css("position",g.css("position"));$inputbox.css("width",g.css("width"));$inputbox.css("height",g.css("height"));$inputbox.css("left",g.css("left"));$inputbox.css("top",
g.css("top"));g.replaceWith($inputbox);$inputbox.change(function(){f.setValue(c,k(this).val());var d=_(f.values).map(function(b){return"|"+b+"|"});d.length=f.getSliceCount();f.node.parentPatch.editor.update(f.node.parentPatch,"<PATCH><NODE id='"+f.node.id+"'><PIN pinname='"+f.pinname+"' values='"+d.join(",")+"'/></NODE>");k(this).remove()})};VVVV.PinTypes.Color.makeLabel=function(e,g){var f=g.IOBoxRows();g.IOBoxInputPin().getSliceCount();d3.select(e).selectAll(".vvvv-node-label").remove();for(var c=
0;c<f;c++)d3.select(e).append("svg:rect").attr("class","vvvv-node-label").attr("height",g.getHeight()/f-8).attr("width",g.getWidth()).attr("y",12*c+4).attr("fill",function(d){d=g.IOBoxInputPin().getValue(c);var b=[0,0,0,0];if(d)for(var a=0;a<d.rgba.length;a++)b[a]=parseInt(256*d.rgba[a]);return"rgba("+b.join(",")+")"})};VVVV.PinTypes.Color.openInputBox=function(e,g,f,c){function d(a){h=a.altKey&&a.shiftKey?3:a.altKey?1:a.shiftKey?2:0}function b(b){q[h]+=0.01*b;0!=h&&(q[h]=Math.min(1,Math.max(0,q[h])));
a();$inputbox.find("input[type='range']").each(function(a){k(this).val(q[a])})}function a(){m.setHSV(q[0],q[1],q[2]);m.rgba[3]=q[3];$inputbox.css("background-color","rgba("+_(m.rgba).map(function(a){return parseInt(255*a)}).join(",")+")");ibx=$inputbox;f.setValue(c,m);var a=_(f.values).map(function(a){return"|"+a.toString()+"|"});a.length=f.getSliceCount();f.node.parentPatch.editor.update(f.node.parentPatch,"<PATCH><NODE id='"+f.node.id+"'><PIN pinname='"+f.pinname+"' values='"+a.join(",")+"'/></NODE>")}
var h=0;k(e.window.document).keydown(d).keyup(d);$inputbox=k('<div class="pininputbox color resettable"></div>');$inputbox.css("position",g.css("position"));$inputbox.css("width","120px");$inputbox.css("height","66px");$inputbox.css("left",g.css("left"));$inputbox.css("top",g.offset().top-60+"px");var m=f.getValue(c);e=[];for(var r=0;r<m.rgba.length;r++)e[r]=parseInt(256*m.rgba[r]);e[3]=255;$inputbox.css("background-color","rgba("+e.join(",")+")");g.replaceWith($inputbox);var q=m.getHSV();q[3]=m.rgba[3];
for(r=0;4>r;r++)$slider=k('<input type="range" name="hsv[]" min="0" max="1" step="0.001" value="'+q[r]+'"/>'),$inputbox.append('<span class="color-component">'+"HSVA"[r]+":</div>"),$inputbox.append($slider),function(b){$slider.on("input",function(){q[b]=parseFloat(k(this).val());a()})}(r);$inputbox.on("mousewheel",function(a){b(a.originalEvent.wheelDelta/120);a.preventDefault();return!1});$inputbox.bind("DOMMouseScroll",function(a){b(-a.originalEvent.detail/3);a.preventDefault();return!1})};VVVV.Editors.BrowserEditor=
{};VVVV.Editors.BrowserEditor.PatchWindow=function(e,g,f){function c(){a.selectAll(".vvvv-node.selected").attr("class",function(a){return a.isIOBox?"vvvv-node vvvv-iobox":"vvvv-node"});n=[]}var d=this.state=0,b=0,a,h,m,r,q,p=void 0,n=[],l=e,u=0,w=location.protocol+"//"+location.host+("/"==VVVV.Root[0]?"":location.pathname.replace(/\/[^\/]*$/,"")+"/")+VVVV.Root+"/patch.html",y=!1,t=0,x=0,v=0,A=0;this.window=f?window:window.open(w,e.nodename,"location=no, width="+e.windowWidth+", height="+e.windowHeight+
", toolbar=no");var s=this;window.setTimeout(function(){for(var m=0;m<l.nodeList.length;m++)u=Math.max(u,l.nodeList[m].id);f?root=d3.select(k(f).get(0)):(s.window.document.title=e.nodename,root=d3.select(s.window.document.body));if(!f){k("body",s.window.document).on("copy",function(a){for(var b=k("<PATCH>"),c=[],d=_(n).map(function(a){return a.id}),e=0;e<n.length;e++)b.append(n[e].serialize()),_(n[e].inputPins).each(function(a){for(var b=0;b<a.links.length;b++)0<=d.indexOf(a.links[b].fromPin.node.id)&&
c.push(a.links[b])});for(e=0;e<c.length;e++)b.append(c[e].serialize());b='<!DOCTYPE PATCH  SYSTEM "http://vvvv.org/versions/vvvv45beta28.1.dtd" >\r\n'+b.wrapAll("<d></d>").parent().html();b=b.replace(/<patch/g,"<PATCH");b=b.replace(/<\/patch>/g,"\n  </PATCH>");b=b.replace(/<node/g,"\n  <NODE");b=b.replace(/<\/node>/g,"\n  </NODE>");b=b.replace(/<bounds/g,"\n  <BOUNDS");b=b.replace(/<\/bounds>/g,"\n  </BOUNDS>");b=b.replace(/<pin/g,"\n  <PIN");b=b.replace(/<\/pin>/g,"\n  </PIN>");b=b.replace(/<lonk/g,
"\n  <LINK");b=b.replace(/<\/lonk>/g,"\n  </LINK>");a.originalEvent.clipboardData.setData("text/plain",b);a.preventDefault();return!1});var q=0,r=0;k("body",s.window.document).mousemove(function(a){q=a.pageX;r=a.pageY});k("body",s.window.document).on("paste",function(b){b=b.originalEvent.clipboardData.getData("text/plain");if(!b.match(/^<!DOCTYPE PATCH/))return!1;$patch=k(b);var d=void 0,e=void 0;$patch.find("node bounds").each(function(){var a=parseInt(k(this).attr("left")),b=parseInt(k(this).attr("top"));
if(!d||a<d)d=a;if(!e||b<e)e=b});var f={};$patch.find("node").each(function(){u++;f[k(this).attr("id")]=u;k(this).attr("createme","pronto");k(this).attr("id",u);var a=parseInt(k(this).find("bounds").attr("left"))-d+15*q,b=parseInt(k(this).find("bounds").attr("top"))-e+15*r;k(this).find("bounds").attr("left",a);k(this).find("bounds").attr("top",b)});$patch.find("link").each(function(){k(this).attr("createme","pronto");var a=k(this).attr("srcnodeid"),b=k(this).attr("dstnodeid");k(this).attr("srcnodeid",
f[a]);k(this).attr("dstnodeid",f[b])});b=$patch.wrapAll("<d></d>").parent().html();g.update(l,b);c();var h=_(f).map(function(a){return a});a.selectAll(".vvvv-node").each(function(a){0<=h.indexOf(parseInt(a.id))&&(n.push(a),d3.select(this).attr("class","vvvv-node selected"))})})}a=root.append("svg:svg").attr("class","chart").attr("width",Math.max(l.windowWidth,l.boundingBox.width)).attr("height",Math.max(l.windowHeight,l.boundingBox.height));m=a.append("svg:rect").attr("class","background").attr("width",
Math.max(l.windowWidth,l.boundingBox.width)).attr("height",Math.max(l.windowHeight,l.boundingBox.height));f||(a.on("mousemove",function(){if(1==s.state)a.select(".vvvv-link.current-link").attr("x2",function(a){return d3.event.pageX+(d3.select(this).attr("x1")<d3.event.pageX?-1:1)}).attr("y2",function(a){return d3.event.pageY+(d3.select(this).attr("y1")<d3.event.pageY?-1:1)});else if(2==s.state){var e=d3.event.pageX-d,f=d3.event.pageY-b;a.selectAll(".vvvv-node.selected").attr("transform",function(a){return"translate("+
(a.x+e)+","+(a.y+f)+")"});for(var g=0;g<n.length;g++){var h=n[g];a.selectAll(".vvvv-link line").filter(function(a){return a.fromPin.node.id==h.id}).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+e}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+f});a.selectAll(".vvvv-link line").filter(function(a){return a.toPin.node.id==h.id}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+e}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+f})}}else 5==s.state&&(v=d3.event.pageX,
A=d3.event.pageY,a.select(".selection-area").attr("transform","translate("+Math.min(t,v)+", "+Math.min(x,A)+")").attr("width",Math.abs(v-t)).attr("height",Math.abs(A-x)),c(),a.selectAll(".vvvv-node").each(function(a){for(var b=[a.x,a.x+a.getWidth()],c=[a.y,a.y+a.getHeight()],d=!1,e=0;2>e;e++)for(var f=0;2>f;f++)b[e]>=Math.min(t,v)&&(b[e]<=Math.max(t,v)&&c[f]>=Math.min(x,A)&&c[f]<=Math.max(x,A))&&(d=!0);d&&(d3.select(this).attr("class","vvvv-node selected"),n.push(a))}))}).on("contextmenu",function(){1==
s.state&&(a.select(".vvvv-link.current-link").remove(),k(".resettable",s.window.document).remove(),a.selectAll(".vvvv-input-pin rect, .vvvv-output-pin rect").attr("width",4).attr("height",4).attr("x",0).attr("y",0).attr("class",""),s.state=0);d3.event.stopPropagation();d3.event.preventDefault();return!1}).on("mouseup",function(){if(2==s.state){s.state=0;for(var c=d3.event.pageX-d,e=d3.event.pageY-b,f="<PATCH>",h=0;h<n.length;h++)var k=n[h],f=f+("<NODE componentmode='Node' id='"+k.id+"'><BOUNDS type='Node' left='"+
15*(c+k.x)+"' top='"+15*(e+k.y)+"' width='"+k.width+"' height='"+k.height+"'/></NODE>");g.update(l,f+"</PATCH>")}5==s.state&&(a.select(".selection-area").remove(),s.state=0)}).on("dblclick",function(){function b(a){h.empty();var c=f.find("#node_filter").val().toLowerCase();""!=c&&k(".makro",s.window.document).remove();a=VVVV.NodeNames.concat(_(VVVV.ShaderCodeResources).map(function(a,b){return b.replace("%VVVV%/effects/","")}));a=_(_(a).filter(function(a){return 0<=VVVV.Helpers.translateOperators(a).toLowerCase().indexOf(c)})).sortBy(function(a){return a.toLowerCase().indexOf(c)});
for(var d=0;d<a.length;d++)h.append(k("<option>"+a[d]+"</option>"));h.find("option").first().attr("selected",!0)}function c(){var a=f.find("#node_filter").val(),b=f.find("#new_node option:selected").val(),h="";b||!a.match(/\.fx$/)&&!a.match(/\.v4p$/)||(b=a);if(b){var m;(m=b.match(/^(.*\/([^\.]+))(\.vvvvjs)?\.fx$/))?(b=m[2]+" (EX9.Effect)",h=m[1]+".fx"):(m=b.match("([^.]+)(.vvvvjs)?.fx$"))?(b=m[1]+" (EX9.Effect)",h="%VVVV%/effects/"+m[1]+".fx"):b.match("[^/].v4p$")&&(h=b=a);u++;b="<PATCH>"+("<NODE componentmode='Hidden' id='"+
u+"' nodename='"+b+"' systemname='"+b+"' "+(""!=h?"filename='"+h+"'":"")+">");b+="<BOUNDS type='Node' left='"+15*d+"' top='"+15*e+"' width='100' height='100'/>"}else u++,b="<PATCH>"+("<NODE componentmode='Hidden' id='"+u+"' nodename='IOBox (String)' systemname='IOBox (String)'>"),b+="<BOUNDS type='Node' left='"+15*d+"' top='"+15*e+"' width='100' height='100'/>",b+="<PIN pinname='Input String' values='|"+a+"|'/>";g.update(l,b+"</NODE>");f.remove();k(".makro",s.window.document).remove()}k("#node_selection",
s.window.document).remove();var d=d3.event.pageX,e=d3.event.pageY,f=k('<div id="node_selection"><input type="text" id="node_filter"/></div>'),h=k('<select id="new_node" size="8">');f.append(h);f.css("left",d);f.css("top",e);k("body",s.window.document).append(f);f.find("input").bind("paste",function(a){a.stopPropagation()});f.find("#node_filter").get(0).focus();b();f.find("#node_filter").keyup(function(a){if(13==a.which)c();else{if(40==a.which)return h.find("option:selected").first().next().attr("selected",
!0),!1;if(38==a.which)return h.find("option:selected").first().prev().attr("selected",!0),!1;b()}});f.find("#new_node").click(c);var m=a.selectAll("g.makro").data(VVVV.Makros).enter().append("svg:g").attr("class","makro resettable").attr("transform",function(a,b){return"translate("+(d-85-85*(b%2))+", "+(e+25*Math.floor(b/2))+")"}).on("click",function(a){a=a.command.replace("{left}",15*d).replace("{top}",15*e).replace("{id}",++u);g.update(l,a);f.remove();k(".makro",s.window.document).remove()});m.append("svg:rect").attr("width",
80).attr("height",20).attr("fill","#AAA");m.append("svg:text").text(function(a){return a.name}).attr("text-anchor","middle").attr("fill","#333").attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("dy",12).attr("dx",40)}).on("mousedown",function(){0==s.state&&(s.state=5,t=v=d3.event.pageX+1,x=A=d3.event.pageY+1,a.append("svg:rect").attr("class","selection-area").attr("stroke","#000").attr("stroke-dasharray","2,2").attr("stroke-width",1).attr("fill","rgba(0,0,0,0)").attr("transform",
"translate("+t+", "+x+")").attr("width",0).attr("height",0),c())}),m.on("click",function(){s.state=0;k(".resettable",s.window.document).remove();a.selectAll(".vvvv-input-pin rect, .vvvv-output-pin rect").attr("width",4).attr("height",4).attr("x",0).attr("y",0).attr("class","");k("#node_selection",s.window.document).remove();c();p=void 0}),m=function(a){y=a.shiftKey},k(s.window.document).keydown(m),k(s.window.document).keyup(m),k(s.window.document).keydown(function(b){if(46==b.which&&0<n.length){var d=
"<PATCH>";for(b=0;b<n.length;b++){var e=n[b],d=d+("<NODE id='"+n[b].id+"' deleteme='pronto'/>");_(e.inputPins).each(function(a){_(a.links).each(function(a){d+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"})});_(e.outputPins).each(function(a){_(a.links).each(function(a){d+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+
"' dstpinname='"+a.toPin.pinname+"'/>"})})}d+="</PATCH>";g.update(l,d);n=[]}else if(115!=b.which&&83!=b.which||!b.ctrlKey){if(73==b.which&&b.ctrlKey)return g.inspector?g.inspector.win.focus():g.openInspector("."),b.preventDefault(),!1;if(65==b.which&&b.ctrlKey)return c(),a.selectAll(".vvvv-node").each(function(a){n.push(a);d3.select(this).attr("class","vvvv-node selected")}),b.preventDefault(),!1}else return g.save(l.nodename,l.toXML()),b.preventDefault(),!1}),k(s.window).resize(function(){l.windowWidth=
k(this).width();l.windowHeight=k(this).height();l.boundingBox.width=Math.max(l.windowWidth,l.boundingBox.width);l.boundingBox.height=Math.max(l.windowHeight,l.boundingBox.height);l.afterUpdate()}));s.drawComplete();l.afterUpdate=function(){s.drawComplete();g.inspector&&window.setTimeout(g.inspector.update,100)};l.afterEvaluate=function(){h.filter(function(a){return a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel}).each(function(a){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,
a)})}},1E3);this.close=function(){this.window.close()};this.drawComplete=function(){h&&h.remove();q&&q.remove();f||l.windowWidth==k(s.window).width()&&l.windowHeight==k(s.window).height()||s.window.resizeTo(l.windowWidth,l.windowHeight);a.attr("width",Math.max(l.windowWidth,l.boundingBox.width)).attr("height",Math.max(l.windowHeight,l.boundingBox.height));a.selectAll(".background").attr("width",Math.max(l.windowWidth,l.boundingBox.width)).attr("height",Math.max(l.windowHeight,l.boundingBox.height));
var e=a.append("svg:g").attr("class","link-group");h=a.selectAll("g.vvvv-node").data(l.nodeList).enter().append("svg:g").attr("class",function(a){var b="vvvv-node";a.isIOBox&&(b+=" vvvv-iobox");0<=n.indexOf(a)&&(b+=" selected");return b}).attr("id",function(a){return"vvvv-node-"+a.id}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"});h.append("svg:rect").attr("class","vvvv-node-background").attr("height",function(a){return a.getHeight()}).attr("width",function(a){return a.getWidth()}).attr("fill",
function(a){return a.isComment()?"rgba(0,0,0,0)":a.not_implemented?"rgba(255,0,0,1)":"#cdcdcd"});h.append("svg:rect").attr("class","vvvv-node-pinbar").attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});h.append("svg:rect").attr("class","vvvv-node-pinbar").attr("y",function(a){return a.isIOBox?a.getHeight()-2:a.getHeight()-4}).attr("height",function(a){return a.isIOBox?2:4}).attr("fill",function(a){return a.isIOBox?
"#dddddd":"#9a9a9a"}).attr("width",function(a){return a.getWidth()});h.append("svg:g").attr("class","descriptive-name-bg");h.append("svg:text").text(function(a){return a.invisiblePins["Descriptive Name"]?a.invisiblePins["Descriptive Name"].getValue(0):null}).attr("class","vvvv-node-descriptive-name").attr("shape-rendering","crispEdges").attr("dy",function(a){return a.getHeight()+12}).attr("dx",2).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","white");h.append("svg:text").text(function(a){return a.invisiblePins["Node Name"]&&
"DefineNode (System)"==a.nodename?a.invisiblePins["Node Name"].getValue(0):null}).attr("class","vvvv-node-descriptive-name").attr("shape-rendering","crispEdges").attr("dy",function(a){return a.getHeight()+12}).attr("dx",2).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","blue");h.selectAll("g.descriptive-name-bg").append("svg:rect").attr("fill",function(a){return void 0==a.invisiblePins["Descriptive Name"]||""==a.invisiblePins["Descriptive Name"].getValue(0)?"rgba(0,0,0,0)":
"rgba(0,0,0,1)"}).attr("y",function(a){return a.getHeight()}).attr("width",5).attr("height",14);h.each(function(a){if(a.isIOBox&&VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel){VVVV.PinTypes[a.IOBoxInputPin().typeName].makeLabel(this,a);for(var b=a.IOBoxRows(),c=a.IOBoxInputPin().getSliceCount(),d=this,e=0;e<b;e++)(function(e){var h=d3.select(d).append("svg:rect").attr("width",a.getWidth()+2).attr("height",a.getHeight()/b-4).attr("y",12*e+2).attr("fill","rgba(0,0,0,0)");if(!f)h.on("contextmenu",
function(a){if(void 0!=a.IOBoxInputPin().getValue(0)&&!a.IOBoxInputPin().isConnected()){k(".resettable",s.window.document).remove();var d=k("<input type='text'/>");k("body",s.window.document).append(d);d.css("position","absolute");d.css("left",k(this).offset().left);d.css("top",k(this).offset().top+2);d.css("width",a.getWidth());d.css("height",a.getHeight()/b-4);VVVV.PinTypes[a.IOBoxInputPin().typeName].openInputBox(s.window,d,a.IOBoxInputPin(),e%c)}d3.event.stopPropagation();d3.event.preventDefault();
return!1})})(e)}else d3.select(this).append("svg:text").text(function(a){return a.label()}).attr("class","vvvv-node-label").attr("shape-rendering","crispEdges").attr("dy",function(a,b){return 12*b+12}).attr("dx",4).attr("font-size",10).attr("font-family","Lucida Sans Unicode")});m=h.selectAll("g.vvvv-input-pin").data(function(a){return a.isSubpatch?_(a.inputPins).sortBy(function(a){return a.slavePin?a.slavePin.node.x:1}).map(function(a,b){return a}):_(a.inputPins).map(function(a,b){return a})}).enter().append("svg:g").attr("class",
"vvvv-input-pin").attr("transform",function(a,b){pinOffset=0;1<_(a.node.inputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.inputPins).size()-1));a.y=0;a.x=b*pinOffset;return"translate("+a.x+", 0)"});m.append("svg:rect").attr("width",4).attr("height",4).attr("fill",function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-input-pin").filter(function(a,b){return b==c}).each(function(){d3.select(this).append("svg:rect").attr("class",
"vvvv-input-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);d3.select(this).append("svg:text").text(function(a){return 1<a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-input-pin text").remove();a.selectAll("#vvvv-node-"+b.node.id+
" g.vvvv-input-pin rect.vvvv-input-pin-highlight").remove()});r=h.selectAll("g.vvvv-output-pin").data(function(a){return _(a.outputPins).map(function(a,b){return a})}).enter().append("svg:g").attr("class","vvvv-output-pin").attr("transform",function(a,b){pinOffset=0;1<_(a.node.outputPins).size()&&(pinOffset=(a.node.getWidth()-4)/(_(a.node.outputPins).size()-1));a.y=a.node.getHeight()-4;a.x=b*pinOffset;return"translate("+a.x+", "+a.y+")"});r.append("svg:rect").attr("width",4).attr("height",4).attr("fill",
function(a){return a.node.isComment()?"rgba(0,0,0,0)":"#666666"}).on("mouseover",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin").filter(function(a,b){return b==c}).each(function(){d3.select(this).append("svg:rect").attr("class","vvvv-output-pin-highlight").attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-4);b.values.code&&(new Function("patch",b.generateStaticCode(!1)))(b.node.parentPatch);d3.select(this).append("svg:text").text(function(a){return 1<
a.getSliceCount()?a.pinname+"("+a.getSliceCount()+"): "+a.getValue(0):a.pinname+": "+a.getValue(0)}).attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(0,0,0,1)")})}).on("mouseout",function(b,c){a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin text").remove();a.selectAll("#vvvv-node-"+b.node.id+" g.vvvv-output-pin rect.vvvv-output-pin-highlight").remove()});q=e.selectAll("g.vvvv-link").data(l.linkList).enter().append("svg:g").attr("class","vvvv-link");
q.append("svg:line").attr("stroke","rgba(0, 0, 0, 0)").attr("stroke-width",4).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});q.append("svg:line").attr("stroke","#000").attr("stroke-width",1).attr("x1",function(a){return a.fromPin.x+a.fromPin.node.x+2+0.5}).attr("y1",function(a){return a.fromPin.y+
a.fromPin.node.y+4+0.5}).attr("x2",function(a){return a.toPin.x+a.toPin.node.x+2+0.5}).attr("y2",function(a){return a.toPin.y+a.toPin.node.y+0.5});k(".descriptive-name-bg rect",s.window.document).each(function(){k(this,s.window.document).attr("width",k(this,s.window.document).parent().next().get(0).getBBox().width+4)});f||(a.selectAll("g.vvvv-input-pin").on("contextmenu",function(a,b){if(VVVV.PinTypes[a.typeName].openInputBox&&void 0!=a.getValue(0)&&!a.isConnected()){k(".resettable",s.window.document).remove();
var c=k("<input type='text'/>");k("body",s.window.document).append(c);c.css("position","absolute");c.css("left",k(this).offset().left);c.css("top",k(this).offset().top-3);c.css("width",50);c.css("height",14);VVVV.PinTypes[a.typeName].openInputBox(s,c,a,0)}d3.event.stopPropagation();d3.event.preventDefault();return!1}),a.selectAll("g.vvvv-input-pin, g.vvvv-output-pin").on("click",function(b,c){if(1!=s.state){p=b;s.state=1;a.append("svg:line").attr("class","vvvv-link current-link resettable").attr("stroke",
"#000").attr("stroke-width",1).attr("x1",b.x+b.node.x+2+0.5).attr("y1",b.y+b.node.y+2+0.5).attr("x2",b.x+b.node.x+2+0.5).attr("y2",b.y+b.node.y+2+0.5);var d=p.direction==VVVV.PinDirection.Output?"input":"output",e=[],f=function(a){a=a.getUpstreamNodes();for(var b=0;b<a.length;b++)a[b]==p.node||a[b].delays_output||(e.push(a[b]),f(a[b]));return!1};p.node.delays_output||f(p.node);a.selectAll("g.vvvv-"+d+"-pin rect").filter(function(a){return a.typeName!=p.typeName&&("Node"!=p.typeName||VVVV.PinTypes[a.typeName].primitive)&&
("Node"!=a.typeName||VVVV.PinTypes[p.typeName].privimive)||0<=e.indexOf(a.node)||a.node==p.node?!1:!0}).attr("width",6).attr("height",6).attr("x",-1).attr("y",function(a){return a.direction==VVVV.PinDirection.Input?-2:0}).attr("class","vvvv-connection-highlight")}else{if(p.direction==VVVV.PinDirection.Input)var d=b,h=p;else d=p,h=b;if(1==k(this).find(".vvvv-connection-highlight").length){var m="<PATCH>";_(h.links).each(function(a){m+="<LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+
a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/>"});m+="<LINK createme='pronto' srcnodeid='"+d.node.id+"' srcpinname='"+d.pinname+"' dstnodeid='"+h.node.id+"' dstpinname='"+h.pinname+"'/>";m+="</PATCH>";g.update(l,m);a.select(".vvvv-link.current-link").remove();a.select(".vvvv-connection-highlight").remove();s.state=0;l.afterUpdate()}}d3.event.stopPropagation()}).on("mousedown",function(){d3.event.stopPropagation()}),a.selectAll("g.vvvv-link").on("contextmenu",
function(a){0==s.state&&g.update(l,"<PATCH><LINK deleteme='pronto' srcnodeid='"+a.fromPin.node.id+"' srcpinname='"+a.fromPin.pinname+"' dstnodeid='"+a.toPin.node.id+"' dstpinname='"+a.toPin.pinname+"'/></PATCH>");d3.event.preventDefault()}),h.on("mousedown",function(a){k(".resettable",s.window.document).remove();s.state=2;0>n.indexOf(a)&&(y||c(),d3.select(this).attr("class","vvvv-node selected"),n.push(a));d=d3.event.pageX;b=d3.event.pageY;g.inspector&&g.inspector.setNode(a);d3.event.preventDefault();
d3.event.stopPropagation();return!1}).on("contextmenu",function(a){a.isSubpatch?g.openPatch(a):a.openUIWindow&&a.openUIWindow();d3.event.preventDefault();d3.event.stopPropagation();return!1}))}};VVVV.Editors.BrowserEditor.Inspector=function(e){function g(){b=void 0;k(a.win.document).find("#pins, #values").empty();k(a.win.document).find("#pins").append('<div class="row heading">Configuration</div>');k(a.win.document).find("#values").append('<div class="row heading"></div>');_(d.invisiblePins).each(function(a){f(a)});
k(a.win.document).find("#pins").append('<div class="row heading">Input Pins</div>');k(a.win.document).find("#values").append('<div class="row heading"></div>');_(d.inputPins).each(function(a){f(a)});k(a.win.document).find("#pins").append('<div class="row heading">Output Pins</div>');k(a.win.document).find("#values").append('<div class="row heading"></div>');_(d.outputPins).each(function(a){f(a)})}function f(b){var d=k('<a class="row pin" href="#">'+b.pinname+"</a>");k(a.win.document).find("#pins").append(d);
d.click(function(d){k(a.win.document).find("a.pin.active").removeClass("active");k(this).addClass("active");VVVV.PinTypes[b.typeName].openInputBox&&c(b);d.preventDefault();return!1});VVVV.PinTypes[b.typeName].openInputBox&&b.direction!=VVVV.PinDirection.Output&&!b.isConnected()&&void 0!=b.getValue(0)?(d=k('<div class="row value"><div style="height:100%">'+b.getValue(0).toString().replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div>"),d.find("div").click(function(){VVVV.PinTypes[b.typeName].openInputBox(a.win,
k(this),b,0)})):d=k('<div class="row value readonlyvalue"><div style="height:100%">'+(void 0==b.getValue(0)?"undefined":b.getValue(0).toString().replace(/</g,"&lt;").replace(/>/g,"&gt;"))+"</div></div>");"Color"==b.typeName&&d.find("div").css("background-color","rgba("+_(b.getValue(0).rgba).map(function(a){return parseInt(255*a)}).join(",")+")");k(a.win.document).find("#values").append(d)}function c(c){var d=b!=c;b=c;var e=c.getSliceCount(),f=k('<div class="row heading"><input type="text" value="'+
e+'"/ size="3"/> Slices</div>');c.direction!=VVVV.PinDirection.Input&&f.find("input").attr("disabled",!0);var g=k(a.win.document).find("#values .row").first();0<g.length?g.replaceWith(f):k(a.win.document).find("#values").append(f);f.find("input").change(function(a){for(var c=Math.max(1,parseInt(k(this).val())),d=b.getSliceCount();d<c;d++)b.setValue(d,VVVV.PinTypes[b.typeName].defaultValue());b.setSliceCount(c);b.node.parentPatch.afterUpdate();a.preventDefault();return!1});for(f=f=0;f<e;f++)if(g=k(a.win.document).find("#values .row").eq(f+
1),d||!g.children().first().hasClass("pininputbox")){if(VVVV.PinTypes[c.typeName].openInputBox&&c.direction!=VVVV.PinDirection.Output&&!c.isConnected()&&void 0!=c.getValue(0)){var n=k('<div class="row value"><div style="height:100%">'+c.getValue(f).toString().replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div>");(function(b){n.find("div").click(function(){VVVV.PinTypes[c.typeName].openInputBox(a.win,k(this),c,b)})})(f)}else n=k('<div class="row value readonlyvalue"><div style="height:100%">'+
c.getValue(f).toString().replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div></div>");0<g.length?g.replaceWith(n):k(a.win.document).find("#values").append(n);"Color"==c.typeName&&n.find("div").css("background-color","rgba("+_(c.getValue(f).rgba).map(function(a){return parseInt(255*a)}).join(",")+")")}f++;for(g=k(a.win.document).find("#values .row");f<g.length;f++)g.eq(f).remove()}this.win=window.open(location.protocol+"//"+location.host+("/"==VVVV.Root[0]?"":location.pathname.replace(/\/[^\/]*$/,"")+
"/")+VVVV.Root+"/inspektor.html","inspektor","location=no, width=250, height=600, toolbar=no");var d,b;insw=this.win;var a=this;this.update=function(){d&&(b?c(b):g())};this.setNode=function(a){d=a;g()};this.close=function(){this.win.close()}};VVVV.Editors.BrowserEditor.Interface=function(){function e(){return"Are you sure you want to leave? Unsaved changes in your patches will be lost."}var g=[],f={};this.inspector=void 0;this.enable=function(c,b){b=b||{};this.addPatch(c);this.openPatch(c,b.selector);
if(!b.selector){var a=this;k(window).bind("beforeunload",e);k(window).unload(function(){a.disable()});this.openInspector(VVVV.Root);g[0].window?b&&b.success&&b.success():b&&b.error&&b.error()}};this.openInspector=function(c,b){if(!this.inspector){this.inspector=new VVVV.Editors.BrowserEditor.Inspector(c);var a=this;k(this.inspector.win).bind("beforeunload",function(){console.log("closing inspektor");a.inspector=void 0})}};var c=[];this.addPatch=function(d){for(var b=d.id,a=d;void 0!=(a=a.parentPatch);)b+=
"-"+a.id;if(!(0<=c.indexOf(b)))for(c.push(b),d.editor=this,b=VVVV.Helpers.prepareFilePath(d.nodename,d.parentPatch),void 0==f[b]&&(f[b]=[]),f[b].push(d),d=d.getSubPatches(),b=0;b<d.length;b++)this.addPatch(d[b])};this.removePatch=function(c){for(var b=c.getSubPatches(),a=0;a<b.length;a++)this.removePatch(b[a]);b=VVVV.Helpers.prepareFilePath(c.nodename,c.parentPatch);f[b].splice(f[b].indexOf(c),1);0==f[b].length&&delete f[b];console.log(f)};this.openPatch=function(c,b){g.push(new VVVV.Editors.BrowserEditor.PatchWindow(c,
this,b))};this.update=function(c,b){for(var a=VVVV.Helpers.prepareFilePath(c.nodename,c.parentPatch),e=f[a].length,g=0;g<e;g++)f[a][g].doLoad(b),f[a][g].afterUpdate()};this.disable=function(){for(var c=0;c<g.length;c++)g[c].close();this.inspector&&this.inspector.close();k(window).unbind("beforeunload",e)};this.save=function(c,b){var a=k("<a>save</a>");k("body").append(a);a.attr("href","data:application/octet-stream;charset=utf-8,"+encodeURIComponent(b));a.attr("download",c.replace(/.*\//,""));a[0].click();
a.remove()};this.sendUndo=function(){}};VVVV.VVVViewer=function(e,g){(new VVVV.Editors.BrowserEditor.Interface).enable(e,{selector:g})};VVVV.Editors.edit=VVVV.Editors.BrowserEditor.Interface})(vvvvjs_jquery);VVVV.Themes=VVVV.Themes||{};
VVVV.Themes.Tron={scaleX:1.2,scaleY:1.8,categoryColors:{Value:"#78B4A8",Animation:"#51de3a","3d":"#78B4A8",Boolean:"#78B4A8",Complex:"#78B4A8","2d":"#78B4A8",Spreads:"#78B4A8",String:"#d54c70",EX9:"#d6bf00",Canvas:"#d6bf00",HTML5:"#d6bf00",Transform:"#ba4b36","default":"#AAAAAA"},chart:function(k){},background:function(k){k.attr("fill","#666666")},node:function(k){k.attr("x",-1).attr("width",function(e){return e.getWidth()*VVVV.Themes.Tron.scaleX+2}).attr("rx",1).attr("ry",1).attr("stroke","rgba(127, 190, 183, 1.0)").attr("stroke-width",
1).attr("fill",function(e){return e.isComment()?"rgba(0,0,0,0)":e.not_implemented?"rgba(255,0,0,1)":"rgba(127, 190, 183, 0.6)"})},inputPinBar:function(k){k.attr("height",2).attr("fill","rgba(0,0,0,0)")},outputPinBar:function(k){k.attr("y",function(e){return e.getHeight()*VVVV.Theme.scaleY-2}).attr("height",2).attr("fill","rgba(0,0,0,0)")},descriptiveNameText:function(k){k.attr("shape-rendering","crispEdges").attr("dy",function(e){return e.getHeight()*VVVV.Theme.scaleY+12}).attr("dx",2).attr("font-size",
10).attr("font-family","Lucida Sans Unicode").attr("fill","white")},descriptiveNameBackground:function(k){k.attr("fill",function(e){return void 0==e.invisiblePins["Descriptive Name"]||""==e.invisiblePins["Descriptive Name"].getValue(0)?"rgba(0,0,0,0)":"rgba(0,0,0,1)"}).attr("y",function(e){return e.getHeight()*VVVV.Theme.scaleY}).attr("width",5).attr("height",14)},nodeLabel:function(k){k.attr("fill","white").attr("shape-rendering","crispEdges").attr("dy",function(e,g){return 18*g+19}).attr("dx",4).attr("font-size",
11).attr("font-family","Lucida Sans Unicode")},inputPin:function(k){k.attr("y",-2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(e){return e.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},inputPinHover:function(k){k.attr("width",4).attr("height",4).attr("fill","rgba(0,0,0,1)").attr("y",-6)},inputPinValue:function(k){k.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},outputPin:function(k){k.attr("y",
2.5).attr("x",0.5).attr("width",4).attr("height",4).attr("fill",function(e){return e.node.isComment()?"rgba(0,0,0,0)":"white"}).attr("stroke","#666").attr("stroke-width",1)},outputPinHover:function(k){k.attr("width",4).attr("height",4).attr("fill","rgba(1,1,1,1)").attr("y",6)},outputPinValue:function(k){k.attr("dy",30).attr("font-size",10).attr("font-family","Lucida Sans Unicode").attr("fill","rgba(1,1,1,1)")},connectablePin:function(k){k.attr("width",4).attr("height",3).attr("fill","rgba(1,1,1,1)").attr("y",
function(e){return e.direction==PinDirection.Input?-3:3})},link:function(k){k.append("svg:path").attr("stroke","rgba(0, 0, 0, 0)").attr("fill","rgba(0,0,0,0)").attr("stroke-width",4).attr("d",function(e){var g=(e.toPin.node.y-e.fromPin.node.y-e.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>g&&(g=30);return"M"+(e.fromPin.x+e.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(e.fromPin.y+e.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(e.fromPin.x+e.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(e.fromPin.y+
e.fromPin.node.y*VVVV.Theme.scaleY+4+g)+" "+(e.toPin.x+e.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(e.toPin.y+e.toPin.node.y*VVVV.Theme.scaleY-g)+" "+(e.toPin.x+e.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(e.toPin.y+e.toPin.node.y*VVVV.Theme.scaleY+0.5)});k.append("svg:path").attr("stroke","#FFF").attr("fill","rgba(0,0,0,0)").attr("stroke-width",0.5).attr("d",function(e){var g=(e.toPin.node.y-e.fromPin.node.y-e.fromPin.node.getHeight())*VVVV.Theme.scaleY/5;0>g&&(g=30);return"M"+(e.fromPin.x+e.fromPin.node.x*
VVVV.Theme.scaleX+2+0.5)+","+(e.fromPin.y+e.fromPin.node.y*VVVV.Theme.scaleY+4+0.5)+" C"+(e.fromPin.x+e.fromPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(e.fromPin.y+e.fromPin.node.y*VVVV.Theme.scaleY+4+g)+" "+(e.toPin.x+e.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(e.toPin.y+e.toPin.node.y*VVVV.Theme.scaleY-g)+" "+(e.toPin.x+e.toPin.node.x*VVVV.Theme.scaleX+2+0.5)+","+(e.toPin.y+e.toPin.node.y*VVVV.Theme.scaleY+0.5)})},currentLink:function(k){k.attr("stroke","#FFF").attr("stroke-width",1)}};
VVVV.Theme=VVVV.Themes.Tron;
